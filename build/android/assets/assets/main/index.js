System.register("chunks:///_virtual/linkItem.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./resourceUtil.ts","./constants.ts"],(function(e){"use strict";var t,i,s,n,a,c,o,l,r,h,f,p,E,S,u;return{setters:[function(e){t=e.cclegacy,i=e.Enum,s=e._decorator,n=e.Component,a=e.TweenSystem,c=e.tween,o=e.UITransform,l=e.Vec3,r=e.Animation},function(e){h=e.applyDecoratedDescriptor,f=e.initializerDefineProperty,p=e.defineProperty},function(e){E=e.poolManager},function(e){S=e.resourceUtil},function(e){u=e.constants}],execute:function(){var T,d,C,k;t._RF.push({},"000eahOFsJC4YWx/wV0fJqQ","linkItem",void 0);const{ccclass:I,property:y}=s,L=i({SHOW:"linkItemShow",HIDE:"linkItemHide",SELECT:"linkItemSelect",SHAKE:"linkItemShake",SKILL:"linkItemSkill"});e("LinkItem",I("LinkItem")((C=h((d=class extends n{constructor(...e){super(...e),f(this,"spCake",C,this),f(this,"aniCake",k,this),p(this,"index",void 0),p(this,"cake",void 0),p(this,"linkParent",void 0),p(this,"isSpecial",void 0),p(this,"specialType",void 0),p(this,"effectType",void 0),p(this,"currentStatus",void 0),p(this,"effectNode",void 0),p(this,"specialEffect",void 0)}show(e,t,i,s){this.index=e,this.cake=t,this.linkParent=s,this.isSpecial=!1,this.specialType=null,this.effectType=null,this.node.setSiblingIndex(u.ZORDER.LINK_ITEM_NORMAL),this.spCake.node.setScale(0,0,0),S.setCakeIcon(this.cake,this.spCake,(()=>{})),i&&this.playShowAction(0)}playShowAction(e){a.instance.ActionManager.removeAllActionsFromTarget(this.node),c(this.node).delay(e).call((()=>{this.aniCake.play(L.SHOW),this.currentStatus=L.SHOW})).start()}playHideAction(e,t){a.instance.ActionManager.removeAllActionsFromTarget(this.node),c(this.node).delay(e).call((()=>{this.aniCake.play(L.HIDE),this.currentStatus=L.HIDE,t&&this.linkParent._fightScene.effectGroup.showLinkItemDestroyEffect(this.node.getComponent(o).convertToWorldSpaceAR(new l(0,0,0)),this.getScore()),this.aniCake.once(r.EventType.FINISHED,(()=>{E.instance.putNode(this.node),this.effectNode&&(this.effectNode.destroy(),this.effectNode=null),this.specialEffect&&(E.instance.putNode(this.specialEffect),this.specialEffect=null)}),this)})).start()}getScore(){let e=0;if(this.isSpecial&&(this.specialType===u.SPECIAL_EFFECT.HORIZONTAL||this.specialType===u.SPECIAL_EFFECT.VERTICAL?e+=1e3:this.specialType===u.SPECIAL_EFFECT.PLUS?e+=2e3:this.specialType===u.SPECIAL_EFFECT.CENTER&&(e+=3e3),!this.effectType))return e;if(this.effectType)switch(this.effectType){case u.SPECIAL_EFFECT.HORIZONTAL:case u.SPECIAL_EFFECT.VERTICAL:return e+500;case u.SPECIAL_EFFECT.PLUS:return e+1e3;case u.SPECIAL_EFFECT.CENTER:return e+1500}return 50}showSelect(e){let t=this.cake;e?(this.aniCake.play(L.SELECT),this.currentStatus=L.SELECT,t=this.cake+"Light"):this.effectType?(this.aniCake.play(L.SKILL),this.currentStatus=L.SKILL):this.aniCake.stop(),S.setCakeIcon(t,this.spCake,(()=>{}))}showDestory(){this.playHideAction(0,!0)}playMove2Index(e){let t=this.linkParent.getScreenPosByIndex(e),i=t.clone().subtract(this.node.position).length();a.instance.ActionManager.removeAllActionsFromTarget(this.node),c(this.node).to(i/1e3,{position:t},{easing:"backIn"}).call((()=>{this.aniCake.play(L.SHAKE)})).start()}showSpecial(e){this.isSpecial=e,e?S.getEffectPrefab("fight/linkStar/linkStar",((e,t)=>{e||this.isSpecial&&(this.specialEffect=E.instance.getNode(t,this.node),this.specialEffect.position=new l(0,0,0),this.specialEffect.getComponent(r).play("linkStarShow"))})):this.specialEffect&&(E.instance.putNode(this.specialEffect),this.specialEffect=null)}setSpecialType(e){this.specialType=e}markEffect(e){this.effectType=e}showEffect(e){this.effectNode&&this.effectNode.destroy(),this.node.setSiblingIndex(u.ZORDER.LINK_ITEM_SKILL),this.effectType=e,this.aniCake.play(L.SKILL),this.currentStatus=L.SKILL;let t=0,i="fight/effectSkillTips/skillTipsLine";switch(e){case u.SPECIAL_EFFECT.HORIZONTAL:break;case u.SPECIAL_EFFECT.VERTICAL:t=90;break;case u.SPECIAL_EFFECT.PLUS:i="fight/effectSkillTips/skillTipsPlus";break;case u.SPECIAL_EFFECT.CENTER:i="fight/effectSkillTips/skillTipsRange"}S.createEffect(i,((e,i)=>{e||(this.effectNode=i,this.effectNode.eulerAngles=new l(0,0,t))}),this.node)}getEffect(){return this.effectType}}).prototype,"spCake",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=h(d.prototype,"aniCake",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=d))||T);t._RF.pop()}}}));

System.register("chunks:///_virtual/fightPropsOperation.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./clientEvent.ts","./uiManager.ts","./fightProp.ts","./LanguageData.ts"],(function(t){"use strict";var e,i,o,n,s,r,h,c,l,a,p,u,d,g;return{setters:[function(t){e=t.cclegacy,i=t._decorator,o=t.Component,n=t.Node,s=t.UITransform,r=t.Vec3},function(t){h=t.applyDecoratedDescriptor,c=t.initializerDefineProperty,l=t.defineProperty},function(t){a=t.resourceUtil},function(t){p=t.clientEvent},function(t){u=t.uiManager},function(t){d=t.FightProp},function(t){g=t.t}],execute:function(){var f,T,b,C,P,y,m,w,E,_;e._RF.push({},"01774upBQlPPZbPTE42gyAF","fightPropsOperation",void 0);const{ccclass:v,property:k}=i;t("FightPropsOperation",v("FightPropsOperation")((b=h((T=class extends o{constructor(...t){super(...t),c(this,"nodeMask",b,this),c(this,"nodeTouch",C,this),c(this,"nodeBg",P,this),c(this,"nodeProp",y,this),c(this,"lbTips",m,this),c(this,"lbName",w,this),c(this,"spProp",E,this),c(this,"arrSfTip",_,this),l(this,"propId",void 0),l(this,"closeCallback",void 0),l(this,"_fightScene",void 0)}onEnable(){this.nodeTouch.on(n.EventType.TOUCH_START,this.onTouchStart,this),this.nodeTouch.on(n.EventType.TOUCH_END,this.onTouchEnded,this),this.nodeTouch.on(n.EventType.TOUCH_CANCEL,this.onTouchCancel,this)}onDisable(){this.nodeTouch.off(n.EventType.TOUCH_START,this.onTouchStart,this),this.nodeTouch.off(n.EventType.TOUCH_END,this.onTouchEnded,this),this.nodeTouch.off(n.EventType.TOUCH_CANCEL,this.onTouchCancel,this)}show(t,e,i,o,n){this.propId=t.ID,a.setPropIcon(t.icon,this.spProp,(()=>{}));let h=this.node.getComponent(s).convertToNodeSpaceAR(e);this.closeCallback=n,this.nodeProp.position=h,this.nodeProp.getComponent(d).show(t),this.lbTips.string=g("table_prop."+t.desc),this.lbName.string=g("table_prop."+t.name),this._fightScene=o,this.nodeMask.position=new r(i.x+i.width/2,i.y+i.height/2,0),this.nodeTouch.position=this.nodeMask.position;const c=this.nodeMask.getComponent(s);c.width=i.width,c.height=i.height;const l=this.nodeTouch.getComponent(s);l.width=i.width,l.height=i.height,this.scheduleOnce((()=>{const t=this.node.getComponent(s),e=this.nodeBg.getComponent(s);e.width=t.width,e.height=t.height,this.nodeBg.position=new r(-this.nodeMask.position.x,-this.nodeMask.position.y,0)}),.1)}onTouchStart(t){this._fightScene.linkContent.onPropTouchStart(t)}onTouchEnded(t){let e=this._fightScene.linkContent.onPropTouchEnd(t);-1!==e&&(p.dispatchEvent("useProp",this.propId,e),this.close())}onTouchCancel(t){this._fightScene.linkContent.onPropTouchCancel(t)}onBtnCloseClick(){this.close()}close(){u.instance.hideDialog("fight/fightPropsOperation"),this.closeCallback&&this.closeCallback()}}).prototype,"nodeMask",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=h(T.prototype,"nodeTouch",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=h(T.prototype,"nodeBg",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=h(T.prototype,"nodeProp",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=h(T.prototype,"lbTips",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=h(T.prototype,"lbName",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=h(T.prototype,"spProp",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=h(T.prototype,"arrSfTip",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=T))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/fightTarget.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./clientEvent.ts","./playerData.ts","./loadsh.ts"],(function(e){"use strict";var t,i,a,n,r,o,s,l,u,c,h,p,d;return{setters:[function(e){t=e.cclegacy,i=e._decorator,a=e.Component,n=e.Vec3,r=e.Animation,o=e.UITransform},function(e){s=e.applyDecoratedDescriptor,l=e.initializerDefineProperty,u=e.defineProperty},function(e){c=e.resourceUtil},function(e){h=e.clientEvent},function(e){p=e.playerData},function(e){d=e.loadsh}],execute:function(){var g,f,m,b,k,C,T,w,y;t._RF.push({},"01817VhYV5BoLEoEhl13On0","fightTarget",void 0);const{ccclass:v,property:V}=i;e("FightTarget",v("FightTarget")((m=s((f=class extends a{constructor(...e){super(...e),l(this,"spCake",m,this),l(this,"lbTargetValue",b,this),l(this,"nodeCustomer",k,this),l(this,"nodeNeed",C,this),l(this,"nodeCake",T,this),l(this,"nodeYes",w,this),l(this,"aniCake",y,this),u(this,"cake",void 0),u(this,"customer",void 0)}onEnable(){h.on("updateTargets",this.updateTarget,this),h.on("showTargetCake",this.showTargetCake,this)}onDisable(){h.off("updateTargets",this.updateTarget,this),h.off("showTargetCake",this.showTargetCake,this)}show(e,t){if(this.cake=e,c.setCakeIcon(this.cake,this.spCake,(()=>{})),this.updateTagetValue(),t)if(this.customer)this.customer.active=!0;else{let e=d.random(0,1),t="role/man01/man01",i=0;e&&(t="role/woman01/woman01",i=15),c.createEffect(t,((e,t)=>{e||(this.customer=t,this.customer.position=new n(0,i,0))}),this.nodeCustomer)}else this.customer&&(this.customer.active=!1);this.nodeNeed.active=!1,this.nodeCake.active=!1}showTargetCake(e){"all"!==e&&e!==this.cake||(this.nodeNeed.active=!0,this.nodeCake.active=!0,this.node.getComponent(r).play("linkItemShowTarget"))}updateTagetValue(){let e=p.instance.getTargetValue(this.cake);this.lbTargetValue.string=e,this.nodeYes.active=e<=0}updateTarget(e){this.cake===e&&this.updateTagetValue()}playIdle(){this.customer&&this.customer.getComponent(r).play("idle")}getCakeWorldPos(){return this.spCake.node.getComponent(o).convertToWorldSpaceAR(new n(0,0,0))}}).prototype,"spCake",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=s(f.prototype,"lbTargetValue",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=s(f.prototype,"nodeCustomer",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=s(f.prototype,"nodeNeed",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=s(f.prototype,"nodeCake",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=s(f.prototype,"nodeYes",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=s(f.prototype,"aniCake",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=f))||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"04ef58UptZE3aEqQ2I+onJb","utils",void 0);t("utils",{clone(t){if(null===t||"object"!=typeof t)return t;let r={};t.constructor===Array&&(r=[]);for(let e in t)t.hasOwnProperty(e)&&(r[e]=this.clone(t[e]));return r},objectToArray(t){let r=[];for(let e in t)t.hasOwnProperty(e)&&r.push(t[e]);return r},arrayToObject(t,r){let e={};for(var n in t)t.hasOwnProperty(n)&&t[n][r]&&(e[t[n][r]]=t[n]);return e},getWeightRandIndex(t,r){let e=Math.floor(Math.random()*r),n=0;for(var o=0;o<t.length&&(n+=t[o],!(e<n));o++);return o},getRandomNFromM(t,r){let e=[],n=0,o=0;for(;o<r&&!(o>=t+1);){n=this.getRandomInt(0,t);for(var a=0,f=0;f<o;f++)if(e[f]===n){a=1;break}0===a&&(e[o]=n,o++)}return e},getRandomInt(t,r){let e=Math.random()*(r-t+1)+t;return Math.floor(e)},getStringLength(t){let r=t,e=0;for(let t=0,n=r.length;t<n;t++){e+=r.charCodeAt(t)<=255?1:2}return Math.ceil(e/2)},isEmptyObject(t){let r=!0;if(t&&t.constructor===Object){for(var e in t)if(t.hasOwnProperty(e)){r=!1;break}}else r=!1;return r},isNewDay(t){var r=new Date(t),e=new Date,n=r.getYear(),o=r.getMonth(),a=r.getDate(),f=e.getYear(),u=e.getMonth(),i=e.getDate();return f>n||(u>o||i>a)},getPropertyCount(t){var r,e=0;for(r in t)t.hasOwnProperty(r)&&e++;return e},difference(t,r){let e=[];if(t.constructor!==Array||r.constructor!==Array)return e;let n=t.length;for(let o=0;o<n;o++)-1===r.indexOf(t[o])&&e.push(t[o]);return e},base64encode:function(t){var r,e,n,o,a,f,u,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",h=0;for(t=this.utf8Encode(t);h<t.length;)o=(r=t.charCodeAt(h++))>>2,a=(3&r)<<4|(e=t.charCodeAt(h++))>>4,f=(15&e)<<2|(n=t.charCodeAt(h++))>>6,u=63&n,isNaN(e)?f=u=64:isNaN(n)&&(u=64),c=c+i.charAt(o)+i.charAt(a)+i.charAt(f)+i.charAt(u);return c},utf8Encode:function(t){t=t.replace(/\r\n/g,"\n");for(var r="",e=0;e<t.length;e++){var n=t.charCodeAt(e);n<128?r+=String.fromCharCode(n):n>127&&n<2048?(r+=String.fromCharCode(n>>6|192),r+=String.fromCharCode(63&n|128)):(r+=String.fromCharCode(n>>12|224),r+=String.fromCharCode(n>>6&63|128),r+=String.fromCharCode(63&n|128))}return r},base64Decode:function(t){var r,e,n,o,a,f,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)r=u.indexOf(t.charAt(c++))<<2|(o=u.indexOf(t.charAt(c++)))>>4,e=(15&o)<<4|(a=u.indexOf(t.charAt(c++)))>>2,n=(3&a)<<6|(f=u.indexOf(t.charAt(c++))),i+=String.fromCharCode(r),64!=a&&(i+=String.fromCharCode(e)),64!=f&&(i+=String.fromCharCode(n));return i=this.utf8Decode(i)},utf8Decode:function(t){for(var r="",e=0,n=0,o=0,a=0;e<t.length;)(n=t.charCodeAt(e))<128?(r+=String.fromCharCode(n),e++):n>191&&n<224?(o=t.charCodeAt(e+1),r+=String.fromCharCode((31&n)<<6|63&o),e+=2):(o=t.charCodeAt(e+1),a=t.charCodeAt(e+2),r+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),e+=3);return r},stringToArray:function(t){var r,e="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+e+"]"),a="\\ud83c[\\udffb-\\udfff]",f="[\\ufe0e\\ufe0f]?",u="["+n+"]",i="(?:"+u+"|"+a+")"+"?",c="[\\ud800-\\udfff]",h="[^\\ud800-\\udfff]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",d=f+i+("(?:\\u200d(?:"+[h,l,g].join("|")+")"+f+i+")*"),s="(?:"+[h+u+"?",u,l,g,c].join("|")+")",m=RegExp(a+"(?="+a+")|"+s+d,"g");return r=t,o.test(r)?function(t){return t.match(m)||[]}(t):function(t){return t.split("")}(t)},simulationUUID:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},trim:function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},isNowValid:function(t,r){var e=new Date(t),n=new Date(r),o=!1;if(e.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var a=new Date;o=a<n&&a>e}return o},getDeltaDays:function(t,r){t=new Date(t),r=new Date(r);var e=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),a=r.getFullYear(),f=r.getMonth()+1,u=r.getDate();t=new Date(e+"/"+n+"/"+o+" GMT+0800").getTime();var i=(r=new Date(a+"/"+f+"/"+u+" GMT+0800").getTime())-t;return Math.floor(i/864e5)},getMin:function(t){var r=null;if(t.constructor===Array)for(var e=t.length,n=0;n<e;n++)r=0===n?Number(t[0]):r>Number(t[n])?Number(t[n]):r;return r},formatTwoDigits:t=>(Array(2).join(0)+t).slice(-2),getDay:function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},formatName:function(t,r){r=r||6;var e=this.stringToArray(t),n="";if(e.length>r){for(var o=0;o<r;o++)n+=e[o];n+="..."}else n=t;return n},formatMoney:function(t){for(var r=["","K","M","G","T","P","E","Z","Y","B","N","D"],e="",n=0;n<r.length;n++){if(!(t>=1e4)){e=Math.floor(t)+r[n];break}t/=1e3}return""===e&&(e=Math.floor(t)+"U"),e},formatTimeForSecond(t){var r="",e=t%60,n=Math.floor(t/60);n=n<0?0:n;var o=Math.floor(n/60),a=n%60;return o>0&&(r+=o>9?o.toString():"0"+o,r+=":"),r+=a>9?a.toString():"0"+a,r+=":",r+=e>9?e.toString():"0"+e},formatTimeForMillisecond(t){let r=Math.floor(t/1e3%60),e=Math.floor(t/1e3/60%60);return`${Math.floor(t/1e3/60/60)}:${e}:${r}`},encrypt(t){let r=this.base64encode(t),e=6;r.length%2==0&&(e=7);let n="";for(let t=0;t<(r.length-e+1)/2;t++)n+=r[2*t+1],n+=r[2*t];return n+=r.slice(r.length-e+1),n},decrypt(t){let r=6;t.length%2==0&&(r=7);let e="";for(var n=0;n<t.length-r;n+=2)e+=t[n+1],e+=t[n];return e+=t.slice(t.length-r+1),e=this.base64Decode(e),e}});r._RF.pop()}}}));

System.register("chunks:///_virtual/levelUI.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./sceneManager.ts","./playerData.ts","./uiManager.ts","./LanguageData.ts"],(function(e){"use strict";var t,i,n,s,a,l,r,o,c,u,v,h,p,f,L,b;return{setters:[function(e){t=e.cclegacy,i=e.Node,n=e.Label,s=e.Animation,a=e.Sprite,l=e._decorator,r=e.Component},function(e){o=e.applyDecoratedDescriptor,c=e.initializerDefineProperty,u=e.defineProperty},function(e){v=e.resourceUtil},function(e){h=e.constants},function(e){p=e.SceneManager},function(e){f=e.playerData},function(e){L=e.uiManager},function(e){b=e.t}],execute:function(){var d,S,g,y,E,I,P,T,N,_,m,D,A,U,C,w,z,F,V;t._RF.push({},"09faeI+TthOKbk54kKEeYOU","levelUI",void 0);const{ccclass:k,property:M}=l;e("LevelUI",(d=k("LevelUI"),S=M(i),g=M(i),y=M(i),E=M(i),I=M(n),P=M(s),T=M(a),N=M(i),d((D=o((m=class extends r{constructor(...e){super(...e),c(this,"nStars",D,this),c(this,"nCurrentLevel",A,this),c(this,"nLevelNotPassed",U,this),c(this,"nLevelPassed",C,this),c(this,"lbLevel",w,this),c(this,"aniTips",z,this),c(this,"spAvatar",F,this),c(this,"arrStarNode",V,this),u(this,"levelInfo",void 0),u(this,"updateInterval",void 0),u(this,"lastPositionY",void 0),u(this,"pool",void 0),u(this,"pool1",void 0)}onLoad(){this.aniTips.once(s.EventType.FINISHED,this.onAniTipsFinished,this)}onDisable(){this.aniTips.once(s.EventType.FINISHED,this.onAniTipsFinished,this)}onAniTipsFinished(){this.aniTips.play("pveLevelTipsIdle")}init(e){this.levelInfo=e,this.setLevelNum(e.name),this.setLevelStatus(e.status),this.setStars(e.star),f.instance.playerInfo.avatarUrl&&v.setAvatar(f.instance.playerInfo.avatarUrl,this.spAvatar,(()=>{}))}setLevelNum(e){this.lbLevel.string=e}setLevelStatus(e){e===h.PVE_LEVEL_STATUS.DONE?(this.nCurrentLevel.active=!1,this.nLevelNotPassed.active=!1,this.nLevelPassed.active=!0):e===h.PVE_LEVEL_STATUS.DOING?(this.nCurrentLevel.active=!0,this.nLevelNotPassed.active=!1,this.nLevelPassed.active=!1):(this.nCurrentLevel.active=!1,this.nLevelNotPassed.active=!0,this.nLevelPassed.active=!1)}setStars(e){if(e){this.nStars.active=!0;for(let t=0;t<h.MAX_GRADE_OF_EACH_PVE_LEVEL;t++){let i=!1;t<=e-1&&(i=!0),this.arrStarNode[t].active=i}}else this.nStars.active=!1}onBtnLevelChallenge(){this.levelInfo.status!==h.PVE_LEVEL_STATUS.UNDONE?L.instance.showDialog("pve/levelPanel",[this.levelInfo,this.levelCallback]):L.instance.showTips(b("pve.cannotSkipLastLevel"))}levelCallback(){try{f.instance.level=this.levelInfo.ID,p.instance.loadScene("fight",[function(e){e()}],((e,t)=>{e&&console.error(e.message||e)}))}catch(e){console.log("levelCallback.error",e)}}}).prototype,"nStars",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=o(m.prototype,"nCurrentLevel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=o(m.prototype,"nLevelNotPassed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=o(m.prototype,"nLevelPassed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=o(m.prototype,"lbLevel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=o(m.prototype,"aniTips",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=o(m.prototype,"spAvatar",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=o(m.prototype,"arrStarNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=m))||_));t._RF.pop()}}}));

System.register("chunks:///_virtual/fightGuide.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./animationUI.ts","./SDK.ts"],(function(t){"use strict";var e,o,i,s,n,c;return{setters:[function(t){e=t.cclegacy,o=t._decorator,i=t.Component},function(t){s=t.defineProperty},function(t){n=t.AnimationUI},function(t){c=t.default}],execute:function(){var r;e._RF.push({},"0c335oC9Y9Fc5YWelPxejg7","fightGuide",void 0);const{ccclass:u}=o;t("FightGuide",u("FightGuide")(r=class extends i{constructor(...t){super(...t),s(this,"startTime",void 0),s(this,"closeCb",void 0)}show(t){c.onEvent("tutorial_begin","",""),this.startTime=Date.now(),this.closeCb=t}onBtnCloseClick(){let t=this.node.getComponent(n);t?t.close((()=>{this.node&&this.node.destroy()})):this.node&&this.node.destroy(),this.closeCb&&this.closeCb(),c.onEvent("tutorial_end","","")}})||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/fightNum.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var i,e,n,r,o,u;return{setters:[function(t){i=t.cclegacy,e=t._decorator,n=t.Component,r=t.Animation},function(t){o=t.applyDecoratedDescriptor,u=t.initializerDefineProperty}],execute:function(){var l,s,a,c,f,h;i._RF.push({},"0e8531febFP+ojrUxtAih7t","fightNum",void 0);const{ccclass:p,property:b}=e;t("FightNum",p("FightNum")((a=o((s=class extends n{constructor(...t){super(...t),u(this,"lbNum",a,this),u(this,"ani",c,this),u(this,"font1",f,this),u(this,"font2",h,this)}show(t,i){this.lbNum.string=t;let e=1;t<=50?this.lbNum.font=this.font1:(this.lbNum.font=this.font2,e=1.2),this.node.setScale(e,e,e),this.ani.once(r.EventType.FINISHED,i),this.ani.play("fightNum")}}).prototype,"lbNum",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=o(s.prototype,"ani",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=o(s.prototype,"font1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=o(s.prototype,"font2",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=s))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/localConfig.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./csvManager.ts"],(function(t){"use strict";var e,n,a,r,s,i;return{setters:[function(t){e=t.cclegacy,n=t._decorator,a=t.resources},function(t){r=t.defineProperty},function(t){s=t.resourceUtil},function(t){i=t.CSVManager}],execute:function(){var c,l,o;e._RF.push({},"12facSZhFRGIYa7yxiLVDOp","localConfig",void 0);const{ccclass:u,property:h}=n;t("localConfig",u("localConfig")((o=l=class t{constructor(){r(this,"_csvManager",new i),r(this,"_callback",new Function),r(this,"_currentLoad",0),r(this,"_cntLoad",0)}static get instance(){return this._instance||(this._instance=new t),this._instance}loadConfig(t){this._callback=t,this._loadCSV()}_loadCSV(){a.loadDir("datas",((t,e)=>{if(t)return;let n=e.filter((t=>".md"!==t._native));this._cntLoad=n.length,n.length?n.forEach(((t,e,n)=>{s.getTextData(t.name,((e,n)=>{this._csvManager.addTable(t.name,n),this._tryToCallbackOnFinished()}))})):this._tryToCallbackOnFinished()}))}queryOne(t,e,n){return this._csvManager.queryOne(t,e,n)}queryByID(t,e){return this._csvManager.queryByID(t,e)}getTable(t){return this._csvManager.getTable(t)}getTableArr(t){return this._csvManager.getTableArr(t)}queryAll(t,e,n){return this._csvManager.queryAll(t,e,n)}queryIn(t,e,n){return this._csvManager.queryIn(t,e,n)}queryByCondition(t,e){return this._csvManager.queryByCondition(t,e)}_tryToCallbackOnFinished(){this._callback&&(this._currentLoad++,this._currentLoad>=this._cntLoad&&this._callback())}},r(l,"_instance",void 0),c=o))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/SDK.ts",["cc"],(function(o){"use strict";var t,l;return{setters:[function(o){t=o.sys,l=o.cclegacy}],execute:function(){l._RF.push({},"18cb5saxs1E4Yi8Y3EtEz5t","SDK",void 0);o("default",class{static showBanner(){console.log("showBanner"),t.platform===t.Platform.ANDROID&&(console.log("-------showBanner-------"),jsb.reflection.callStaticMethod("com/sdk/TTSDK","showBannerAd","()V"))}static hideBanner(){console.log("hideBanner"),t.platform===t.Platform.ANDROID&&(console.log("-------hideBanner-------"),jsb.reflection.callStaticMethod("com/sdk/TTSDK","hideBannerAd","()V"))}static showRewardVideoAD(o){console.log("播放激励视频"),t.platform===t.Platform.ANDROID?(window.videoAdCallback=o,jsb.reflection.callStaticMethod("com/sdk/TTSDK","showRewardAd","()V")):t.platform===t.Platform.DESKTOP_BROWSER&&(console.log("-------本地测试-------"),o&&o())}static showInterstitialAd(o){console.log("展示插屏广告"),t.platform===t.Platform.ANDROID?(window.videoAdCallback=o,console.log("-------showInterstitialAd-------"),jsb.reflection.callStaticMethod("com/sdk/TTSDK","showInterstitialAd","()V")):t.platform===t.Platform.DESKTOP_BROWSER&&(console.log("-------本地测试-------"),o&&o())}static showFloatAd(o){console.log("展示浮动广告"),t.platform===t.Platform.ANDROID&&(window.videoAdCallback=o,jsb.reflection.callStaticMethod("com/sdk/TTSDK","showFloatAd","()V"))}static hideFloatAd(){console.log("隐藏浮动广告"),t.platform===t.Platform.ANDROID&&jsb.reflection.callStaticMethod("com/sdk/TTSDK","hideFloatAd","()V")}static showNativeAd(){console.log("展示原生广告")}static onEvent(o,l,a){t.platform===t.Platform.ANDROID&&jsb.reflection.callStaticMethod("com/sdk/TTSDK","onEvent","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",o,l,a)}}),l._RF.pop()}}}));

System.register("chunks:///_virtual/sceneManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./clientEvent.ts","./loadingUI.ts"],(function(n){"use strict";var e,t,a,i,o,c,l,s,r,d,u,g;return{setters:[function(n){e=n.cclegacy,t=n._decorator,a=n.Component,i=n.director,o=n.game,c=n.find,l=n.instantiate},function(n){s=n.defineProperty},function(n){r=n.resourceUtil},function(n){d=n.constants},function(n){u=n.clientEvent},function(n){g=n.LoadingUI}],execute:function(){var h,p,S;e._RF.push({},"1c9f2SaApBI24JPUfdbbqk8","sceneManager",void 0);const{ccclass:f}=t;n("SceneManager",f("SceneManager")((S=p=class n extends a{constructor(...n){super(...n),s(this,"curLoadingScene",null),s(this,"callback",null),s(this,"loading",null),s(this,"tasks",null),s(this,"isStop",!1)}static get instance(){return this._instance||(this._instance=new n),this._instance}loadScene(n,e,t){this.curLoadingScene=n,this.callback=t;var a=d.SCENE_MANAGER_TYPE.LOAD_SCENE,c=this;e.push(this.preloadScene.bind(this));var l=i.getScene();this.initLoadingUI(l,"loading",(function(){c.loading.getComponent(g).startLoading(a,e,(function(e,t){if(e)return console.error(e.message||e),void c.callback.apply(null,[e].concat(t));try{i.loadScene(c.curLoadingScene,(function(){c.callback.apply(null,[null].concat(null)),o.removePersistRootNode(c.loading),c.loading.removeFromParent(),u.dispatchEvent("onSceneChanged")}))}catch(e){console.log("loadScene",n,e)}}))}))}preloadScene(){var n=arguments;i.preloadScene(this.curLoadingScene,(function(){n[n.length-1].apply(null,Array.prototype.slice.call(n,1))}))}load(n,e){this.callback=e,this.tasks=n;var t=this,a=d.SCENE_MANAGER_TYPE.LOAD,i=c("Canvas");this.initLoadingUI(i,"loading",(function(){t.loading.setPosition(0,0),t.loading.getComponent(g).startLoading(a,t.tasks,(function(n,e){if(n)return console.error(n.message||n),void t.callback.apply(null,[n].concat(e));t.callback.apply(null,[null].concat(null))}))}))}initLoadingUI(n,e,t){var a=this;r.getUIPrefabRes("loading/"+e,(function(e,i){a.loading&&"loading"===a.loading.name||(delete a.loading,a.loading=l(i),a.loading.active=!1,n.addChild(a.loading,999)),t()}))}enterSceneByAnimation(n,e,t,a){this.curLoadingScene=e,this.callback=a;var o=this;t.push(this.preloadScene.bind(this));var c=i.getScene();this.initLoadingUI(c,n,(function(){o.loading.getComponent("loadingCloudUI").startLoading(!1,t,(function(n,e){if(n)return console.error(n.message||n),void o.callback.apply(null,[n].concat(e));i.preloadScene(o.curLoadingScene,(function(){i.loadScene(o.curLoadingScene,(function(){o.loading.getComponent("loadingCloudUI").endLoading(!0),o.callback.apply(null,[null].concat(null)),u.dispatchEvent("onSceneChanged")}))}))}))}))}discontinue(){this.loading&&this.loading.destroy()}},s(p,"_instance",void 0),h=S))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/buy.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./clientEvent.ts","./utils.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./LanguageData.ts","./gameLogic.ts"],(function(t){"use strict";var e,i,n,o,r,s,l,u,a,c,p,h,d,b,y,f,m;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Component,o=t.Color,r=t.Animation},function(t){s=t.applyDecoratedDescriptor,l=t.initializerDefineProperty,u=t.defineProperty},function(t){a=t.resourceUtil},function(t){c=t.constants},function(t){p=t.clientEvent},function(t){h=t.utils},function(t){d=t.localConfig},function(t){b=t.playerData},function(t){y=t.uiManager},function(t){f=t.t},function(t){m=t.GameLogic}],execute:function(){var g,B,I,P,w,E,N,T,A,v,D,_,R,G,z;e._RF.push({},"1f6e9kNl7VAkLVmkwCJLBL2","buy",void 0);const{ccclass:S,property:C}=i;t("Buy",S("Buy")((I=s((B=class extends n{constructor(...t){super(...t),l(this,"lbTitle",I,this),l(this,"lbNum",P,this),l(this,"lbDesc",w,this),l(this,"lbGold",E,this),l(this,"lbGoldNum",N,this),l(this,"lbAd",T,this),l(this,"spProp",A,this),l(this,"spAdIcon",v,this),l(this,"btnBuy",D,this),l(this,"nodeBtnBuy",_,this),l(this,"nodeBtnAd",R,this),l(this,"imgShare",G,this),l(this,"imgAd",z,this),u(this,"propId",void 0),u(this,"eventType",void 0),u(this,"countPerBuy",void 0),u(this,"propNum",void 0),u(this,"cost",void 0),u(this,"getPropType",void 0)}onEnable(){p.on("updateGold",this.updateGold,this),p.on("updateInfiniteShareTimes",this.updateBuyBtn,this)}onDisable(){p.off("updateGold",this.updateGold,this),p.off("updateInfiniteShareTimes",this.updateBuyBtn,this)}showBuy(t){this.nodeBtnBuy.active=t,this.nodeBtnAd.active=!t}show(t,e){this.propId=t,this.eventType=e;let i=d.instance.queryByID("prop",t);if(!i)return console.error("prop was error!",t),void this.close();this.countPerBuy=i.countPerBuy,this.lbTitle.string=f("table_prop."+i.name),this.propNum=i.countPerBuy,this.lbNum.string="X "+this.propNum,this.lbDesc.string=f("table_prop."+i.desc),this.cost=i.countPerBuy*i.price,this.lbGold.string=this.cost,this.cost>b.instance.getGold()?(this.btnBuy.interactable=!1,this.lbGold.color=o.RED):(this.btnBuy.interactable=!0,this.lbGold.color=o.WHITE),a.setPropIcon(i.icon,this.spProp,(()=>{}));let n=this.node.getComponent(r);n.once(r.EventType.FINISHED,(()=>{n.play("buy")})),this.updateGold(),this.updateBuyBtn()}updateBuyBtn(){this.propId===c.PROP_ID.INFINITE?(this.showBuy(!1),m.instance.getOpenRewardType(c.SHARE_FUNCTION.BUY_INFINITE,((t,e)=>{switch(this.getPropType=e,e){case c.OPEN_REWARD_TYPE.AD:this.spAdIcon.spriteFrame=this.imgAd;break;case c.OPEN_REWARD_TYPE.SHARE:this.spAdIcon.spriteFrame=this.imgShare;break;case c.OPEN_REWARD_TYPE.NULL:this.showBuy(!0)}b.instance.getInfiniteTimes()>=c.MAX_INFINITE_TIMES?this.spAdIcon.node.active=!1:this.spAdIcon.node.active=!0}))):this.showBuy(!0)}onBtnCloseClick(){this.close()}onBtnBuyClick(){m.instance.addGold(-this.cost),p.dispatchEvent("updateInfiniteShareTimes"),this.rewardProp(),this.close()}rewardProp(){let t={};t.itemType=c.REWARD_TYPE.PROP,t.itemSubType=this.propId,t.itemAmount=this.countPerBuy,y.instance.showDialog("lottery/reward",[t,!1,c.SHARE_FUNCTION.BUY_INFINITE])}onBtnReceiveClick(){this.propId===c.PROP_ID.INFINITE&&m.instance.showRewardAd((()=>{p.dispatchEvent("updateInfiniteShareTimes"),this.rewardProp(),this.close()}))}close(){y.instance.hideDialog("props/buy")}updateGold(){this.lbGoldNum.string=h.formatMoney(b.instance.getGold())}}).prototype,"lbTitle",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=s(B.prototype,"lbNum",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=s(B.prototype,"lbDesc",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=s(B.prototype,"lbGold",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=s(B.prototype,"lbGoldNum",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=s(B.prototype,"lbAd",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=s(B.prototype,"spProp",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=s(B.prototype,"spAdIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=s(B.prototype,"btnBuy",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=s(B.prototype,"nodeBtnBuy",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=s(B.prototype,"nodeBtnAd",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=s(B.prototype,"imgShare",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=s(B.prototype,"imgAd",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=B))||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/balance.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./clientEvent.ts","./sceneManager.ts","./playerData.ts","./uiManager.ts","./audioManager.ts","./LanguageData.ts","./SDK.ts","./gameLogic.ts"],(function(t){"use strict";var e,i,n,a,s,r,l,o,c,u,h,b,d,p,g,v;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Component,a=t.Animation},function(t){s=t.applyDecoratedDescriptor,r=t.initializerDefineProperty,l=t.defineProperty},function(t){o=t.constants},function(t){c=t.clientEvent},function(t){u=t.SceneManager},function(t){h=t.playerData},function(t){b=t.uiManager},function(t){d=t.AudioManager},function(t){p=t.t},function(t){g=t.default},function(t){v=t.GameLogic}],execute:function(){var S,f,A,E,y,L,w,m,D,N,_,R,T,B;e._RF.push({},"22cecTzEh5L6o8yC7/SYP4X","balance",void 0);const{ccclass:I,property:C}=i;t("Balance",I("Balance")((A=s((f=class extends n{constructor(...t){super(...t),r(this,"lbLevel",A,this),r(this,"lbScore",E,this),r(this,"lbHighest",y,this),r(this,"lbGold",L,this),r(this,"arrStar",w,this),r(this,"arrStarLight",m,this),r(this,"ndBtnDouble",D,this),r(this,"spBtnDouble",N,this),r(this,"ani",_,this),r(this,"aniGold",R,this),r(this,"sfAd",T,this),r(this,"sfShare",B,this),l(this,"isFirstInvite",void 0),l(this,"goldNum",void 0),l(this,"isOver",void 0),l(this,"soundStar",void 0),l(this,"openRewardType",void 0)}show(){this.aniGold.node.active=!0,this.isFirstInvite=!1;let t=h.instance.finishLevel(h.instance.level,h.instance.score);h.instance.getCurrentLevel().ID;this.goldNum=t.gold,this.isOver=!1,this.lbGold.string=t.gold.toString(),this.lbLevel.string=t.levelId,this.lbScore.string=t.score,this.lbHighest.string=p("fight.highest")+h.instance.getHighestScoreByLevel(t.levelId),this.soundStar=0;h.instance.arrStars;this.arrStar[0].active=t.star>0,this.arrStarLight[0].active=t.star>0,this.arrStar[1].active=t.star>1,this.arrStarLight[1].active=t.star>1,this.arrStar[2].active=t.star>2,this.arrStarLight[2].active=t.star>2,this.ani.play("balanceShow"),this.ani.once(a.EventType.FINISHED,(()=>{this.ani.play("balanceIdle")}),this),this.goldNum>0?v.instance.getOpenRewardType(o.SHARE_FUNCTION.FILL_SIGN,((t,e)=>{if(t)this.close();else switch(this.openRewardType=e,e){case o.OPEN_REWARD_TYPE.AD:this.ndBtnDouble.active=!0,this.spBtnDouble.spriteFrame=this.sfAd,this.aniGold.play();break;case o.OPEN_REWARD_TYPE.SHARE:this.ndBtnDouble.active=!0,this.aniGold.play(),this.spBtnDouble.spriteFrame=this.sfShare;break;case o.OPEN_REWARD_TYPE.NULL:this.ndBtnDouble.active=!1}})):this.ndBtnDouble.active=!1,h.instance.level<=2&&g.showFloatAd((()=>{}))}onShowStar(){this.arrStar[this.soundStar].active&&d.instance.playSound(o.AUDIO_SOUND.FINISH_STAR,!1),this.soundStar++}onDisable(){}onBtnNextClick(){v.instance.customEventStatistics(o.ANALYTICS_TYPE.BALANCE_NEXT),this.isOver||g.showInterstitialAd((()=>{this.isOver=!0,g.onEvent("level_end",h.instance.level.toString(),"1"),h.instance.nextLevel(),this.close(),c.dispatchEvent("newLevel")}))}onBtnRetryClick(){this.close(),v.instance.customEventStatistics(o.ANALYTICS_TYPE.BALANCE_PLAY_AGAIN),v.instance.resetLevel()}onBtnCloseClick(){v.instance.customEventStatistics(o.ANALYTICS_TYPE.BALANCE_CLOSE),this.close(),u.instance.loadScene("pve",[],((t,e)=>{t&&console.error(t.message||t)}))}onBtnDoubleClick(){this.openRewardType===o.OPEN_REWARD_TYPE.SHARE?(v.instance.share(o.SHARE_FUNCTION.BALANCE,{},(t=>{t||this.showReward()})),v.instance.customEventStatistics(o.ANALYTICS_TYPE.BALANCE_SHARE)):v.instance.showRewardAd((t=>{t||this.showReward()}))}showReward(){if(!this.isFirstInvite){this.isFirstInvite=!0;let t={};t.itemType=o.REWARD_TYPE.GOLD,t.itemSubType=0,t.itemAmount=this.goldNum,this.aniGold.node.active=!1,b.instance.showDialog("lottery/reward",[t,!1,o.SHARE_FUNCTION.BALANCE])}}close(){b.instance.hideDialog("fight/balance"),g.hideFloatAd()}}).prototype,"lbLevel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=s(f.prototype,"lbScore",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=s(f.prototype,"lbHighest",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=s(f.prototype,"lbGold",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=s(f.prototype,"arrStar",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=s(f.prototype,"arrStarLight",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=s(f.prototype,"ndBtnDouble",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=s(f.prototype,"spBtnDouble",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=s(f.prototype,"ani",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=s(f.prototype,"aniGold",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=s(f.prototype,"sfAd",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=s(f.prototype,"sfShare",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=f))||S);e._RF.pop()}}}));

System.register("chunks:///_virtual/linkLine.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(n){"use strict";var e,i,t,o,a,r,s,c;return{setters:[function(n){e=n.cclegacy,i=n._decorator,t=n.Component,o=n.Animation,a=n.Vec3,r=n.misc},function(n){s=n.applyDecoratedDescriptor,c=n.initializerDefineProperty}],execute:function(){var l,u,p;e._RF.push({},"23fc7Zdwd5LN4VPatBdx7mq","linkLine",void 0);const{ccclass:h,property:m}=i;n("LinkLine",h("LinkLine")((p=s((u=class extends t{constructor(...n){super(...n),c(this,"animation",p,this)}show(){this.animation.play("linkLineShow"),this.animation.once(o.EventType.FINISHED,(()=>{this.animation.play("linkLineNormal")}))}setLinePosition(n,e){let i=e.clone().subtract(n),t=new a(n.x+i.x/2,n.y+i.y/2,0);this.node.position=t;let o=0;o=0!==i.x?r.radiansToDegrees(Math.atan(i.y/i.x)):90,this.node.eulerAngles=new a(0,0,o)}}).prototype,"animation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=u))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/showTarget.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./clientEvent.ts","./playerData.ts","./showTargetCake.ts"],(function(t){"use strict";var e,r,n,i,a,o,s,c,p,l,h;return{setters:[function(t){e=t.cclegacy,r=t._decorator,n=t.Component,i=t.Animation,a=t.instantiate},function(t){o=t.applyDecoratedDescriptor,s=t.initializerDefineProperty,c=t.defineProperty},function(t){p=t.clientEvent},function(t){l=t.playerData},function(t){h=t.ShowTargetCake}],execute:function(){var u,g,f,T,d;e._RF.push({},"2c1036ANX5HcIKmghpPMpLE","showTarget",void 0);const{ccclass:y,property:w}=r;t("ShowTarget",y("ShowTarget")((f=o((g=class extends n{constructor(...t){super(...t),s(this,"pfCake",f,this),s(this,"nodeTargetGroup",T,this),s(this,"aniTarget",d,this),c(this,"_parent",void 0)}show(t,e){this._parent=t,this.aniTarget.play("showTarget"),this.aniTarget.once(i.EventType.FINISHED,(()=>{this.node&&this.node.destroy(),e&&e()}),this);for(let t in l.instance.dictTargets){let e=a(this.pfCake);e.parent=this.nodeTargetGroup,e.getComponent(h).show(t,this)}}showFlyEffect(t,e){let r=this._parent.getTargetWorldPos(t);r?this._parent._fightScene.effectGroup.playTargetCakeFlyEffect(t,e,r,(()=>{p.dispatchEvent("showTargetCake",t)})):p.dispatchEvent("showTargetCake",t)}}).prototype,"pfCake",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=o(g.prototype,"nodeTargetGroup",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=o(g.prototype,"aniTarget",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=g))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/signinReward.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./clientEvent.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./LanguageData.ts","./gameLogic.ts"],(function(e){"use strict";var t,i,n,s,a,r,o,c,l,u,h,p,d,m,R,g,I,f,b;return{setters:[function(e){t=e.cclegacy,i=e.SpriteFrame,n=e.Sprite,s=e.Label,a=e.Animation,r=e._decorator,o=e.Component,c=e.UITransform},function(e){l=e.applyDecoratedDescriptor,u=e.initializerDefineProperty,h=e.defineProperty},function(e){p=e.resourceUtil},function(e){d=e.constants},function(e){m=e.clientEvent},function(e){R=e.localConfig},function(e){g=e.playerData},function(e){I=e.uiManager},function(e){f=e.t},function(e){b=e.GameLogic}],execute:function(){var D,y,w,E,A,P,T,v,_,S,L,G,O;t._RF.push({},"332caaRRoVO04/rOFgXW9L6","signinReward",void 0);const{ccclass:k,property:F}=r;e("signInReward",(D=k("signInReward"),y=F(i),w=F(i),E=F(n),A=F(s),P=F(a),D((_=l((v=class extends o{constructor(...e){super(...e),u(this,"sfDiamond",_,this),u(this,"sfGold",S,this),u(this,"spIcon",L,this),u(this,"lbRewardValue",G,this),u(this,"aniGetItem",O,this),h(this,"itemInfo",void 0),h(this,"currentDay",void 0),h(this,"callback",void 0),h(this,"isLast",void 0),h(this,"itemType",void 0),h(this,"itemAmount",void 0),h(this,"itemSubType",void 0)}show(e,t,i){this.itemInfo=e,this.currentDay=e.ID,this.callback=t,this.isLast=i,this.itemType=e.itemType,this.itemAmount=e.itemAmount,this.itemSubType=e.itemSubType,this.aniGetItem.play("getItemShow"),this.aniGetItem.once(a.EventType.FINISHED,(()=>{this.aniGetItem.play("getItemIdle")}),this),this.setRewardPage()}setRewardPage(){const e=this.spIcon.getComponent(c);switch(this.itemType){case d.REWARD_TYPE.DIAMOND:this.spIcon.spriteFrame=this.sfDiamond,this.lbRewardValue.string=this.itemAmount;break;case d.REWARD_TYPE.GOLD:this.spIcon.spriteFrame=this.sfGold,this.lbRewardValue.string=this.itemAmount,e.width=257,e.height=166;break;case d.REWARD_TYPE.PROP:let t=this.itemSubType,i=R.instance.queryByID("prop",t+"");p.setPropIcon("00"+t,this.spIcon,(()=>{})),e.width=168,e.height=168;let n=f("table_prop."+i.name);this.lbRewardValue.string=n+f("")+" x "+this.itemAmount}}onBtnReceiveClick(){if(this.addReward(),this.isLast){let e=null;b.instance.getOpenRewardType(d.SHARE_FUNCTION.FILL_SIGN,((t,i)=>{if(t)e=g.instance.getSignInReceivedInfo().isAllReceived;else switch(i){case d.OPEN_REWARD_TYPE.AD:case d.OPEN_REWARD_TYPE.SHARE:e=g.instance.getSignInReceivedInfo().isAllReceived;break;case d.OPEN_REWARD_TYPE.NULL:e=g.instance.getSignInReceivedInfo().isTodayReceived}})),e?I.instance.hideDialog("signIn/signInReward"):I.instance.showDialog("signIn/signIn")}I.instance.shiftFromPopupSeq("signIn/signInReward")}addReward(){switch(this.itemType){case d.REWARD_TYPE.DIAMOND:b.instance.addDiamond(this.itemAmount);break;case d.REWARD_TYPE.GOLD:b.instance.addGold(this.itemAmount);break;case d.REWARD_TYPE.PROP:b.instance.addProp(this.itemSubType,this.itemAmount)}this.currentDay&&(g.instance.updateSignInReceivedDays(this.currentDay),m.dispatchEvent("updateSignIn")),this.callback&&this.callback()}}).prototype,"sfDiamond",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=l(v.prototype,"sfGold",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=l(v.prototype,"spIcon",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=l(v.prototype,"lbRewardValue",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=l(v.prototype,"aniGetItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=v))||T));t._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedMaterial.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./LanguageData.ts"],(function(e){"use strict";var t,i,a,r,n,l,s,o,c,u,h;return{setters:[function(e){t=e.cclegacy,i=e.Material,a=e._decorator,r=e.Component,n=e.MeshRenderer},function(e){l=e.applyDecoratedDescriptor,s=e.initializerDefineProperty,o=e.defineProperty},function(e){c=e.ready,u=e.init,h=e._language}],execute:function(){var p,d,g,m,f,L,y,M,z,b,v;t._RF.push({},"35069qDXPFL47Ep1p+WLvRd","LocalizedMaterial",void 0);const{ccclass:R,property:_,executeInEditMode:D}=a;let P=(p=R("LocalizedMaterialItem"),d=_({type:i}),p((f=l((m=class{constructor(){s(this,"language",f,this),s(this,"material",L,this)}}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),L=l(m.prototype,"material",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g);e("LocalizedMaterial",(y=R("LocalizedMaterial"),M=_({type:P}),y(z=D((v=l((b=class extends r{constructor(...e){super(...e),o(this,"mesh",null),s(this,"materialsList",v,this)}onLoad(){c||u("zh"),this.fetchRender()}fetchRender(){let e=this.getComponent(n);if(e)return this.mesh=e,void this.updateMat()}updateMat(){for(let e=0;e<this.materialsList.length;e++){const t=this.materialsList[e];t.language===h&&this.mesh&&this.mesh.setMaterial(t.material,0)}}}).prototype,"materialsList",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=b))||z)||z));t._RF.pop()}}}));

System.register("chunks:///_virtual/multiScrollView.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./utils.ts","./localConfig.ts","./playerData.ts","./loadsh.ts","./pveSlotUI.ts"],(function(t){"use strict";var e,i,o,s,n,r,h,a,l,d,c,p,u,g,v,f,C,P;return{setters:[function(t){e=t.cclegacy,i=t._decorator,o=t.Component,s=t.NodePool,n=t.instantiate,r=t.UITransform,h=t.Size,a=t.Vec3,l=t.Vec2,d=t.view},function(t){c=t.applyDecoratedDescriptor,p=t.initializerDefineProperty,u=t.defineProperty},function(t){g=t.utils},function(t){v=t.localConfig},function(t){f=t.playerData},function(t){C=t.loadsh},function(t){P=t.PveSlotUI}],execute:function(){var m,w,b,y,N;e._RF.push({},"3e6b57QbUBJ9rTvcQwwnAgL","multiScrollView",void 0);const{ccclass:S,property:z}=i;t("MultiScrollView",S("MultiScrollView")((b=c((w=class extends o{constructor(...t){super(...t),p(this,"scrollView",b,this),p(this,"pve1Prefab",y,this),p(this,"pve2Prefab",N,this),u(this,"updateTimer",void 0),u(this,"updateInterval",void 0),u(this,"lastPositionY",void 0),u(this,"pool",void 0),u(this,"pool1",void 0),u(this,"pool2",void 0),u(this,"contentNode",void 0),u(this,"pve1Node",void 0),u(this,"parent",void 0),u(this,"isChange",void 0),u(this,"arrayPrefab",void 0),u(this,"positions",void 0),u(this,"isNeedScroll",void 0),u(this,"currentPosition",void 0),u(this,"cloudPrefab",void 0),u(this,"positionCloud1",void 0),u(this,"positionCloud2",void 0)}onLoad(){this.updateTimer=0,this.updateInterval=.2,this.lastPositionY=0,this.pool=new s,this.pool1=new s,this.pool2=new s,this.contentNode=this.scrollView.content,this.pve1Node=n(this.pve1Prefab),this.contentNode.addChild(this.pve1Node,999)}start(){this.show()}onEnable(){this.contentNode.on("size-changed",this.sizeChange,this)}onDisable(){this.contentNode.off("size-changed",this.sizeChange,this)}init(t){this.parent=t}show(){this.isChange=!0,this.isNeedScroll=!0,this.positions=[];var t,e=g.objectToArray(v.instance.getTable("level")),i=e.slice(0,1);this.pve1Node.setPosition(0,-100);var o=this.contentNode.getComponent(r);const s=o.contentSize;o.setContentSize(new h(s.width,this.pve1Node.getComponent(r).height+-100)),this.pve1Node.getComponent(P).show(this,i,-1),this.arrayPrefab=C.chunk(C.drop(e,1),22);var n=this.arrayPrefab.length;const c=this.pve2Prefab.data.getComponent(r).height;for(var p=0;p<n;p++)t=s.height,this.positions.push(new a(0,t,0)),o.setContentSize(new h(s.width,t+c));o.setContentSize(new h(s.width,s.height-c/3)),this.addNode();var u=f.instance.getCurrentLevel(),m=C.findIndex(e,(function(t){return t.ID===u.ID}));let w=m/22;this.currentPosition=w>=0?this.positions[Math.floor(w)]:new l(0,0),this.currentPosition=new a(this.currentPosition.x,this.currentPosition.y,0);let b=m%22+1;this.currentPosition.y=this.currentPosition.y+this.pve2Prefab.data.getChildByName("level"+b).y,this.currentPosition.y-=d.getVisibleSize().height/2,this.scrollToNode()}update(t){this.scrolling(),this.updateTimer+=t,this.updateTimer<this.updateInterval||(this.updateTimer=0,this.addNode())}addNode(){if(this.arrayPrefab){for(var t,e=0;e<this.arrayPrefab.length;e++)t=this.pve2Prefab.data.getComponent(r).height,this.updateNode(e,t,this.contentNode,this.pool,this.positions,this.pve2Prefab,this.arrayPrefab);this.isChange=!1}}updateNode(t,e,i,o,s,n,r){var h,a=this.getPositionInView(i,s[t]);if(this.isOverBorder(a,e))(h=i.getChildByName(String(t)))&&this.remove(h,i,o);else if(h=i.getChildByName(String(t))){if(this.isChange){var l=h.getComponent(P);l&&l.show(this,r[t],t),h.setPosition(s[t]),h.tag=t}}else this.create(h,t,i,o,s,n,r)}create(t,e,i,o,s,r,h){(t=o.size()>0?o.get():n(r)).setPosition(s[e]),i.addChild(t),t.setSiblingIndex(0),t.name=String(e);var a=t.getComponent(P);a&&a.show(this,h[e],e)}remove(t,e,i){i.put(t),e.removeChild(t,!1)}getPositionInView(t,e){var i=t.getComponent(r).convertToWorldSpaceAR(e);return this.scrollView.node.getComponent(r).convertToNodeSpaceAR(i)}isOverBorder(t,e){var i=this.scrollView.node.getComponent(r).height,o=i+i/2+e/2;return t.y>o||t.y<-o}onDestory(){this.pool.clear(),this.pool1.clear(),this.pool2.clear()}sizeChange(){var t=this.contentNode.getComponent(r);this.node.getComponent(r).setContentSize(t)}scrollToNode(){this.isNeedScroll&&this.scrollView.scrollTo(new l(0,this.currentPosition.y/(this.scrollView.node.getComponent(r).height-d.getCanvasSize().height)),.1)}scrolling(){var t=this.contentNode.getPosition();this.lastPositionY=t.y}createCloud(){this.positionCloud1=[],this.positionCloud2=[];var t,e=d.getCanvasSize().height,i=this.contentNode.getComponent(r).height,o=Math.ceil(i/e);for(t=0;t<o;t++)this.positionCloud1.push(this.randomPosition());for(t=0;t<o;t++)this.positionCloud2.push(this.randomPosition())}randomPosition(){var t=d.getCanvasSize().height,e=this.scrollView.getMaxScrollOffset().y,i=g.getRandomInt(300,400),o=g.getRandomInt(t/2,e),s=g.getRandomInt(0,1);return new l(s?i:-i,o)}getCloudPrefabMaxHeight(){var t=0;return C.forEach(this.cloudPrefab,(function(e){t<e.data.height&&(t=e.data.height)})),t}}).prototype,"scrollView",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=c(w.prototype,"pve1Prefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=c(w.prototype,"pve2Prefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=w))||m);e._RF.pop()}}}));

System.register("chunks:///_virtual/unLockProp.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./clientEvent.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./LanguageData.ts","./gameLogic.ts","./LocalizedSprite.ts"],(function(t){"use strict";var e,i,n,o,s,r,a,c,l,p,h,u,f,d,b,P;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Component},function(t){o=t.applyDecoratedDescriptor,s=t.initializerDefineProperty,r=t.defineProperty},function(t){a=t.resourceUtil},function(t){c=t.constants},function(t){l=t.clientEvent},function(t){p=t.localConfig},function(t){h=t.playerData},function(t){u=t.uiManager},function(t){f=t._language,d=t.t},function(t){b=t.GameLogic},function(t){P=t.LocalizedSpriteItem}],execute:function(){var g,R,I,m,v,_,E,w,y,U,k,D,L,N;e._RF.push({},"44716UPwaNDPLwthoATscTT","unLockProp",void 0);const{ccclass:S,property:A}=i;t("UnLockProp",(g=S("UnLockProp"),R=A({type:P}),I=A({type:P}),m=A({type:P}),g((E=o((_=class extends n{constructor(...t){super(...t),s(this,"lbNum",E,this),s(this,"lbName",w,this),s(this,"spIcon",y,this),s(this,"spBtnReceive",U,this),s(this,"sfReceive",k,this),s(this,"sfAd",D,this),s(this,"sfShare",L,this),s(this,"ndBtnGoStart",N,this),r(this,"_fightUI",void 0),r(this,"callback",void 0),r(this,"level",void 0),r(this,"unLoclProp",void 0),r(this,"propItem",void 0),r(this,"openRewardType",void 0)}show(t,e){this._fightUI=e,this.callback=t,this.level=h.instance.getCurrentLevelInfo().ID,this.unLoclProp=c.UNLOCK_PROP_ID[this.level-2],this.propItem=p.instance.queryByID("prop",this.unLoclProp),b.instance.getOpenRewardType(c.SHARE_FUNCTION.FIGHT,((t,e)=>{if(t)this.close();else switch(this.openRewardType=e,e){case c.OPEN_REWARD_TYPE.AD:this.UpdateSprite(this.spBtnReceive,this.sfAd);break;case c.OPEN_REWARD_TYPE.SHARE:this.UpdateSprite(this.spBtnReceive,this.sfShare);break;case c.OPEN_REWARD_TYPE.NULL:this.UpdateSprite(this.spBtnReceive,this.sfReceive)}})),this.ndBtnGoStart.active=!1,this.scheduleOnce((()=>{this.ndBtnGoStart.active=!0}),c.NORMAL_SHOW_TIME),this.init()}UpdateSprite(t,e){for(let i=0;i<e.length;i++){const n=e[i];if(n.language===f){t.spriteFrame=n.spriteFrame;break}}}init(){this.lbNum.string=1..toString(),this.lbName.string=d("table_prop."+this.propItem.name),a.setPropIcon(this.propItem.icon,this.spIcon,(()=>{}))}onBtnReceiveClick(){switch(this.openRewardType){case c.OPEN_REWARD_TYPE.AD:b.instance.showRewardAd((t=>{t||(this.showUnlockProp(),b.instance.addProp(this.propItem.ID,1))}));break;case c.OPEN_REWARD_TYPE.SHARE:b.instance.share(c.SHARE_FUNCTION.FIGHT,{},(t=>{t||(this.showUnlockProp(),b.instance.addProp(this.propItem.ID,1))}));break;case c.OPEN_REWARD_TYPE.NULL:this.showUnlockProp(),b.instance.addProp(this.propItem.ID,1)}}showUnlockProp(){this.close(),this._fightUI.showUnlockProp(this.propItem.ID,(()=>{h.instance.updateUnLockInfo(this.propItem.ID),l.dispatchEvent("updateUnlockProp"),this.callback()}))}onBtnCloseClick(){this.close(),this.showUnlockProp()}close(){u.instance.hideDialog("fight/unLockProp")}}).prototype,"lbNum",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=o(_.prototype,"lbName",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=o(_.prototype,"spIcon",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=o(_.prototype,"spBtnReceive",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=o(_.prototype,"sfReceive",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=o(_.prototype,"sfAd",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=o(_.prototype,"sfShare",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=o(_.prototype,"ndBtnGoStart",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=_))||v));e._RF.pop()}}}));

System.register("chunks:///_virtual/shopPropsOperation.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./localConfig.ts","./LanguageData.ts"],(function(t){"use strict";var e,i,r,n,o,s,p,l;return{setters:[function(t){e=t.cclegacy,i=t._decorator,r=t.Component},function(t){n=t.applyDecoratedDescriptor,o=t.initializerDefineProperty,s=t.defineProperty},function(t){p=t.localConfig},function(t){l=t.t}],execute:function(){var a,c,u,h,f,b;e._RF.push({},"4a0f7h1SXdPto0QRIGkEQAJ","shopPropsOperation",void 0);const{ccclass:y,property:g}=i;t("ShopPropsOperation",y("ShopPropsOperation")((u=n((c=class extends r{constructor(...t){super(...t),o(this,"lbTitle",u,this),o(this,"lbDesc",h,this),o(this,"spTip",f,this),o(this,"arrSftip",b,this),s(this,"type",void 0)}show(t){this.node.active=!0,this.type=t,this.refreshUI()}hide(){this.node.active=!1}refreshUI(){let t=p.instance.queryByID("prop",this.type);this.lbTitle.string=l("table_prop."+t.name),this.lbDesc.string=l("table_prop."+t.desc),this.spTip.spriteFrame=this.arrSftip[this.type-1]}}).prototype,"lbTitle",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=n(c.prototype,"lbDesc",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=n(c.prototype,"spTip",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=n(c.prototype,"arrSftip",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=c))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/animationUI.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./clientEvent.ts","./loadsh.ts"],(function(i){"use strict";var t,n,e,a,s,o,l,r,m,h;return{setters:[function(i){t=i.cclegacy,n=i._decorator,e=i.Component,a=i.Animation,s=i.AnimationClip},function(i){o=i.applyDecoratedDescriptor,l=i.initializerDefineProperty,r=i.defineProperty},function(i){m=i.clientEvent},function(i){h=i.loadsh}],execute:function(){var c,b,p,d,u,A,f,y;t._RF.push({},"4deb69dGUBOpb+oc1zl98nw","animationUI",void 0);const{ccclass:v,property:E}=n;i("AnimationUI",v("AnimationUI")((p=o((b=class extends e{constructor(...i){super(...i),l(this,"isPlayEnableAnimation",p,this),l(this,"enableAnimationName",d,this),l(this,"isPlayDisableAnimation",u,this),l(this,"disableAnimationName",A,this),l(this,"disableAnimationReverse",f,this),l(this,"disableAnimationSpeed",y,this),r(this,"animation",void 0),r(this,"clips",void 0),r(this,"disableAnimationWrapMode",void 0),r(this,"disableAnimationDefaultSpeed",void 0),r(this,"closeCallback",void 0)}onLoad(){if(this.animation=this.node.getComponent(a),this.animation){this.clips=this.animation.clips;var i=this.isAnimationExist(this.disableAnimationName);i&&(this.disableAnimationWrapMode=s.WrapMode.Default,this.disableAnimationDefaultSpeed=i.speed)}}onEnable(){this.animation&&this.isPlayEnableAnimation&&this.isAnimationExist(this.enableAnimationName)&&(this.animation.getState(this.enableAnimationName).wrapMode=s.WrapMode.Default,this.animation.play(this.enableAnimationName))}close(i){if(this.closeCallback=i,this.animation){var t=this.isAnimationExist(this.disableAnimationName);this.isPlayDisableAnimation&&t?(this.animation.once(a.EventType.FINISHED,this.closeFinish,this),this.animation.play(this.disableAnimationName),this.disableAnimationReverse&&(this.animation.getState(this.disableAnimationName).wrapMode=s.WrapMode.Reverse)):this.closeFinish()}else this.closeFinish()}closeFinish(){this.closeCallback?this.closeCallback():this.node.active=!1}isAnimationExist(i){return h.find(this.clips,(function(t){return t.name===i}))}clickFinish(i){m.dispatchEvent("finishClickAnimation",i)}}).prototype,"isPlayEnableAnimation",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=o(b.prototype,"enableAnimationName",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=o(b.prototype,"isPlayDisableAnimation",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=o(b.prototype,"disableAnimationName",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=o(b.prototype,"disableAnimationReverse",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=o(b.prototype,"disableAnimationSpeed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=b))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/linkContent.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./resourceUtil.ts","./constants.ts","./linkItem.ts","./clientEvent.ts","./playerData.ts","./loadsh.ts","./audioManager.ts","./gameLogic.ts","./linkLine.ts","./fightHandGuide.ts"],(function(e){"use strict";var t,i,n,s,r,o,h,a,c,l,d,C,f,u,p,k,g,L,O,I,S,y,N;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Component,s=e.UITransform,r=e.Node,o=e.Vec3,h=e.Animation,a=e.Prefab,c=e.instantiate},function(e){l=e.applyDecoratedDescriptor,d=e.initializerDefineProperty,C=e.defineProperty},function(e){f=e.poolManager},function(e){u=e.resourceUtil},function(e){p=e.constants},function(e){k=e.LinkItem},function(e){g=e.clientEvent},function(e){L=e.playerData},function(e){O=e.loadsh},function(e){I=e.AudioManager},function(e){S=e.GameLogic},function(e){y=e.LinkLine},function(e){N=e.FightHandGuide}],execute:function(){var T,_,E,m,P,w,U;t._RF.push({},"4f6b3WtEbBAH4oYBaofOW/U","linkContent",void 0);const{ccclass:x,property:v}=i;let B=80,A=80,K=60,G=60;e("LinkContent",x("LinkContent")((E=l((_=class extends n{constructor(...e){super(...e),d(this,"pfCake",E,this),d(this,"pfLine",m,this),d(this,"nodeLineGroup",P,this),d(this,"nodeLinkOverEffect",w,this),d(this,"nodeLinkGroup",U,this),C(this,"lastOperationTime",void 0),C(this,"isShowHandGuide",void 0),C(this,"_fightScene",void 0),C(this,"dictCakes",void 0),C(this,"arrLinks",void 0),C(this,"arrLines",void 0),C(this,"levelInfo",void 0),C(this,"currentCake",void 0),C(this,"currentNode",void 0),C(this,"preNode",void 0),C(this,"clearScore",void 0),C(this,"clearCake",void 0),C(this,"cntTrigger",void 0),C(this,"allTriggerOverCb",void 0),C(this,"currentPropTouchNode",void 0),C(this,"isRefreshing",void 0),C(this,"arrConnected",void 0),C(this,"nodeHand",void 0)}show(e){const t=this.node.getComponent(s);B=t.width/8,A=t.height/8,K=B-25,G=A-25,this.lastOperationTime=0,this.isShowHandGuide=!1,this._fightScene=e,this.dictCakes={},this.arrLinks=[],this.arrLines=[],this.levelInfo=L.instance.getCurrentLevelInfo(),this.initCake()}createCake(e,t,i){let n=f.instance.getNode(this.pfCake,this.nodeLinkGroup);return n.position=this.getScreenPosByIndex(e),n.opacity=255,n.getComponent(k).show(e,t,i,this),this.dictCakes[e]=n,n}initCake(e){let t=this.levelInfo.cakes.split("|");for(let e=0;e<p.LINK_ROWS_COUNT;e++)for(let i=0;i<p.LINK_COLS_COUNT;i++){let n=i+e*p.LINK_COLS_COUNT,s=t[O.random(0,t.length-1)];this.createCake(n,s,!1)}this.showAllLinkItem(!0,(()=>{e&&e(),this.lastOperationTime=0}))}showAllLinkItem(e,t){let i=p.LINK_ROWS_COUNT+p.LINK_ROWS_COUNT;for(let t=0;t<i;t++)for(let i=0;i<p.LINK_COLS_COUNT&&!(i>t);i++)for(let n=0;n<p.LINK_ROWS_COUNT&&!(n>t);n++)if(n+i===t){let s=this.getIndexByPos(i,n);this.dictCakes.hasOwnProperty(s)&&(e?this.dictCakes[s].getComponent(k).playShowAction(.05*t):this.dictCakes[s].getComponent(k).playHideAction(.05*t,!1))}t&&this.scheduleOnce(t,.05*i+.5)}onEnable(){this.node.on(r.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(r.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(r.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(r.EventType.TOUCH_CANCEL,this.onTouchCancel,this)}onDisable(){this.node.off(r.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(r.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(r.EventType.TOUCH_END,this.onTouchEnded,this),this.node.off(r.EventType.TOUCH_CANCEL,this.onTouchCancel,this)}getCakeNodeByTouchPos(e){let t=this.nodeLinkGroup.getComponent(s).convertToWorldSpaceAR(new o(0,0,0)),i=e.clone().subtract(t),n=Math.floor(i.x/B)+Math.floor(i.y/A)*p.LINK_COLS_COUNT,r=this.dictCakes[n];return r&&(Math.abs(i.x-r.x)>K/2||Math.abs(i.y-r.y)>G/2)&&(r=null),r}drawLine(){let e=0;if(this.arrLinks.length>1){let t=this.arrLinks[0].getComponent(k),i=this.getPosByIndex(t.index),n=new o((i.x+.5)*B,(i.y+.5)*A,0),s=[];for(let e=1;e<this.arrLinks.length;e++){let t=this.arrLinks[e].getComponent(k),i=this.getPosByIndex(t.index),r=new o((i.x+.5)*B,(i.y+.5)*A,0);s.push({start:n.clone(),end:r.clone()}),n=r}for(;e<s.length;e++){let t=s[e],i=null,n=null;e<this.arrLines.length?(n=this.arrLines[e],i=n.getComponent(y)):(n=f.instance.getNode(this.pfLine,this.nodeLineGroup),this.arrLines.push(n),i=n.getComponent(y),i.show()),n.getComponent(y).setLinePosition(t.start,t.end)}}if(e<this.arrLines.length){for(let t=e;t<this.arrLines.length;t++)f.instance.putNode(this.arrLines[t]);this.arrLines.splice(e,this.arrLines.length)}}clearLine(){for(let e=0;e<this.arrLines.length;e++)f.instance.putNode(this.arrLines[e]);this.arrLines=[]}hideDiffCake(){for(let e in this.dictCakes){let t=this.dictCakes[e];t.getComponent(k).cake!==this.currentCake&&(t.opacity=50)}}showAllCake(){for(let e in this.dictCakes){this.dictCakes[e].opacity=255}}checkStep(){}onTouchStart(e){if(!this._fightScene||this._fightScene.isLevelOver||!this._fightScene.isLevelStart)return this.currentNode=null,void(this.arrLinks=[]);let t=this.getCakeNodeByTouchPos(e.getUILocation());if(t){this.stopGuideHand(),this.arrLinks=[t],this.currentNode=t;let e=this.currentNode.getComponent(k);this.currentCake=e.cake,this.preNode=null,e.showSelect(!0),I.instance.playSound(p.AUDIO_SOUND.CLICK_CAKE,!1),this.drawLine(),this.hideDiffCake()}}onTouchMove(e){if(!this.currentNode)return;let t=this.getCakeNodeByTouchPos(e.getUILocation());if(t&&t!==this.currentNode){let e=t.getComponent(k);if(this.currentCake===e.cake){if(this.preNode===t){let e=this.currentNode.getComponent(k);return e.showSelect(!1),e.isSpecial&&e.showSpecial(!1),this.currentNode=this.preNode,this.arrLinks.pop(),this.preNode=this.arrLinks[this.arrLinks.length-2],void this.drawLine()}if(-1!==this.arrLinks.indexOf(t))return;let i=this.getPosByIndex(e.index),n=this.currentNode.getComponent(k),s=this.getPosByIndex(n.index);if(Math.abs(i.x-s.x)<=1&&Math.abs(i.y-s.y)<=1){this.preNode=this.currentNode,this.currentNode=t,this.arrLinks.push(t),e.showSelect(!0),I.instance.playSound(p.AUDIO_SOUND.CLICK_CAKE,!1);let i=this.arrLinks.length;i>=6&&(6===i||(i-6)%4==0)&&e.showSpecial(!0),this.drawLine()}}}}onTouchEnded(e){this.touchOver()}onTouchCancel(e){this.touchOver()}getScreenPosByIndex(e){let t=this.getPosByIndex(e);return new o((t.x+.5)*B,(t.y+.5)*A,0)}getPosByIndex(e){return new o(e%p.LINK_COLS_COUNT,Math.floor(e/p.LINK_COLS_COUNT),0)}getIndexByPos(e,t){return t*p.LINK_COLS_COUNT+e}touchOver(){if(!this.isShowHandGuide){if(this.arrLinks.length>=3)I.instance.playSound(p.AUDIO_SOUND.FINISH_LINK,!1),this.clearLinks();else{for(let e=0;e<this.arrLinks.length;e++)this.arrLinks[e].getComponent(k).showSelect(!1);this.arrLinks=[],this.preNode=null}this.currentNode=null,this.clearLine(),this.showAllCake(),this.checkStep()}}clearItemByEffect(e,t,i,n){let s=this.getPosByIndex(e);switch(t){case p.SPECIAL_EFFECT.HORIZONTAL:this.clearScore+=500,n||I.instance.playSound(p.AUDIO_SOUND.LINE_BOMB,!1),this._fightScene.effectGroup.showSkillLineEffect(this.getItemWorldPosByIndex(e),!0);for(let t=0;t<p.LINK_COLS_COUNT;t++)if(t!==s.x||i){let n=this.getIndexByPos(t,s.y);if(this.dictCakes.hasOwnProperty(n)){let t=this.dictCakes[n].getComponent(k);this.clearCake.hasOwnProperty(t.cake)?this.clearCake[t.cake]+=1:this.clearCake[t.cake]=1,t.showDestory(),delete this.dictCakes[n],t.index!==e&&(t.getEffect()?this.clearItemByEffect(t.index,t.getEffect(),i):this.clearScore+=50)}}break;case p.SPECIAL_EFFECT.VERTICAL:this.clearScore+=500,n||I.instance.playSound(p.AUDIO_SOUND.LINE_BOMB,!1),this._fightScene.effectGroup.showSkillLineEffect(this.getItemWorldPosByIndex(e),!1);for(let t=0;t<p.LINK_ROWS_COUNT;t++)if(t!==s.y||i){let n=this.getIndexByPos(s.x,t);if(this.dictCakes.hasOwnProperty(n)){let t=this.dictCakes[n].getComponent(k);this.clearCake.hasOwnProperty(t.cake)?this.clearCake[t.cake]+=1:this.clearCake[t.cake]=1,t.showDestory(),delete this.dictCakes[n],t.index!==e&&(t.getEffect()?this.clearItemByEffect(t.index,t.getEffect(),i):this.clearScore+=50)}}break;case p.SPECIAL_EFFECT.PLUS:I.instance.playSound(p.AUDIO_SOUND.PLUS_BOMB,!1),this.clearItemByEffect(e,p.SPECIAL_EFFECT.HORIZONTAL,i,!0),this.clearItemByEffect(e,p.SPECIAL_EFFECT.VERTICAL,i,!0);break;case p.SPECIAL_EFFECT.CENTER:this.clearScore+=1500,this._fightScene.effectGroup.showSkillRangeEffect(this.getItemWorldPosByIndex(e));for(let t=-2;t<=2;t++)for(let n=-2;n<=2;n++){if(0===t&&0===n&&!i)continue;let r=new o(s.x+t,s.y+n,0);if(!(r.x<0||r.x>p.LINK_COLS_COUNT||r.y<0||r.y>p.LINK_ROWS_COUNT)&&Math.abs(r.x-s.x)+Math.abs(r.y-s.y)<=2){let t=this.getIndexByPos(r.x,r.y);if(this.dictCakes.hasOwnProperty(t)){let n=this.dictCakes[t].getComponent(k);this.clearCake.hasOwnProperty(n.cake)?this.clearCake[n.cake]+=1:this.clearCake[n.cake]=1,n.showDestory(),delete this.dictCakes[t],n.index!==e&&(n.getEffect()?this.clearItemByEffect(n.index,n.getEffect(),i):this.clearScore+=50)}}}}}clearLinks(){let e={},t={};this.clearScore=0;for(let i=0;i<this.arrLinks.length;i++){let n=this.arrLinks[i].getComponent(k),s=n.getEffect();if(s&&(t[n.index]=s),n.isSpecial){let t=null;if(5===i){t=O.random(0,1)?p.SPECIAL_EFFECT.HORIZONTAL:p.SPECIAL_EFFECT.VERTICAL,this.clearScore+=1e3}else{t=(i-5)/4%2?p.SPECIAL_EFFECT.PLUS:p.SPECIAL_EFFECT.CENTER,t===p.SPECIAL_EFFECT.PLUS?this.clearScore+=2e3:this.clearScore+=3e3}n.setSpecialType(t),e[n.index]=t}else s||(this.clearScore+=50);n.showDestory(),delete this.dictCakes[n.index]}this.clearCake={};for(let e in t)this.clearItemByEffect(e,t[e],!1);L.instance.addScore(this.clearScore);let i=this.arrLinks.length;S.instance.finishLink(this.currentCake,i);let n=null;i>=22?n=p.AUDIO_SOUND.UNBELIEVABLE:i>=18?n=p.AUDIO_SOUND.AMAZING:i>=14?n=p.AUDIO_SOUND.EXCELLENT:i>=10?n=p.AUDIO_SOUND.GREAT:i>=6&&(n=p.AUDIO_SOUND.GOOD),n&&I.instance.playSound(n,!1),this.finishTargetsBatch(),this.arrLinks=[],Object.keys(e).length>0?this.scheduleOnce((()=>{this._fightScene.showFlyEffect(e,(()=>{S.instance.checkGame()}))}),.1):S.instance.checkGame(),this.scheduleOnce(this.fillEmptyCell,.3)}fillEmptyCell(){for(let e=0;e<p.LINK_COLS_COUNT;e++){let t=-1;for(let i=0;i<p.LINK_ROWS_COUNT;i++){let n=i*p.LINK_COLS_COUNT+e;if(this.dictCakes.hasOwnProperty(n)){if(-1!==t){let i=t*p.LINK_COLS_COUNT+e;this.dictCakes[i]=this.dictCakes[n];let s=this.dictCakes[i].getComponent(k);s.index=i,s.playMove2Index(i),delete this.dictCakes[n],t+=1}}else-1===t&&(t=i)}if(-1!==t){let i=this.levelInfo.cakes.split("|");for(let n=t;n<p.LINK_ROWS_COUNT;n++){let s=n*p.LINK_COLS_COUNT+e,r=(p.LINK_ROWS_COUNT+n-t)*p.LINK_COLS_COUNT+e,o=i[O.random(0,i.length-1)];this.createCakeForFill(s,o,r)}}}this.scheduleOnce((()=>{this.checkIsBlocked()}),.2)}createCakeForFill(e,t,i){let n=f.instance.getNode(this.pfCake,this.nodeLinkGroup);n.position=this.getScreenPosByIndex(i),n.opacity=255;let s=n.getComponent(k);return s.show(e,t,!0,this),s.playMove2Index(e),this.dictCakes[e]=n,n}getItemWorldPosByIndex(e){let t=this.getScreenPosByIndex(e);return this.nodeLinkGroup.getComponent(s).convertToWorldSpaceAR(new o(t.x,t.y,0))}getNoEffectLinkItemIndex(){let e=0;for(;;){let t=O.random(0,p.LINK_ROWS_COUNT*p.LINK_COLS_COUNT-1);if(this.dictCakes.hasOwnProperty(t)){let e=this.dictCakes[t].getComponent(k);if(!e.isSpecial&&!e.getEffect())return e.index}if(e++,e>30)return null}}markLinkItemEffect(e,t){this.dictCakes.hasOwnProperty(e)&&this.dictCakes[e].getComponent(k).markEffect(t)}addEffect(e,t){this.dictCakes.hasOwnProperty(e)&&this.dictCakes[e].getComponent(k).showEffect(t)}delayClearItem(e,t,i){this.scheduleOnce((()=>{this.cntTrigger--,this.dictCakes.hasOwnProperty(t)&&(this.clearScore=0,this.clearCake={},this.clearItemByEffect(t,i,!0),L.instance.addScore(this.clearScore),this.finishTargetsBatch()),this.cntTrigger<=0&&this.allTriggerOverCb&&this.allTriggerOverCb()}),.2*e)}triggerAllSpecialEffect(e){let t=0;for(let e=0;e<p.LINK_ROWS_COUNT;e++)for(let i=0;i<p.LINK_COLS_COUNT;i++){let n=this.getIndexByPos(i,e);if(this.dictCakes.hasOwnProperty(n)){let e=this.dictCakes[n].getComponent(k);e&&e.getEffect()&&(this.delayClearItem(t,n,e.getEffect()),t++)}}this.cntTrigger=t,this.allTriggerOverCb=e,this.cntTrigger<=0&&this.allTriggerOverCb&&this.allTriggerOverCb()}finishTargetsBatch(){for(let e in this.clearCake)L.instance.finishTarget(e,this.clearCake[e]),g.dispatchEvent("updateTargets",e);g.dispatchEvent("updateStep")}showLinkFinishEffect(e){u.createEffect("fight/frame/frame",((t,i)=>{if(t)return void(e&&e(t));let n=i.getComponent(h);n.play("frame"),n.once(h.EventType.FINISHED,(()=>{i&&i.destroy(),e&&e(null)}),this)}),this.nodeLinkOverEffect)}checkIsBlocked(){for(let e=0;e<p.LINK_ROWS_COUNT;e++)for(let t=0;t<p.LINK_COLS_COUNT;t++){let i=this.getIndexByPos(t,e);if(this.dictCakes.hasOwnProperty(i)){let e=this.dictCakes[i].getComponent(k);if(e){if(this.checkItemChannelIsClear(i,e.cake))return}}}this.refreshLinkItems()}checkItemChannelIsClear(e,t,i){let n=this.getPosByIndex(e),s=0;for(let e=n.y-1;e<=n.y+1;e++)for(let r=n.x-1;r<=n.x+1;r++)if(!(e<0||r<0||e>=p.LINK_ROWS_COUNT||r>=p.LINK_COLS_COUNT||e===n.y&&r===n.x)){if(i&&i.x===r&&i.y===e)continue;let o=this.getIndexByPos(r,e);if(this.dictCakes.hasOwnProperty(o)){let e=this.dictCakes[o].getComponent(k);if(e&&e.cake===t){if(i)return!0;if(this.checkItemChannelIsClear(o,t,n))return!0;if(s++,s>=2)return!0}}}return!1}onPropTouchStart(e){let t=this.getCakeNodeByTouchPos(e.getUILocation());t&&t.setScale(.9,.9,.9),this.currentPropTouchNode=t}onPropTouchEnd(e){if(!this.currentPropTouchNode)return-1;this.currentPropTouchNode.setScale(1,1,1);let t=this.getCakeNodeByTouchPos(e.getUILocation());if(t===this.currentPropTouchNode){return t.getComponent(k).index}return this.currentPropTouchNode=null,-1}onPropTouchCancel(e){return this.currentPropTouchNode&&(this.currentPropTouchNode.setScale(1,1,1),this.currentPropTouchNode=null),-1}refreshLinkItems(){return!this.isRefreshing&&(this.isRefreshing=!0,this.showAllLinkItem(!1,(()=>{this.initCake((()=>{this.isRefreshing=!1}))})),!0)}destoryCake(e){if(this.dictCakes.hasOwnProperty(e)){let t=this.dictCakes[e].getComponent(k);t.showDestory(),delete this.dictCakes[e],this.clearScore=0,this.clearCake={},this.clearCake[t.cake]=1,t.getEffect()?this.clearItemByEffect(e,t.getEffect(),!1):this.clearScore=50,L.instance.addScore(this.clearScore),this.finishTargetsBatch(),S.instance.checkGame(),this.scheduleOnce(this.fillEmptyCell,.3)}}getConnectCake(e,t,i){let n=this.getPosByIndex(e);for(let e=n.y-1;e<=n.y+1;e++)for(let s=n.x-1;s<=n.x+1;s++)if(!(e<0||s<0||e>=p.LINK_ROWS_COUNT||s>=p.LINK_COLS_COUNT||e===n.y&&s===n.x)){if(i&&i.x===s&&i.y===e)continue;let r=this.getIndexByPos(s,e);if(this.dictCakes.hasOwnProperty(r)){let e=this.dictCakes[r].getComponent(k);if(e&&e.cake===t){if(i)return this.arrConnected.push(r),!0;{let e=this.arrConnected.length;if(this.getConnectCake(r,t,n))return this.arrConnected.splice(e,0,r),!0}}}}return!1}getConnectCakeByIndex(e,t){if(this.arrConnected=[],this.dictCakes.hasOwnProperty(e)){this.arrConnected.push(e);let i=this.dictCakes[e].getComponent(k);if(i)if(t){if(-1!==t.indexOf(i.cake)&&(this.getConnectCake(e,i.cake),this.arrConnected.length>=3))return!0}else if(this.getConnectCake(e,i.cake),this.arrConnected.length>=3)return!0}return!1}findConnectPathForGuide(e){let t=null;if(e)for(var i in t=[],L.instance.dictTargets)L.instance.dictTargets[i]&&t.push(i);let n=p.LINK_ROWS_COUNT*p.LINK_COLS_COUNT,s=n/2+p.LINK_COLS_COUNT/2,r=s-1,o=s,h=!1;for(;!h&&(o<n||r>=0);){if(this.arrConnected=[],o<n){if(this.getConnectCakeByIndex(o,t))return!0}if(r>0&&(h=this.getConnectCakeByIndex(r,t),h))return!0;o++,r--}return!1}showGuideLine(e){this.arrLinks=[];for(let t=0;t<=e;t++){let e=this.dictCakes[this.arrConnected[t]];e&&this.arrLinks.push(e)}this.drawLine()}showGuideHand(){this.isShowHandGuide=!0;let e=this.findConnectPathForGuide(!0);if(e||(e=this.findConnectPathForGuide(!1)),e){let e=[];for(let t=0;t<this.arrConnected.length;t++){e.push(this.getScreenPosByIndex(this.arrConnected[t])),this.dictCakes[this.arrConnected[t]].getComponent(k).showSelect(!0)}this.nodeHand?(this.nodeHand.active=!0,this.nodeHand.getComponent(N).showGuide(e,(e=>{this.showGuideLine(e)}))):u.loadRes("prefab/fight/fightHandGuide",a,((t,i)=>{let n=c(i);n.parent=this.node,this.nodeHand=n,this.nodeHand.getComponent(N).showGuide(e,(e=>{this.showGuideLine(e)}))}))}}stopGuideHand(){if(this.isShowHandGuide=!1,this.lastOperationTime=0,this.arrConnected&&this.dictCakes)for(let e=0;e<this.arrConnected.length;e++){let t=this.dictCakes[this.arrConnected[e]];if(t){t.getComponent(k).showSelect(!1)}}this.nodeHand&&(this.nodeHand.destroy(),this.nodeHand=null),this.arrLinks=[],this.drawLine()}update(e){this._fightScene.isLevelOver||!this._fightScene.isLevelStart||this.isShowHandGuide||this.currentNode||this._fightScene.isShowOperationUI||(this.lastOperationTime+=e,this.lastOperationTime>5&&(this.showGuideHand(),this.lastOperationTime=0))}}).prototype,"pfCake",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=l(_.prototype,"pfLine",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=l(_.prototype,"nodeLineGroup",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=l(_.prototype,"nodeLinkOverEffect",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=l(_.prototype,"nodeLinkGroup",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=_))||T);t._RF.pop()}}}));

System.register("chunks:///_virtual/reward.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./localConfig.ts","./uiManager.ts","./LanguageData.ts","./gameLogic.ts"],(function(e){"use strict";var t,i,n,s,a,o,r,c,l,u,h,m,p,d;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Component,s=e.Animation,a=e.UITransform},function(e){o=e.applyDecoratedDescriptor,r=e.initializerDefineProperty,c=e.defineProperty},function(e){l=e.resourceUtil},function(e){u=e.constants},function(e){h=e.localConfig},function(e){m=e.uiManager},function(e){p=e.t},function(e){d=e.GameLogic}],execute:function(){var R,b,f,w,y,D,v,A,g,E;t._RF.push({},"511b6KMY/hH0J3ytfJAXF3B","reward",void 0);const{ccclass:T,property:P}=i;e("Reward",T("Reward")((f=o((b=class extends n{constructor(...e){super(...e),r(this,"sfDiamond",f,this),r(this,"sfGold",w,this),r(this,"spIcon",y,this),r(this,"lbRewardValue",D,this),r(this,"aniGetItem",v,this),r(this,"ndBtnNormalReceive",A,this),r(this,"ndBtnDoubleReceive",g,this),r(this,"ndBtnReceive",E,this),c(this,"itemType",void 0),c(this,"itemAmount",void 0),c(this,"itemSubType",void 0),c(this,"shareFunction",void 0),c(this,"openRewardType",void 0)}show(e,t,i){this.itemType=e.itemType,this.itemAmount=e.itemAmount,this.itemSubType=e.itemSubType,this.shareFunction=i,this.aniGetItem.play("getItemShow"),this.aniGetItem.once(s.EventType.FINISHED,(()=>{this.aniGetItem.play("getItemIdle")}),this),this.setRewardPage(),t?(this.ndBtnReceive.active=!1,d.instance.getOpenRewardType(this.shareFunction,((e,t)=>{if(e)this.close();else switch(this.openRewardType=t,t){case u.OPEN_REWARD_TYPE.AD:case u.OPEN_REWARD_TYPE.SHARE:this.ndBtnDoubleReceive.active=!0;break;case u.OPEN_REWARD_TYPE.NULL:this.ndBtnDoubleReceive.active=!1}})),this.ndBtnNormalReceive.active=!1,this.scheduleOnce(this.normalBtnCallback,u.NORMAL_SHOW_TIME)):(this.ndBtnNormalReceive.active=!1,this.ndBtnDoubleReceive.active=!1,this.ndBtnReceive.active=!0)}normalBtnCallback(){this.ndBtnNormalReceive.active=!0}setRewardPage(){const e=this.spIcon.getComponent(a);switch(this.itemType){case u.REWARD_TYPE.DIAMOND:this.spIcon.spriteFrame=this.sfDiamond,this.lbRewardValue.string="x"+this.itemAmount;break;case u.REWARD_TYPE.GOLD:this.spIcon.spriteFrame=this.sfGold,this.lbRewardValue.string="x"+this.itemAmount,e.width=257,e.height=166;break;case u.REWARD_TYPE.PROP:let t=h.instance.queryByID("prop",this.itemSubType);e.width=168,e.height=168,l.setPropIcon(t.icon,this.spIcon,(()=>{}));let i=p("table_prop."+t.name);this.lbRewardValue.string=i+p("")+" x "+this.itemAmount}}onBtnNormalReceiveClick(){this.addReward(),this.close()}onBtnDoubleReceiveClick(){switch(this.openRewardType){case u.OPEN_REWARD_TYPE.AD:d.instance.showRewardAd((e=>{e||(this.itemAmount*=2,this.onBtnNormalReceiveClick())}));break;case u.OPEN_REWARD_TYPE.SHARE:d.instance.share(this.shareFunction,{},(e=>{e||(this.itemAmount*=2,this.onBtnNormalReceiveClick())}))}}addReward(){switch(this.itemType){case u.REWARD_TYPE.DIAMOND:d.instance.addDiamond(this.itemAmount);break;case u.REWARD_TYPE.GOLD:d.instance.addGold(this.itemAmount);break;case u.REWARD_TYPE.PROP:d.instance.addProp(this.itemSubType,this.itemAmount)}}showDoubleReward(){this.unschedule(this.normalBtnCallback);let e={};e.itemType=this.itemType,e.itemSubType=this.itemSubType,e.itemAmount=this.itemAmount,m.instance.showDialog("lottery/reward",[e,!1,this.shareFunction]),this.close()}close(){m.instance.shiftFromPopupSeq("lottery/reward")}}).prototype,"sfDiamond",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=o(b.prototype,"sfGold",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=o(b.prototype,"spIcon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=o(b.prototype,"lbRewardValue",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=o(b.prototype,"aniGetItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=o(b.prototype,"ndBtnNormalReceive",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=o(b.prototype,"ndBtnDoubleReceive",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=o(b.prototype,"ndBtnReceive",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=b))||R);t._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(t){"use strict";var e,r;return{setters:[function(t){e=t.cclegacy,r=t._decorator}],execute:function(){var n;e._RF.push({},"51238kLGAFBiLoz3gxcwxtH","util",void 0);const{ccclass:o,property:a}=r;t("util",o("util")(n=class{static clone(t){if(null===t||"object"!=typeof t)return t;let e={};t.constructor===Array&&(e=[]);for(let r in t)t.hasOwnProperty(r)&&(e[r]=this.clone(t[r]));return e}static objectToArray(t){let e=[];for(let r in t)t.hasOwnProperty(r)&&e.push(t[r]);return e}static arrayToObject(t,e){let r={};for(var n in t)t.hasOwnProperty(n)&&t[n][e]&&(r[t[n][e]]=t[n]);return r}static getWeightRandIndex(t,e){let r=Math.floor(Math.random()*e),n=0;for(var o=0;o<t.length&&(n+=t[o],!(r<n));o++);return o}static getRandomNFromM(t,e){let r=[],n=0,o=0;for(;o<e&&!(o>=t+1);){n=this.getRandomInt(0,t);for(var a=0,i=0;i<o;i++)if(r[i]===n){a=1;break}0===a&&(r[o]=n,o++)}return r}static getRandomInt(t,e){let r=Math.random()*(e-t+1)+t;return Math.floor(r)}static getStringLength(t){let e=t,r=0;for(let t=0,n=e.length;t<n;t++){r+=e.charCodeAt(t)<=255?1:2}return Math.ceil(r/2)}static isEmptyObject(t){let e=!0;if(t&&t.constructor===Object){for(var r in t)if(t.hasOwnProperty(r)){e=!1;break}}else e=!1;return e}static isNewDay(t){var e=new Date(t),r=new Date,n=e.getYear(),o=e.getMonth(),a=e.getDate(),i=r.getYear(),h=r.getMonth(),l=r.getDate();return i>n||(h>o||l>a)}static getPropertyCount(t){var e,r=0;for(e in t)t.hasOwnProperty(e)&&r++;return r}static difference(t,e){let r=[];if(t.constructor!==Array||e.constructor!==Array)return r;let n=t.length;for(let o=0;o<n;o++)-1===e.indexOf(t[o])&&r.push(t[o]);return r}static _stringToArray(t){var e,r="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+r+"]"),a="\\ud83c[\\udffb-\\udfff]",i="[\\ufe0e\\ufe0f]?",h="["+n+"]",l="(?:"+h+"|"+a+")"+"?",f="[\\ud800-\\udfff]",c="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",g=i+l+("(?:\\u200d(?:"+[c,s,u].join("|")+")"+i+l+")*"),d="(?:"+[c+h+"?",h,s,u,f].join("|")+")",m=RegExp(a+"(?="+a+")|"+d+g,"g");return e=t,o.test(e)?function(t){return t.match(m)||[]}(t):function(t){return t.split("")}(t)}static simulationUUID(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}static trim(t){return t.replace(/(^\s*)|(\s*$)/g,"")}static isNowValid(t,e){var r=new Date(t),n=new Date(e),o=!1;if(r.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var a=new Date;o=a<n&&a>r}return o}static getDeltaDays(t,e){t=new Date(t),e=new Date(e);let r=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),a=e.getFullYear(),i=e.getMonth()+1,h=e.getDate();t=new Date(r+"/"+n+"/"+o+" GMT+0800").getTime();let l=(e=new Date(a+"/"+i+"/"+h+" GMT+0800").getTime())-t;return Math.floor(l/864e5)}static getMin(t){let e=null;if(t.constructor===Array){let r=t.length;for(let n=0;n<r;n++)e=0===n?Number(t[0]):e>Number(t[n])?Number(t[n]):e}return e}static formatTwoDigits(t){return(Array(2).join(0)+t).slice(-2)}static formatDate(t,e){let r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(let t in r)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?r[t]:("00"+r[t]).substr((""+r[t]).length)));return e}static getDay(){let t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}static formatName(t,e){e=e||6;var r=this._stringToArray(t),n="";if(r.length>e){for(var o=0;o<e;o++)n+=r[o];n+="..."}else n=t;return n}static formatMoney(t){let e=["","K","M","G","T","P","E","Z","Y","B","N","D"],r="";for(let n=0;n<e.length;n++){if(!(t>=1e4)){r=Math.floor(t)+e[n];break}t/=1e3}return""===r&&(r=Math.floor(t)+"U"),r}static formatValue(t){let e=[],r="";for(let t=0;t<26;t++)e.push(String.fromCharCode(97+t));for(let n=0;n<e.length;n++){if(!(t>=1e4)){r=Math.floor(t)+e[n];break}t/=1e3}return r}static formatTimeForSecond(t,e=!1){let r="",n=t%60,o=Math.floor(t/60);o=o<0?0:o;let a=Math.floor(o/60),i=o%60;return a>0?(r+=a>9?a.toString():"0"+a,r+=":"):r+="00:",r+=i>9?i.toString():"0"+i,e||(r+=":",r+=n>9?n.toString():"0"+n),r}static formatTimeForMillisecond(t){let e=Math.floor(t/1e3%60),r=Math.floor(t/1e3/60%60);return{hour:Math.floor(t/1e3/60/60),minute:r,second:e}}static rand(t){let e=this.clone(t);for(let t=e.length-1;t>=0;t--){const r=Math.floor(Math.random()*(t+1)),n=e[r];e[r]=e[t],e[t]=n}return e}static getOffsetMimutes(t,e){let r=e-t;return Math.floor(r%36e5/6e4)}static formatNumToFixed(t,e=0){return Number(t.toFixed(e))}static lerp(t,e,r=.25){let n=e;return t>e?n=e+(t-e)*r:t<e&&(n=e-(e-t)*r),n}static decrypt(t){let e=6;t.length%2==0&&(e=7);let r="";for(var n=0;n<t.length-e;n+=2)r+=t[n+1],r+=t[n];return r+=t.slice(t.length-e+1),r=this._base64Decode(r),r}static encrypt(t){let e=this._base64encode(t),r=6;e.length%2==0&&(r=7);let n="";for(let t=0;t<(e.length-r+1)/2;t++)n+=e[2*t+1],n+=e[2*t];return n+=e.slice(e.length-r+1),n}static _base64encode(t){let e,r,n,o,a,i,h,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="",c=0;for(t=this._utf8Encode(t);c<t.length;)e=t.charCodeAt(c++),r=t.charCodeAt(c++),n=t.charCodeAt(c++),o=e>>2,a=(3&e)<<4|r>>4,i=(15&r)<<2|n>>6,h=63&n,isNaN(r)?i=h=64:isNaN(n)&&(h=64),f=f+l.charAt(o)+l.charAt(a)+l.charAt(i)+l.charAt(h);return f}static _utf8Encode(t){t=t.replace(/\r\n/g,"\n");let e="";for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}static _utf8Decode(t){let e="",r=0,n=0,o=0,a=0;for(;r<t.length;)n=t.charCodeAt(r),n<128?(e+=String.fromCharCode(n),r++):n>191&&n<224?(o=t.charCodeAt(r+1),e+=String.fromCharCode((31&n)<<6|63&o),r+=2):(o=t.charCodeAt(r+1),a=t.charCodeAt(r+2),e+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),r+=3);return e}static _base64Decode(t){let e,r,n,o,a,i,h,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)o=l.indexOf(t.charAt(c++)),a=l.indexOf(t.charAt(c++)),i=l.indexOf(t.charAt(c++)),h=l.indexOf(t.charAt(c++)),e=o<<2|a>>4,r=(15&a)<<4|i>>2,n=(3&i)<<6|h,f+=String.fromCharCode(e),64!=i&&(f+=String.fromCharCode(r)),64!=h&&(f+=String.fromCharCode(n));return f=this._utf8Decode(f),f}static checkIsLowPhone(){if(window.wx){let t=-1;const e=window.wx.getSystemInfoSync();if(e.system.indexOf("iOS")>=0){const r=e.model,n=["iPhone1,1","iPhone1,2","iPhone2,1","iPhone3,1","iPhone3,3","iPhone4,1","iPhone5,1","iPhone5,2","iPhone5,3","iPhone5,4","iPhone6,1","iPhone6,2"],o=["iPhone6,2","iPhone7,1","iPhone7,2","iPhone8,1","iPhone8,2","iPhone8,4"],a=["iPhone9,1","iPhone9,2","iPhone9,3","iPhone9,4","iPhone10,1","iPhone10,2","iPhone10,3","iPhone10,4","iPhone10,5","iPhone10,6"],i=["iPhone11,2","iPhone11,4","iPhone11,6","iPhone11,8","iPhone12,1","iPhone12,3","iPhone12,5","iPhone12,8"];for(let e=0;e<n.length;e++)r.indexOf(n[e])>=0&&(t=5);for(let e=0;e<o.length;e++)r.indexOf(o[e])>=0&&(t=10);for(let e=0;e<a.length;e++)r.indexOf(a[e])>=0&&(t=20);for(let e=0;e<i.length;e++)r.indexOf(i[e])>=0&&(t=30)}else t=e.benchmarkLevel;return t<22}return!1}})||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/effectManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./resourceUtil.ts"],(function(e){"use strict";var t,n,l,o,a,i,s,r,c,d,p;return{setters:[function(e){t=e.cclegacy,n=e._decorator,l=e.Component,o=e.find,a=e.Vec3,i=e.AnimationComponent,s=e.ParticleSystemComponent,r=e.AnimationClip},function(e){c=e.defineProperty},function(e){d=e.poolManager},function(e){p=e.resourceUtil}],execute:function(){var u,f,h;t._RF.push({},"554baRvdXVCaZZeXFSvvApe","effectManager",void 0);const{ccclass:g,property:m}=n;e("EffectManager",g("EffectManager")((h=f=class e extends l{constructor(...e){super(...e),c(this,"_ndParent",null)}get ndParent(){return this._ndParent||(this._ndParent=o("effectManager")),this._ndParent}static get instance(){return this._instance||(this._instance=new e),this._instance}playAni(e,t,n=new a,l=!1,o=!1,s=1,c=(()=>{})){let u=e.split("/")[1],f=this.ndParent.getChildByName(u),h=()=>{var e,p,u;null===(e=f)||void 0===e||e.setScale(new a(s,s,s)),null===(p=f)||void 0===p||p.setWorldPosition(n);let h=null===(u=f)||void 0===u?void 0:u.getComponent(i);h.play(t);let g=h.getState(t);g&&(g.wrapMode=l?r.WrapMode.Loop:r.WrapMode.Normal),h.once(i.EventType.FINISHED,(()=>{c&&c(),o&&f&&d.instance.putNode(f)}))};f?h():p.loadModelRes(e).then((e=>{f=d.instance.getNode(e,this.ndParent),f.setScale(new a(s,s,s)),f.setWorldPosition(n),h()}))}removeEffect(e,t=this.ndParent){let n=t.getChildByName(e);if(n){n.getComponentsInChildren(i).forEach((e=>{e.stop()})),(null==n?void 0:n.getComponentsInChildren(s)).forEach((e=>{null==e||e.clear(),null==e||e.stop()})),d.instance.putNode(n)}}playParticle(e,t,n=0,l=1,o,i){p.loadEffectRes(e).then((e=>{let r=d.instance.getNode(e,this.ndParent);r.setScale(new a(l,l,l)),r.setWorldPosition(t),o&&(r.eulerAngles=o);let c=0;r.getComponentsInChildren(s).forEach((e=>{e.simulationSpeed=1,null==e||e.clear(),null==e||e.stop(),null==e||e.play();let t=e.duration;c=t>c?t:c})),setTimeout((()=>{r.parent&&(i&&i(),d.instance.putNode(r))}),1e3*(n&&n>0?n:c))}))}playEffect(e,t,n=!0,l=!0,o=0,r=1,c=new a,u,f){e.parent&&p.loadEffectRes(t).then((t=>{let p=d.instance.getNode(t,e);p.setScale(new a(r,r,r)),p.setPosition(c),u&&(p.eulerAngles=u);let h=0;if(n){p.getComponentsInChildren(i).forEach(((e,t)=>{var n;null==e||e.play();let l=null==e||null===(n=e.defaultClip)||void 0===n?void 0:n.name;if(l){let t=e.getState(l);if(t){let e=t.duration;h=e>h?e:h,t.speed=1}}}))}if(l){p.getComponentsInChildren(s).forEach((e=>{e.simulationSpeed=1,null==e||e.clear(),null==e||e.stop(),null==e||e.play();let t=e.duration;h=t>h?t:h}))}setTimeout((()=>{p.parent&&(f&&f(),d.instance.putNode(p))}),1e3*(o&&o>0?o:h))}))}},c(f,"_instance",void 0),u=h))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/storageManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./util.ts"],(function(t){"use strict";var s,a,e,i,n,r;return{setters:[function(t){s=t.cclegacy,a=t._decorator,e=t.sys,i=t.log},function(t){n=t.defineProperty},function(t){r=t.util}],execute:function(){var o,h,c;s._RF.push({},"5689348bSJGyYo12WGa6eeJ","storageManager",void 0);const{ccclass:l,property:_}=a;t("StorageManager",l("StorageManager")((c=h=class t{constructor(){n(this,"_jsonData",{}),n(this,"_path",null),n(this,"KEY_CONFIG","link"),n(this,"_markSave",!1),n(this,"_saveTimer",-1)}static get instance(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}start(){var t;(this._jsonData={userId:""},this._path=this._getConfigPath(),e.isNative)?t=jsb.fileUtils.getValueMapFromFile(this._path)[this.KEY_CONFIG]:t=e.localStorage.getItem(this.KEY_CONFIG);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1),t=r.decrypt(t));try{var s=JSON.parse(t);this._jsonData=s}catch(t){}}this._saveTimer=setInterval((()=>{this.scheduleSave()}),5e3)}setConfigDataWithoutSave(t,s){let a=this._jsonData.userId;this._jsonData[a]?this._jsonData[a][t]=s:console.error("no account can not save")}setConfigData(t,s){this.setConfigDataWithoutSave(t,s),this._markSave=!0}getConfigData(t){let s=this._jsonData.userId;if(this._jsonData[s]){var a=this._jsonData[s][t];return a||""}return i("no account can not load"),""}setGlobalData(t,s){this._jsonData[t]=s,this.save()}getGlobalData(t){return this._jsonData[t]}setUserId(t){this._jsonData.userId=t,this._jsonData[t]||(this._jsonData[t]={}),this.save()}getUserId(){return this._jsonData.userId}scheduleSave(){this._markSave&&this.save()}markModified(){this._markSave=!0}save(){var t=JSON.stringify(this._jsonData);let s="@"+r.encrypt(t);if(this._markSave=!1,e.isNative){var a={};a[this.KEY_CONFIG]=s,jsb.fileUtils.writeToFile(a,this._getConfigPath())}else{e.localStorage.setItem(this.KEY_CONFIG,s)}}_getConfigPath(){let t=e.platform,s="";return t===e.OS.WINDOWS?s="src/conf":t===e.OS.LINUX?s="./conf":e.isNative?(s=jsb.fileUtils.getWritablePath(),s+="conf"):s="src/conf",s}},n(h,"_instance",void 0),o=c))||o);s._RF.pop()}}}));

System.register("chunks:///_virtual/shopItem.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./clientEvent.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./LanguageData.ts","./gameLogic.ts","./LocalizedSprite.ts"],(function(t){"use strict";var e,i,n,s,r,a,o,h,l,u,c,p,f,d,b;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Component},function(t){s=t.applyDecoratedDescriptor,r=t.initializerDefineProperty,a=t.defineProperty},function(t){o=t.resourceUtil},function(t){h=t.constants},function(t){l=t.clientEvent},function(t){u=t.localConfig},function(t){c=t.playerData},function(t){p=t.uiManager},function(t){f=t._language},function(t){d=t.GameLogic},function(t){b=t.LocalizedSpriteItem}],execute:function(){var y,m,I,B,P,S,g,w,T,E,v,_,N,R,D,U,z,A,L,O;e._RF.push({},"583beWcByBAYIU3DaI3EGJj","shopItem",void 0);const{ccclass:F,property:G}=i;t("ShopItem",(y=F("ShopItem"),m=G({type:b}),I=G({type:b}),B=G({type:b}),P=G({type:b}),y((w=s((g=class extends n{constructor(...t){super(...t),r(this,"spIcon",w,this),r(this,"lbPrise",T,this),r(this,"ndGold",E,this),r(this,"lbNum",v,this),r(this,"lbProcess",_,this),r(this,"aniLight",N,this),r(this,"exBtnBuy",R,this),r(this,"ndNumber",D,this),r(this,"spBtnBuy",U,this),r(this,"sfBuy",z,this),r(this,"sfShare",A,this),r(this,"sfAd",L,this),r(this,"sfReceive",O,this),a(this,"info",void 0),a(this,"parent",void 0),a(this,"id",void 0),a(this,"price",void 0),a(this,"countPerBuy",void 0),a(this,"icon",void 0),a(this,"animState",void 0),a(this,"totalPrice",void 0),a(this,"times",void 0),a(this,"maxTimes",void 0),a(this,"rewardType",void 0)}onEnable(){l.on("updateGold",this.refreshBtn,this),l.on("updateInfiniteShareTimes",this.updateInfiniteShareTimes,this)}onDisable(){l.off("updateGold",this.refreshBtn,this),l.off("updateInfiniteShareTimes",this.updateInfiniteShareTimes,this)}setInfo(t,e){this.info=t,this.parent=e,this.id=t.ID,this.price=t.price,this.countPerBuy=t.countPerBuy,this.icon=t.icon,this.refreshUI(),this.refreshBtn()}refreshUI(){this.animState="shopPropertyIdle",this.aniLight.play(this.animState),o.setPropIcon(this.icon,this.spIcon,(()=>{}));let t=u.instance.queryByID("prop",this.id);this.totalPrice=this.countPerBuy*this.price,this.lbNum.string=t.countPerBuy,this.times=c.instance.getInfiniteTimes(),this.maxTimes=h.MAX_INFINITE_TIMES,this.info.ID!==h.PROP_ID.INFINITE?(this.lbPrise.string=this.totalPrice,this.lbProcess.node.active=!1):d.instance.getOpenRewardType(h.SHARE_FUNCTION.BUY_INFINITE,((t,e)=>{if(!t){switch(this.rewardType=e,e){case h.OPEN_REWARD_TYPE.AD:this.UpdateSprite(this.spBtnBuy,this.sfAd),this.ndGold.active=!1,this.updateInfiniteShareTimes();break;case h.OPEN_REWARD_TYPE.SHARE:this.UpdateSprite(this.spBtnBuy,this.sfShare),this.ndGold.active=!1,this.updateInfiniteShareTimes();break;case h.OPEN_REWARD_TYPE.NULL:this.UpdateSprite(this.spBtnBuy,this.sfBuy),this.lbProcess.node.active=!1,this.lbPrise.string=this.totalPrice}this.refreshBtn()}}))}UpdateSprite(t,e){for(let i=0;i<e.length;i++){const n=e[i];if(n.language===f){t.spriteFrame=n.spriteFrame;break}}}refreshBtn(){"number"==typeof this.rewardType&&this.rewardType!==h.OPEN_REWARD_TYPE.NULL?this.exBtnBuy.interactable=!0:this.exBtnBuy.interactable=c.instance.getGold()>=this.totalPrice}onBtnBuyClick(){p.instance.showDialog("props/buy",[this.id,h.ANALYTICS_TYPE.SHOP_PROP_PER_BUY]),this.parent.showAllItemUnSelect(),this.showSelect()}onItemClick(){this.parent.showAllItemUnSelect(),this.parent.hideRandPropSelect(),this.showSelect()}showSelect(){this.animState="shopPropertySelect",this.aniLight.play(this.animState),this.parent.shopPropsOperationScript.show(this.id)}showUnSelect(){"shopPropertyIdle"!==this.animState&&(this.animState="shopPropertyIdle",this.aniLight.play(this.animState))}updateInfiniteShareTimes(){this.spBtnBuy.node.setScale(1,1,1),this.id===h.PROP_ID.INFINITE&&(this.UpdateSprite(this.spBtnBuy,this.sfReceive),this.spBtnBuy.node.setScale(1.3,1.3,1.3))}}).prototype,"spIcon",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=s(g.prototype,"lbPrise",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=s(g.prototype,"ndGold",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=s(g.prototype,"lbNum",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=s(g.prototype,"lbProcess",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=s(g.prototype,"aniLight",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=s(g.prototype,"exBtnBuy",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=s(g.prototype,"ndNumber",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=s(g.prototype,"spBtnBuy",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=s(g.prototype,"sfBuy",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=s(g.prototype,"sfShare",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=s(g.prototype,"sfAd",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=s(g.prototype,"sfReceive",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=g))||S));e._RF.pop()}}}));

System.register("chunks:///_virtual/audioManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./storageManager.ts","./loadsh.ts"],(function(s){"use strict";var o,i,t,e,u,a,n,r,d,c,l;return{setters:[function(s){o=s.cclegacy,i=s._decorator,t=s.Node,e=s.director,u=s.game,a=s.AudioSource,n=s.AudioClip},function(s){r=s.defineProperty},function(s){d=s.resourceUtil},function(s){c=s.StorageManager},function(s){l=s.loadsh}],execute:function(){var h,p,m;o._RF.push({},"5e2ecZFEJFEHoCgx6lXVYHB","audioManager",void 0);const{ccclass:g,property:f}=i;s("AudioManager",g("AudioManager")((m=p=class s{constructor(){r(this,"_persistRootNode",null),r(this,"_audioSources",[]),r(this,"dictWeaponSoundIndex",{}),r(this,"musicVolume",.8),r(this,"soundVolume",1),r(this,"audios",{}),r(this,"arrSound",[])}static get instance(){return this._instance||(this._instance=new s),this._instance}init(){this._persistRootNode||(this._persistRootNode=new t("audio"),e.getScene().addChild(this._persistRootNode),u.addPersistRootNode(this._persistRootNode),this.musicVolume=this.getAudioSetting(!0)?.8:0,this.soundVolume=this.getAudioSetting(!1)?1:0)}_getAudioSource(s){let o;for(let s=0;s<this._audioSources.length;++s){let i=this._audioSources[s];if(!i.playing){o=i;break}}return o||(o=this._persistRootNode.addComponent(a),this._audioSources.push(o)),o.node.off(a.EventType.ENDED),o.clip=s,o.currentTime=0,o}getAudioSetting(s){let o;return o=s?c.instance.getGlobalData("music"):c.instance.getGlobalData("sound"),!o||"true"===o}playMusic(s,o){let i="audio/music/"+s;d.loadRes(i,n,((i,t)=>{let e=this._getAudioSource(t),u={source:e,isMusic:!0};this.audios[s]=u,e.volume=this.musicVolume,e.loop=o,e.play()}))}playSound(s,o=!1){if(!this.soundVolume)return;d.loadRes("audio/sound/"+s,n,((i,t)=>{let e=this._getAudioSource(t),u={source:e,isMusic:!1};this.arrSound.push(u),o&&(this.audios[s]=u),e.volume=this.soundVolume,e.loop=o,e.play(),e.node.on(a.EventType.ENDED,(()=>{l.remove(this.arrSound,(s=>s.source===u.source))}))}))}stop(s){if(this.audios.hasOwnProperty(s)){this.audios[s].source.stop()}}stopAll(){for(const s in this.audios)if(this.audios.hasOwnProperty(s)){this.audios[s].source.stop()}}getMusicVolume(){return this.musicVolume}setMusic(s){this.musicVolume=s;for(let s in this.audios)if(this.audios.hasOwnProperty(s)&&this.audios[s].isMusic){this.audios[s].source.volume=this.musicVolume}}pauseAll(){console.log("pause all music!!!");for(let s in this.audios)if(this.audios.hasOwnProperty(s)){this.audios[s].source.pause()}}resumeAll(){for(let s in this.audios)if(this.audios.hasOwnProperty(s)){this.audios[s].source.play()}}openMusic(){this.setMusic(.8),c.instance.setGlobalData("music","true")}closeMusic(){this.setMusic(0),c.instance.setGlobalData("music","false")}openSound(){this.setSound(1),c.instance.setGlobalData("sound","true")}closeSound(){this.setSound(0),c.instance.setGlobalData("sound","false")}setSound(s){this.soundVolume=s;for(let s in this.audios)if(this.audios.hasOwnProperty(s)&&!this.audios[s].isMusic){this.audios[s].source.volume=this.soundVolume}for(let s=0;s<this.arrSound.length;s++){this.arrSound[s].source.volume=this.soundVolume}}stopSingleSound(s){if(this.audios.hasOwnProperty(s)&&!this.audios[s].isMusic){this.audios[s].source.stop()}}},r(p,"_instance",void 0),h=m))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/pveSlotUI.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./playerData.ts","./levelUI.ts"],(function(e){"use strict";var t,i,l,s,n,o,r,a,h,d,v;return{setters:[function(e){t=e.cclegacy,i=e._decorator,l=e.Component,s=e.instantiate,n=e.UITransform},function(e){o=e.applyDecoratedDescriptor,r=e.initializerDefineProperty,a=e.defineProperty},function(e){h=e.constants},function(e){d=e.playerData},function(e){v=e.LevelUI}],execute:function(){var p,c,u,y,f;t._RF.push({},"61998EPL8lJqYcj54CvjY6+","pveSlotUI",void 0);const{ccclass:C,property:g}=i;e("PveSlotUI",C("PveSlotUI")((u=o((c=class extends l{constructor(...e){super(...e),r(this,"levelNodes",u,this),r(this,"prefabLevel",y,this),r(this,"prefabCloud",f,this),a(this,"index",void 0),a(this,"_parent",void 0),a(this,"levelArray",void 0)}show(e,t,i){this.index=i,this._parent=e,this.levelArray=t,this.addLevelNodes()}addLevelNodes(){let e=d.instance.getCurrentLevel(),t=parseInt(e.name),i=this.levelArray.length,l=0;for(let e=0;e<i;e++){this.levelNodes[e].active=!0;let i=this.levelNodes[e].getComponentInChildren(v);if(!i){let t=s(this.prefabLevel);t.active=!0,t.setPosition(0,0),this.levelNodes[e].addChild(t)}let n=this.levelArray[e].name;parseInt(n)<t?this.levelArray[e].status=h.PVE_LEVEL_STATUS.DONE:parseInt(n)===t?this.levelArray[e].status=h.PVE_LEVEL_STATUS.DOING:this.levelArray[e].status=h.PVE_LEVEL_STATUS.UNDONE;let o=this.levelArray[e].ID;d.instance.history.hasOwnProperty(o)&&(this.levelArray[e].star=d.instance.history[o].star),i=this.levelNodes[e].getComponentInChildren(v),i.init(this.levelArray[e]),l=this.levelNodes[e].position.y}this.showCloudsUponLevels(l);let n=this.levelNodes.length;for(let e=this.levelArray.length;e<n;e++)this.levelNodes[e].removeAllChildren(),this.levelNodes[e].active=!1}showCloudsUponLevels(e){let t=this.node.getChildByName("cloud");t&&this.node.removeChild(t);let i=0,l=e;this.index<0?i=0:(i=this.index,l+=430);const o=this.node.getComponent(n).height;l+=o*i;let r=o+this.node.position.y,a=this._parent.contentNode.getComponent(n).height,h=s(this.prefabCloud);const d=h.getComponent(n).height;Math.floor(Math.abs(a-l)/d)&&Math.abs(r-l)>d&&(h.setPosition(0,e+d/2),h.active=!0,this.node.addChild(h))}}).prototype,"levelNodes",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=o(c.prototype,"prefabLevel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=o(c.prototype,"prefabCloud",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=c))||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/pveUI.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./clientEvent.ts","./utils.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts"],(function(t){"use strict";var e,i,n,o,r,s,a,l,u,c,d,p,h,g;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Component,o=t.Animation,r=t.Vec3},function(t){s=t.applyDecoratedDescriptor,a=t.initializerDefineProperty,l=t.defineProperty},function(t){u=t.constants},function(t){c=t.clientEvent},function(t){d=t.utils},function(t){p=t.playerData},function(t){h=t.uiManager},function(t){g=t.GameLogic}],execute:function(){var f,y,b,S,I,R,m,D,T,L,w,v,E;e._RF.push({},"61b9axYpi9De7EZBUlEuYVP","pveUI",void 0);const{ccclass:N,property:P}=i;t("PveUI",N("PveUI")((b=s((y=class extends n{constructor(...t){super(...t),a(this,"multiScrollView",b,this),a(this,"settingNode",S,this),a(this,"introductionNode",I,this),a(this,"ndLotteryBtn",R,this),a(this,"ndLotteryTips",m,this),a(this,"lbLotterySpareTimes",D,this),a(this,"sfBlueDot",T,this),a(this,"sfRedDot",L,this),a(this,"lbGold",w,this),a(this,"ndSignRedDot",v,this),a(this,"ndShopRedDot",E,this),l(this,"rewardType",void 0),l(this,"debugIdx",void 0),l(this,"debugTimer",void 0)}onEnable(){c.on("updateSignIn",this.checkSignInRedDot,this),c.on("updateLotterySpareTimes",this.updateLotterySpareTimes,this),c.on("updateGold",this.updateGold,this),c.on("updateShopPropInfo",this.checkShopRedDot,this)}onDisable(){c.off("updateSignIn",this.checkSignInRedDot,this),c.off("updateLotterySpareTimes",this.updateLotterySpareTimes,this),c.off("updateGold",this.updateGold,this),c.off("updateShopPropInfo",this.checkShopRedDot,this)}start(){p.instance.playerInfo.isNew?this.introductionNode.active=!0:this.introductionNode.active=!1,this.refreshUI(),this.checkSignInRedDot(),this.checkShopRedDot(),this.updateLotterySpareTimes()}refreshUI(){this.updateGold()}onBtnBack(){}onBtnSettingClick(){g.instance.showInterStitialAd((()=>{h.instance.showDialog("dialog/setting")}))}onBtnSignClick(){h.instance.showDialog("signIn/signIn")}onBtnLotteryClick(){h.instance.showDialog("lottery/lottery")}onBtnIntrodutionClick(){this.introductionNode.active=!1}updateLotterySpareTimes(){g.instance.getOpenRewardType(u.SHARE_FUNCTION.LOTTERY,((t,e)=>{t||(this.rewardType=e)}));let t=p.instance.getLotterySpareTimes(!1),e=p.instance.getLotterySpareTimes(!0);this.ndLotteryTips.active=t>0||e>0,this.lbLotterySpareTimes.string=t.toString();let i=this.ndLotteryBtn.getComponent(o);t>0||e>0?t?i.play():this.rewardType!==u.OPEN_REWARD_TYPE.NULL?(this.lbLotterySpareTimes.string=e.toString(),i.play()):(this.ndLotteryTips.active=!1,i.stop(),this.ndLotteryBtn.getChildByName("pveIconLotterya").eulerAngles=new r(0,0,0)):(i.stop(),this.ndLotteryBtn.getChildByName("pveIconLotterya").eulerAngles=new r(0,0,0))}updateGold(){this.lbGold.string=d.formatMoney(p.instance.getGold())}onBtnShopClick(){h.instance.showDialog("shop/shop")}checkSignInRedDot(){p.instance.updateSignInCurrentDay(),g.instance.getOpenRewardType(u.SHARE_FUNCTION.FILL_SIGN,((t,e)=>{if(!t)switch(e){case u.OPEN_REWARD_TYPE.AD:case u.OPEN_REWARD_TYPE.SHARE:this.ndSignRedDot.active=!p.instance.getSignInReceivedInfo().isAllReceived;break;case u.OPEN_REWARD_TYPE.NULL:this.ndSignRedDot.active=!p.instance.getSignInReceivedInfo().isTodayReceived}}))}checkShopRedDot(){p.instance.playerInfo.hasOwnProperty("shopPropInfo")||(p.instance.resetShopPropInfo(),p.instance.updateShopPropInfo(!1)),this.ndShopRedDot.active=p.instance.playerInfo.shopPropInfo.receiveStatus===u.REWARD_STATUS.RECEIVABLE}onBtnDebugClick(){this.debugIdx||(this.debugIdx=0);if(this.debugIdx++,this.debugIdx>8)h.instance.showDialog("debug/password",[]);else if(!this.debugTimer){var t=this;this.debugTimer=setTimeout((function(){t.debugTimer=null,t.debugIdx<8&&(t.debugIdx=0)}),3e3)}}}).prototype,"multiScrollView",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=s(y.prototype,"settingNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=s(y.prototype,"introductionNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=s(y.prototype,"ndLotteryBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=s(y.prototype,"ndLotteryTips",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=s(y.prototype,"lbLotterySpareTimes",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=s(y.prototype,"sfBlueDot",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=s(y.prototype,"sfRedDot",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=s(y.prototype,"lbGold",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=s(y.prototype,"ndSignRedDot",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=s(y.prototype,"ndShopRedDot",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/stopPropagation.ts",["cc"],(function(o){"use strict";var t,n,i;return{setters:[function(o){t=o.cclegacy,n=o.Component,i=o._decorator}],execute:function(){var s;t._RF.push({},"628d0zbx11LV4NaSW232uP9","stopPropagation",void 0);const{ccclass:e}=i;o("StopPropagation",e("StopPropagation")(s=class extends n{onLoad(){}onEnable(){this.node.on("touchstart",(function(o){o.stopPropagation()})),this.node.on("touchend",(function(o){o.stopPropagation()})),this.node.on("touchmove",(function(o){o.stopPropagation()})),this.node.on("touchcancel",(function(o){o.stopPropagation()})),this.node.on("mousedown",(function(o){o.stopPropagation()})),this.node.on("mouseenter",(function(o){o.stopPropagation()})),this.node.on("mousemove",(function(o){o.stopPropagation()})),this.node.on("mouseleave",(function(o){o.stopPropagation()})),this.node.on("mouseup",(function(o){o.stopPropagation()})),this.node.on("mousewheel",(function(o){o.stopPropagation()}))}onDisable(){this.node.off("touchstart",(function(o){o.stopPropagation()})),this.node.off("touchend",(function(o){o.stopPropagation()})),this.node.off("touchmove",(function(o){o.stopPropagation()})),this.node.off("touchcancel",(function(o){o.stopPropagation()})),this.node.off("mousedown",(function(o){o.stopPropagation()})),this.node.off("mouseenter",(function(o){o.stopPropagation()})),this.node.off("mousemove",(function(o){o.stopPropagation()})),this.node.off("mouseleave",(function(o){o.stopPropagation()})),this.node.off("mouseup",(function(o){o.stopPropagation()})),this.node.off("mousewheel",(function(o){o.stopPropagation()}))}})||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/gameLogic.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./clientEvent.ts","./sceneManager.ts","./playerData.ts","./uiManager.ts","./SDK.ts"],(function(e){"use strict";var n,t,i,a,s,o,c,r,p,d,h;return{setters:[function(e){n=e.cclegacy,t=e._decorator},function(e){i=e.defineProperty,a=e.applyDecoratedDescriptor,s=e.initializerDefineProperty},function(e){o=e.constants},function(e){c=e.clientEvent},function(e){r=e.SceneManager},function(e){p=e.playerData},function(e){d=e.uiManager},function(e){h=e.default}],execute:function(){var l,u,f,g,v;n._RF.push({},"72a86eT/GZB8K0okUbOBKut","gameLogic",void 0);const{ccclass:I,property:S}=t;e("GameLogic",I("GameLogic")((v=g=class e{constructor(){s(this,"isConnect",f,this),i(this,"channel",void 0),i(this,"timer",void 0)}static get instance(){return this._instance||(this._instance=new e),this._instance}onAppShow(e){if(console.log("onAppShow",e),1037===e.scene&&e.query){let n="game_id";if(e.query.hasOwnProperty(n)){let t=e.query[n];this.channel=t,t&&this.customEventStatistics(o.ANALYTICS_TYPE.CHANNEL,{channel:t})}}else 1044===e.scene?this.channel="share":e.scene&&(this.channel=e.scene+"")}afterLogin(){this.startTick(),setTimeout((()=>{p.instance.isOpenOffLineReward(60*o.OFFLINE_REWARD*1e3)&&d.instance.showDialog("pve/offLineReward",[{itemType:o.REWARD_TYPE.GOLD,itemAmount:500,itemSubType:0}]),this.convertSignInDataFormat(),p.instance.isNewBee||this.checkSignIn()}),1e3)}startTick(){this.timer&&clearInterval(this.timer),this.timer=setInterval(this.onTick.bind(this),1e3)}onTick(){if(r.instance.isStop)return;p.instance.getOnlineRewardInfo().value.receiveStatus===o.REWARD_STATUS.UNRECEIVABLE&&this.addUsedTime(),this.checkShopPropInfo()}checkShopPropInfo(){if(p.instance.playerInfo.hasOwnProperty("shopPropInfo")){let e=p.instance.playerInfo.shopPropInfo,n=e.createDate,t=e.receiveStatus;e.isReceived;Date.now()-n>=36e5*o.SHOP_COUNTDOWN_HOURS&&t!==o.REWARD_STATUS.RECEIVABLE&&(p.instance.updateShopPropInfo(!1),c.dispatchEvent("updateShopPropInfo"))}else p.instance.resetShopPropInfo(),p.instance.updateShopPropInfo(!1)}checkSignIn(){p.instance.updateSignInCurrentDay(),p.instance.getSignInReceivedInfo().isTodayReceived||d.instance.showDialog("signIn/signIn")}addUsedTime(){let e=p.instance.getOnlineRewardInfo().usedTime;60*p.instance.getCountdownTime()*1e3-1e3*e<=0&&p.instance.updateOnlineRewardInfo(!1),p.instance.addUsedTime()}convertSignInDataFormat(){p.instance.playerInfo.hasOwnProperty("signInInfo")&&p.instance.playerInfo.signInInfo.hasOwnProperty("value")&&p.instance.convertSignInDataFormat(p.instance.playerInfo.signInInfo)}finishLink(e,n){p.instance.finishLink(e,n),c.dispatchEvent("updateTargets",e),c.dispatchEvent("updateStep")}checkGame(){p.instance.isLevelFinish()?c.dispatchEvent("levelFinished"):p.instance.isGameOver()&&c.dispatchEvent("gameOver")}resetLevel(){p.instance.startNewLevel(),c.dispatchEvent("newLevel")}showRewardAd(e){h.showRewardVideoAD(e)}showInterStitialAd(e){e(null)}share(e,n,t,i){t()}addDiamond(e){p.instance.addDiamond(e),c.dispatchEvent("updateDiamond")}addGold(e){p.instance.addGold(e),c.dispatchEvent("updateGold")}addProp(e,n){p.instance.addProp(e,n),c.dispatchEvent("updateProp",e)}getOpenRewardType(e,n){n(null,o.OPEN_REWARD_TYPE.AD)}customEventStatistics(e,n){}requestWithPost(e,n,t){let i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<400){let e=i.responseText;try{e=JSON.parse(i.responseText)}catch(e){console.error(i.responseText)}t(null,e)}else t("failed",i.status)},i.open("POST",e,!0),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(n))}},i(g,"_instance",void 0),f=a((u=v).prototype,"isConnect",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=u))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){"use strict";var t,s,a,r,i,o,l,n,c,d,f;return{setters:[function(e){t=e.cclegacy,s=e.resources,a=e.error,r=e.Prefab,i=e.SpriteFrame,o=e.Texture2D,l=e.instantiate,n=e.find,c=e.isValid,d=e.Sprite,f=e._decorator}],execute:function(){var u;t._RF.push({},"7844e1bOwZK+7JMYjENQU5v","resourceUtil",void 0);const{ccclass:m}=f;e("resourceUtil",m("resourceUtil")(u=class{static loadRes(e,t,r=(()=>{})){s.load(e,((e,t)=>{if(e)return a(e.message||e),void r(e,t);r&&r(null,t)}))}static loadEffectRes(e){return new Promise(((t,s)=>{this.loadRes(`prefab/effect/${e}`,r,((a,r)=>{if(a)return console.error("effect load failed",e),void(s&&s());t&&t(r)}))}))}static loadModelRes(e){return new Promise(((t,s)=>{this.loadRes(`prefab/model/${e}`,r,((a,r)=>{if(a)return console.error("model load failed",e),void(s&&s());t&&t(r)}))}))}static loadModelResArr(e,t,a,i){let o=t.map((t=>`${e}/${t}`));s.load(o,r,a,i)}static loadSpriteFrameRes(e){return new Promise(((t,s)=>{this.loadRes(e,i,((a,r)=>{if(a)return console.error("spriteFrame load failed!",e,a),void(s&&s());let l=new o;l.image=r;let n=new i;n.texture=l,t&&t(n)}))}))}static getMap(e,t){let s="map";s+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes(`map/config/${s}`,null,((e,s)=>{if(e)return void t(e,s);let a="";if(s._file){window.LZString&&(a=window.LZString.decompressFromEncodedURIComponent(s._file));var r=JSON.parse(a);t(null,r)}else if(s.text){window.LZString&&(a=window.LZString.decompressFromEncodedURIComponent(s.text));r=JSON.parse(a);t(null,r)}else s.json?t(null,s.json):t("failed")}))}static getMapObj(e,t,a,i){let o=[];for(let s=0;s<t.length;s++)o.push(`map/${e}/${t[s]}`);s.load(o,r,a,i)}static getUIPrefabRes(e,t){this.loadRes("prefab/ui/"+e,r,t)}static createUI(e,t,s){this.getUIPrefabRes(e,(function(e,a){if(e)return;let r=l(a);r.setPosition(0,0,0),s||(s=n("Canvas")),s.addChild(r),t&&t(null,r)}))}static getJsonData(e,t){this.loadRes("datas/"+e,null,(function(e,s){e?a(e.message||e):s.json?t(e,s.json):t("failed!!!")}))}static getTextData(e,t){this.loadRes("datas/"+e,null,(function(e,s){if(e)return void a(e.message||e);let r=s.text;t(e,r)}))}static setSpriteFrame(e,t,s){this.loadRes(e+"/spriteFrame",i,((a,r)=>{if(a)return console.error("set sprite frame failed! err:",e,a),void s(a);t&&c(t)&&(t.spriteFrame=r,s(null))}))}static setPropIcon(e,t,s){this.setSpriteFrame("gamePackages/textures/icons/props/"+e,t,s)}static setGray(e,t){for(var s=e.getComponentsInChildren(d),a=0;a<s.length;++a){var r=s[a];r.grayscale=!!t}}static setAvatar(e,t,s){}static setCakeIcon(e,t,s){this.setSpriteFrame("gamePackages/textures/icons/cakes/"+e,t,s)}static createEffect(e,t,s){this.loadRes("/gamePackages/effects/"+e,r,(function(e,a){if(e)t("err",null);else{var r=l(a);s||(s=n("Canvas")),s.addChild(r),t(null,r)}}))}static getEffectPrefab(e,t){this.loadRes("gamePackages/effects/"+e,r,t)}})||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/loginScene.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./clientEvent.ts","./storageManager.ts","./localConfig.ts","./sceneManager.ts","./playerData.ts","./uiManager.ts","./audioManager.ts","./LanguageData.ts","./SDK.ts","./gameLogic.ts"],(function(n){"use strict";var e,t,a,i,o,c,s,r,u,l,g,d,f,h,p,S,v,m,L,C;return{setters:[function(n){e=n.cclegacy,t=n._decorator,a=n.Component,i=n.profiler,o=n.game,c=n.Game,s=n.director},function(n){r=n.defineProperty},function(n){u=n.constants},function(n){l=n.clientEvent},function(n){g=n.StorageManager},function(n){d=n.localConfig},function(n){f=n.SceneManager},function(n){h=n.playerData},function(n){p=n.uiManager},function(n){S=n.AudioManager},function(n){v=n.init,m=n.t},function(n){L=n.default},function(n){C=n.GameLogic}],execute:function(){var I;e._RF.push({},"78951xH1B5FbIWkKgRGXo5v","loginScene",void 0);const{ccclass:M,property:y}=t;n("LoginScene",M("LoginScene")(I=class extends a{constructor(...n){super(...n),r(this,"currentStep",null),r(this,"isLoadCsvFinishd",!1)}onLoad(){v("en"),i.hideStats(),L.onEvent("login_ui","",""),S.instance.init(),S.instance.playMusic(u.AUDIO_MUSIC.BACKGROUND,!0),h.instance.loadGlobalCache(),h.instance.userId||(h.instance.generateRandomAccount(),console.log("###生成随机userId",h.instance.userId)),h.instance.loadFromCache(),h.instance.playerInfo&&h.instance.playerInfo.createDate||h.instance.createPlayerInfo(),o.on(c.EVENT_HIDE,(()=>{h.instance.settings||(h.instance.settings={}),h.instance.settings.hideTime=Date.now(),h.instance.saveAll(),g.instance.save()})),d.instance.loadConfig((()=>{this.isLoadCsvFinishd=!0}))}showLoadingUI(){var n=this;this.currentStep=0;var e=function(){p.instance.showTips(m("login/timeout"),(function(){n.showLoadingUI()}))};this.scheduleOnce(e,30),p.instance.showDialog("common/loading"),f.instance.load([function(e){n.currentStep=1,n.loadSubPackage(e)},function(e){n.currentStep=2,n.loadGameSubPackage(e)},function(t){n.currentStep=3,n.unschedule(e),n.enterMainScene(t)}],(function(n,e){if(n)return L.onEvent("login_result","0",""),void console.error(n.message||n)}))}loadSubPackage(n){n()}loadGameSubPackage(n){n()}enterMainScene(n){var e=this;let t=h.instance.isNewBee?"fight":"pve";s.preloadScene(t,(function(){e.currentStep=4,n(),s.preloadScene(t,(function(){s.loadScene(t,(function(){e.currentStep=5,l.dispatchEvent("onSceneChanged"),C.instance.afterLogin()}))}))}))}onBtnVisitorLoginClick(){this.isLoadCsvFinishd&&(L.onEvent("login_click","",""),this.showLoadingUI())}})||I);e._RF.pop()}}}));

System.register("chunks:///_virtual/adStepItem.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts"],(function(e){"use strict";var t,n,r,i,o,s,c;return{setters:[function(e){t=e.cclegacy,n=e._decorator,r=e.Component},function(e){i=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,s=e.defineProperty},function(e){c=e.resourceUtil}],execute:function(){var u,p,l,a,h;t._RF.push({},"7bc1e52TulKuq/projnBb/o","adStepItem",void 0);const{ccclass:d,property:m}=n;e("AdStepItem",d("AdStepItem")((l=i((p=class extends r{constructor(...e){super(...e),o(this,"spPropIcon",l,this),o(this,"lbPropNum",a,this),o(this,"ndFinishedIcon",h,this),s(this,"cakeInfo",void 0)}setInfo(e){this.cakeInfo=e,c.setCakeIcon(e.name,this.spPropIcon,(()=>{})),this.lbPropNum.string=e.num?e.num:"",this.ndFinishedIcon.active=!e.num,e.num>0?this.spPropIcon.grayscale=!1:this.spPropIcon.grayscale=!0}}).prototype,"spPropIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=i(p.prototype,"lbPropNum",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=i(p.prototype,"ndFinishedIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=p))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/offLineReward.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./localConfig.ts","./uiManager.ts","./LanguageData.ts","./gameLogic.ts"],(function(e){"use strict";var t,i,n,s,o,r,a,l,c,h,u,p,m,d;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Component,s=e.Animation,o=e.UITransform},function(e){r=e.applyDecoratedDescriptor,a=e.initializerDefineProperty,l=e.defineProperty},function(e){c=e.resourceUtil},function(e){h=e.constants},function(e){u=e.localConfig},function(e){p=e.uiManager},function(e){m=e.t},function(e){d=e.GameLogic}],execute:function(){var f,R,w,b,y,T,I,g,A;t._RF.push({},"7bf14l0xJZIx6dTAV7YPTWD","offLineReward",void 0);const{ccclass:E,property:D}=i;e("OffLineReward",E("OffLineReward")((w=r((R=class extends n{constructor(...e){super(...e),a(this,"sfDiamond",w,this),a(this,"sfGold",b,this),a(this,"spIcon",y,this),a(this,"lbRewardValue",T,this),a(this,"aniGetItem",I,this),a(this,"ndThreeReceive",g,this),a(this,"ndNormalReceive",A,this),l(this,"itemInfo",void 0),l(this,"rewardType",void 0),l(this,"itemType",void 0),l(this,"itemAmount",void 0),l(this,"itemSubType",void 0)}show(e){this.itemInfo=e,this.itemType=e.itemType,this.itemAmount=e.itemAmount,this.itemSubType=e.itemSubType,this.aniGetItem.play("getItemShow"),this.aniGetItem.once(s.EventType.FINISHED,(()=>{this.aniGetItem.play("getItemIdle")}),this),this.showUI(),this.ndNormalReceive.active=!1,this.scheduleOnce((()=>{this.ndNormalReceive.active=!0}),h.NORMAL_SHOW_TIME)}showUI(){const e=this.spIcon.getComponent(o);switch(this.itemType){case h.REWARD_TYPE.DIAMOND:this.spIcon.spriteFrame=this.sfDiamond,this.lbRewardValue.string="x"+this.itemAmount;break;case h.REWARD_TYPE.GOLD:this.spIcon.spriteFrame=this.sfGold,this.lbRewardValue.string="x"+this.itemAmount,e.width=257,e.height=166;break;case h.REWARD_TYPE.PROP:let t="00"+this.itemSubType,i=u.instance.queryByID("prop",t+"");e.width=168,e.height=168,c.setPropIcon(t,this.spIcon,(()=>{}));let n=m("table_prop."+i.name);this.lbRewardValue.string=n+m("")+" x "+this.itemAmount}d.instance.getOpenRewardType(h.SHARE_FUNCTION.OFFLINE,((e,t)=>{this.rewardType=t,e?this.close():this.ndThreeReceive.active=t!==h.OPEN_REWARD_TYPE.NULL}))}showAd(){d.instance.showRewardAd((e=>{e||this.showReward()}))}showShare(){d.instance.share(h.SHARE_FUNCTION.OFFLINE,{},(e=>{e||this.showReward()}))}onBtnThreeReceiveClick(){this.rewardType===h.OPEN_REWARD_TYPE.AD?this.showAd():this.rewardType===h.OPEN_REWARD_TYPE.SHARE&&this.showShare()}showReward(){p.instance.showDialog("lottery/reward",[{itemType:h.REWARD_TYPE.GOLD,itemAmount:3*this.itemAmount,itemSubType:0},!1,h.SHARE_FUNCTION.OFFLINE]),this.close()}onBtnNormalClick(){d.instance.addGold(this.itemAmount),this.close()}close(){p.instance.shiftFromPopupSeq("pve/offLineReward")}}).prototype,"sfDiamond",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=r(R.prototype,"sfGold",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=r(R.prototype,"spIcon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=r(R.prototype,"lbRewardValue",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(R.prototype,"aniGetItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=r(R.prototype,"ndThreeReceive",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=r(R.prototype,"ndNormalReceive",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=R))||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/loading.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./SDK.ts"],(function(n){"use strict";var t,i,e,o,r,a;return{setters:[function(n){t=n.cclegacy,i=n._decorator,e=n.Component},function(n){o=n.applyDecoratedDescriptor,r=n.initializerDefineProperty},function(n){a=n.default}],execute:function(){var s,l,c,u;t._RF.push({},"7c72f8OVs9Jgr00M87vUcnZ","loading",void 0);const{ccclass:p,property:g}=i;n("Loading",p("Loading")((c=o((l=class extends e{constructor(...n){super(...n),r(this,"txtTips",c,this),r(this,"aniLoading",u,this)}show(n){a.onEvent("login_result","1",""),this.txtTips.string=n||""}onEnable(){a.onEvent("loading_begin","",""),this.aniLoading.play()}onDisable(){this.aniLoading.stop(),a.onEvent("loading_end","",""),a.onEvent("game_start","","")}}).prototype,"txtTips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=o(l.prototype,"aniLoading",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=l))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/adStep.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts","./adStepItem.ts"],(function(t){"use strict";var e,i,n,a,s,r,l,c,o,p,u,h;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Component,a=t.instantiate},function(t){s=t.applyDecoratedDescriptor,r=t.initializerDefineProperty,l=t.defineProperty},function(t){c=t.constants},function(t){o=t.playerData},function(t){p=t.uiManager},function(t){u=t.GameLogic},function(t){h=t.AdStepItem}],execute:function(){var d,b,g,A,f,m,y,S;e._RF.push({},"85a6dBiKRxKkILjS8dfOBYF","adStep",void 0);const{ccclass:R,property:_}=i;t("AdStep",R("AdStep")((g=s((b=class extends n{constructor(...t){super(...t),r(this,"ndContent",g,this),r(this,"pbAdStepItem",A,this),r(this,"imgAd",f,this),r(this,"imgShare",m,this),r(this,"spBtn",y,this),r(this,"ndBtnPlayAgain",S,this),l(this,"callback",void 0),l(this,"rewardType",void 0)}show(t){this.callback=t,u.instance.getOpenRewardType(c.SHARE_FUNCTION.LACK_STEP,((t,e)=>{if(!t)switch(this.rewardType=e,e){case c.OPEN_REWARD_TYPE.AD:this.spBtn.spriteFrame=this.imgAd;break;case c.OPEN_REWARD_TYPE.SHARE:this.spBtn.spriteFrame=this.imgShare;break;case c.OPEN_REWARD_TYPE.NULL:this.onBtnCloseClick()}}));let e=o.instance.dictTargets;this.ndContent.removeAllChildren();for(let t in e){let i={name:t,num:e[t]},n=a(this.pbAdStepItem);n.parent=this.ndContent,n.getComponent(h).setInfo(i)}this.ndBtnPlayAgain.active=!1,this.scheduleOnce((()=>{this.ndBtnPlayAgain.active=!0}),c.NORMAL_SHOW_TIME)}onBtnCloseClick(){this.callback&&this.callback("close"),this.close()}onBtnPlayClick(){this.rewardType===c.OPEN_REWARD_TYPE.AD?u.instance.showRewardAd((t=>{t||(this.close(),this.callback&&this.callback(null))})):u.instance.share(c.SHARE_FUNCTION.START_REWARD,{},(t=>{t||(this.close(),this.callback&&this.callback(t))}))}close(){p.instance.hideDialog("fight/adStep")}onBtnPlayAgain(){this.close(),u.instance.resetLevel()}}).prototype,"ndContent",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=s(b.prototype,"pbAdStepItem",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=s(b.prototype,"imgAd",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=s(b.prototype,"imgShare",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=s(b.prototype,"spBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=s(b.prototype,"ndBtnPlayAgain",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/levelPanel.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./utils.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./LanguageData.ts","./propItem.ts","./targetCake.ts"],(function(t){"use strict";var e,i,n,r,l,a,o,s,c,u,h,p,f,g,b;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Component,r=t.instantiate},function(t){l=t.applyDecoratedDescriptor,a=t.initializerDefineProperty,o=t.defineProperty},function(t){s=t.constants},function(t){c=t.utils},function(t){u=t.localConfig},function(t){h=t.playerData},function(t){p=t.uiManager},function(t){f=t.t},function(t){g=t.PropItem},function(t){b=t.TargetCake}],execute:function(){var d,L,v,m,C,y,k,P,I,S;e._RF.push({},"8622524wZFNZK4SKvWm789R","levelPanel",void 0);const{ccclass:w,property:D}=i;t("LevelPanel",w("LevelPanel")((v=l((L=class extends n{constructor(...t){super(...t),a(this,"arrStarList",v,this),a(this,"lbHighScore",m,this),a(this,"lbLevelNum",C,this),a(this,"pbPropItem",y,this),a(this,"pbTargetCake",k,this),a(this,"ndStartList",P,this),a(this,"ndPropList",I,this),a(this,"ndCakeList",S,this),o(this,"levelInfo",void 0),o(this,"callback",void 0)}show(t,e){this.levelInfo=t,this.callback=e,this.lbLevelNum.string=t.name,this.lbHighScore.string=f("pve.highest")+" "+h.instance.getHighestScoreByLevel(t.name);let i=t.targets.split("|"),n=this.ndCakeList.children;if(this.ndCakeList.children.length>i.length)for(let t=i.length;t<this.ndCakeList.children.length;t++)this.ndCakeList.children[t].active=!1;for(let t=0;t<i.length;t++){let e=i[t],l=null;t<n.length?l=n[t]:(l=r(this.pbTargetCake),l.parent=this.ndCakeList),l.active=!0,l.getComponent(b).setInfo(e)}let l=u.instance.getTable("prop"),a=c.objectToArray(l),o=this.ndPropList.children;for(let t=0;t<a.length;t++){let e=null,i=a[t];t<o.length?e=o[t]:(e=r(this.pbPropItem),e.parent=this.ndPropList),e.getComponent(g).setInfo(i)}let p=h.instance.history;if(p[this.levelInfo.ID]){let t=p[this.levelInfo.ID].star;for(let e=0;e<s.MAX_GRADE_OF_EACH_PVE_LEVEL;e++)this.arrStarList[e].active=e<t}else this.arrStarList.forEach((t=>{t.active=!1}))}onBtnStartClick(){this.callback()}onBtnCloseClick(){p.instance.hideDialog("pve/levelPanel")}}).prototype,"arrStarList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=l(L.prototype,"lbHighScore",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=l(L.prototype,"lbLevelNum",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=l(L.prototype,"pbPropItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=l(L.prototype,"pbTargetCake",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=l(L.prototype,"ndStartList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=l(L.prototype,"ndPropList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=l(L.prototype,"ndCakeList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=L))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/signIn.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./clientEvent.ts","./localConfig.ts","./playerData.ts","./animationUI.ts","./uiManager.ts","./buttonEx.ts","./LanguageData.ts","./gameLogic.ts","./signInItem.ts"],(function(e){"use strict";var n,t,i,s,a,r,o,c,l,u,I,h,g,d,p,m,S,R;return{setters:[function(e){n=e.cclegacy,t=e._decorator,i=e.Component,s=e.Widget,a=e.instantiate},function(e){r=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,c=e.defineProperty},function(e){l=e.constants},function(e){u=e.clientEvent},function(e){I=e.localConfig},function(e){h=e.playerData},function(e){g=e.AnimationUI},function(e){d=e.uiManager},function(e){p=e.ButtonEx},function(e){m=e.t},function(e){S=e.GameLogic},function(e){R=e.SignInItem}],execute:function(){var f,b,v,y,D,E,T,N;n._RF.push({},"8885akyBoFF94Jx+V7yERfJ","signIn",void 0);const{ccclass:A,property:C}=t;e("SignIn",A("SignIn")((v=r((b=class extends i{constructor(...e){super(...e),o(this,"prefabItem",v,this),o(this,"iconList",y,this),o(this,"ndSeventhItem",D,this),o(this,"ndBtnDoubleReceive",E,this),o(this,"arrDay",T,this),o(this,"ndBtnNormalReceive",N,this),c(this,"currentDay",void 0),c(this,"arrReceived",void 0),c(this,"arrAfterFillSignIn",void 0),c(this,"isTodayReceived",void 0),c(this,"arrSignInItemScript",void 0),c(this,"signInItemScript",void 0),c(this,"openRewardType",void 0)}onEnable(){u.on("updateSignIn",this.updateSignIn,this)}onDisable(){u.off("updateSignIn",this.updateSignIn,this)}show(){h.instance.updateSignInCurrentDay();let e=h.instance.playerInfo.signInInfo;console.log("###signInfo",e),this.currentDay=e.currentDay,this.arrReceived=e.receivedDays,this.arrAfterFillSignIn=e.afterFillSignInDays,this.showSignInInfo(),this.ndSeventhItem.setSiblingIndex(l.ZORDER.TIPS),this.updateSignIn(),this.isTodayReceived=h.instance.getSignInReceivedInfo().isTodayReceived,this.ndBtnNormalReceive.active=!1,this.isTodayReceived?this.scheduleOnce(this.showNormalBtnCallback,1):this.scheduleOnce(this.showNormalBtnCallback,l.NORMAL_SHOW_TIME)}updateSignIn(){this.ndBtnDoubleReceive.getComponent(p).interactable=!h.instance.getSignInReceivedInfo().isTodayReceived,console.log("###getSignInReceivedInfo",h.instance.getSignInReceivedInfo())}showNormalBtnCallback(){this.ndBtnNormalReceive.active=!0,this.node.getComponent(s).enabled=!0,this.ndBtnNormalReceive.getComponent(s).enabled=!0,this.ndBtnNormalReceive.getComponent(s).bottom=205,console.log("bottom",this.ndBtnNormalReceive.getComponent(s).bottom),console.log("enable",this.ndBtnNormalReceive.getComponent(s).enabled)}showSignInInfo(){let e=I.instance.getTable("signIn"),n=this;for(var t in this.arrSignInItemScript=[],e){let i=e[t].ID,s=!!this.arrReceived.includes(Number(i));i<=this.currentDay?(e[t].status=s?l.SIGN_REWARD_STATUS.RECEIVED:l.SIGN_REWARD_STATUS.RECEIVABLE,e[t].status===l.SIGN_REWARD_STATUS.RECEIVABLE&&i<this.currentDay&&(e[t].status=l.SIGN_REWARD_STATUS.FILLSIGNIN,this.arrAfterFillSignIn.includes(i)&&(e[t].status=l.SIGN_REWARD_STATUS.AFTER_FILLSIGNIN))):e[t].status=l.SIGN_REWARD_STATUS.UNRECEIVABLE;let r=n.iconList[Number(t)-1],o=null;r.children.length<=1?(o=a(n.prefabItem),r.addChild(o),o.setPosition(0,0)):o=r.getChildByName("signInItem"),this.signInItemScript=o.getComponent(R),this.signInItemScript.init(e[t],n),this.arrSignInItemScript.includes(this.signInItemScript)||this.arrSignInItemScript.push(this.signInItemScript),this.arrDay[Number(t)-1].string=m("sign.day%{value}",{value:t})}}receiveReward(e,n,t){let i=e.ID;if(this.currentDay<i)return;let s=!1;if(e.rewardType===l.REWARD_TYPE.GIFT){let i=h.instance.parseGift(e.subType);for(let a=0;a<i.length;a++){let r={};r.ID=e.ID,r.itemType=i[a].type,r.itemSubType=i[a].subType,r.itemAmount=n?2*Number(i[a].amount):i[a].amount,s=a===i.length-1,d.instance.pushToPopupSeq("signIn/signInReward","signinReward",[r,t,s])}}else{let i={};i.ID=e.ID,i.itemType=e.rewardType,i.itemSubType=e.subType,i.itemAmount=n?2*Number(e.amount):e.amount,s=!0,d.instance.pushToPopupSeq("signIn/signInReward","signinReward",[i,t,s])}d.instance.hideDialog("signIn/signIn"),this.unschedule(this.showNormalBtnCallback)}receiveClick(e){for(let n=0;n<this.arrSignInItemScript.length;n++){let t=this.arrSignInItemScript[n];if(t.itemInfo.status===l.SIGN_REWARD_STATUS.RECEIVABLE){t._parent.receiveReward(t.itemInfo,e,(()=>{t.markReceived()}));break}}}onBtnDoubleReceiveClick(){S.instance.getOpenRewardType(l.SHARE_FUNCTION.SIGN,((e,n)=>{if(e)this.node.getComponent(g).close();else switch(this.openRewardType=n,n){case l.OPEN_REWARD_TYPE.AD:this.showAd();break;case l.OPEN_REWARD_TYPE.SHARE:this.showShare();break;case l.OPEN_REWARD_TYPE.NULL:this.receiveClick(!1)}}))}showAd(){S.instance.showRewardAd((e=>{e||this.receiveClick(!0)}))}showShare(){S.instance.share(l.SHARE_FUNCTION.SIGN,{},(e=>{e||this.receiveClick(!0)}))}onBtnNormalReceiveClick(){this.onBtnCloseClick()}onBtnCloseClick(){d.instance.hideDialog("signIn/signIn"),d.instance.hideDialog("signIn/signInReward"),this.unschedule(this.showNormalBtnCallback)}}).prototype,"prefabItem",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=r(b.prototype,"iconList",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=r(b.prototype,"ndSeventhItem",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=r(b.prototype,"ndBtnDoubleReceive",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=r(b.prototype,"arrDay",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=r(b.prototype,"ndBtnNormalReceive",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/effectGroup.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./resourceUtil.ts","./constants.ts","./clientEvent.ts","./audioManager.ts","./fightNum.ts","./showTargetCake.ts"],(function(e){"use strict";var t,n,o,i,s,r,c,a,l,p,f,d,h,g,u,m,S,y,E,N;return{setters:[function(e){t=e.cclegacy,n=e._decorator,o=e.Component,i=e.UITransform,s=e.Animation,r=e.TweenSystem,c=e.tween,a=e.Vec3,l=e.Prefab,p=e.Label,f=e.instantiate,d=e.Sprite},function(e){h=e.defineProperty},function(e){g=e.poolManager},function(e){u=e.resourceUtil},function(e){m=e.constants},function(e){S=e.clientEvent},function(e){y=e.AudioManager},function(e){E=e.FightNum},function(e){N=e.ShowTargetCake}],execute:function(){var v;t._RF.push({},"97452hq2+JOY4wRZ0jvZvzu","effectGroup",void 0);const{ccclass:I}=n;e("EffectGroup",I("EffectGroup")(v=class extends o{constructor(...e){super(...e),h(this,"_fightScene",void 0)}show(e){this._fightScene=e}showStarFlyEffect(e,t,n,o){const a=this.node.getComponent(i);let l=a.convertToNodeSpaceAR(e);u.getEffectPrefab("fight/linkStar/linkStar",((e,i)=>{if(e)return void n.apply(o,[e]);let p=g.instance.getNode(i,this.node);p.position=l;let f=p.getComponent(s);f.once(s.EventType.FINISHED,(()=>{let e=this._fightScene.linkContent.getNoEffectLinkItemIndex();if(!e)return g.instance.putNode(p),void n.apply(o,["error"]);{this._fightScene.linkContent.markLinkItemEffect(e,t);let i=this._fightScene.linkContent.getItemWorldPosByIndex(e),f=a.convertToNodeSpaceAR(i);y.instance.playSound(m.AUDIO_SOUND.FLY_STAR,!1),r.instance.ActionManager.removeAllActionsFromTarget(p);let d=f.clone().subtract(l).length()/1200;c(p).to(d,{position:f},{easing:"backIn"}).call((()=>{let i=p.getComponent(s);i.once(s.EventType.FINISHED,(()=>{g.instance.putNode(p)})),i.play("linkStarOver"),n.apply(o,[null,e,t])})).start()}})),f.play("linkStarFly")}))}showStarAfterLevelFinished(e,t,n,o,l){const p=this.node.getComponent(i);let f=p.convertToNodeSpaceAR(e);u.getEffectPrefab("fight/linkStar/linkStar",((e,i)=>{if(e)return void n.apply(o,[e]);let d=g.instance.getNode(i,this.node);if(d.position=f,d.getComponent(s).play("linkStarScale"),l||(l=this._fightScene.linkContent.getNoEffectLinkItemIndex()),!l)return g.instance.putNode(d),void n.apply(o,["error"]);{this._fightScene.linkContent.markLinkItemEffect(l,t);let e=this._fightScene.linkContent.getItemWorldPosByIndex(l),i=p.convertToNodeSpaceAR(e);y.instance.playSound(m.AUDIO_SOUND.SPARE_STEP,!1),r.instance.ActionManager.removeAllActionsFromTarget(d),c(d).to(.33,{position:f}).to(.33,{position:new a((i.x-f.x)/2+f.x,f.y+500,0)}).to(.33,{position:i}).call((()=>{let e=d.getComponent(s);e.once(s.EventType.FINISHED,(()=>{g.instance.putNode(d)})),e.play("linkStarOver"),n.apply(o,[null,l,t])})).start()}}))}showLinkItemDestroyEffect(e,t){let n=this.node.getComponent(i).convertToNodeSpaceAR(e);u.getEffectPrefab("fight/effectHide/effectHide",((e,o)=>{if(e)return;let i=g.instance.getNode(o,this.node);i.position=n;let r=i.getComponent(s);r.once(s.EventType.FINISHED,(()=>{g.instance.putNode(i),this.showAfterDestroyEffect(n)}),this),r.play("effectHide"),this.showLinkItemScore(n,t)}))}showLinkItemScore(e,t){u.loadRes("prefab/fight/fightNum",l,((n,o)=>{if(n)return;let i=g.instance.getNode(o,this.node);i.position=new a(e.x,e.y+40),i.zIndex=m.ZORDER.FIGHT_NUM,i.getComponent(E).show(t,(()=>{g.instance.putNode(i)}))}))}showAfterDestroyEffect(e){let t=this._fightScene.fightUI.getProgressBarWorldPos(),n=this.node.getComponent(i).convertToNodeSpaceAR(t);n&&u.getEffectPrefab("fight/eliminate/eliminate",((t,o)=>{if(t)return;let i=g.instance.getNode(o,this.node);i.position=e;let s=n.clone().subtract(e).length()/1e3;c(i).to(s,{position:n}).call((()=>{g.instance.putNode(i),S.dispatchEvent("updateScore")})).start()}))}showSkillLineEffect(e,t){let n=this.node.getComponent(i).convertToNodeSpaceAR(e);u.getEffectPrefab("fight/effectSkillLine/effectSkillLine",((e,o)=>{if(e)return;let i=g.instance.getNode(o,this.node);i.position=n,i.setRotationFromEuler(0,0,0),t||i.setRotationFromEuler(0,0,90);let r=i.getComponent(s);r.play("effectSkillLine"),r.once(s.EventType.FINISHED,(()=>{g.instance.putNode(i)}),this)}))}showSkillRangeEffect(e){let t=this.node.getComponent(i).convertToNodeSpaceAR(e);u.getEffectPrefab("fight/effectSkillRange/effectSkillRange",((e,n)=>{if(e)return;let o=g.instance.getNode(n,this.node);o.position=t,y.instance.playSound(m.AUDIO_SOUND.RANGE_BOMB,!1);let i=o.getComponent(s);i.play("effectSkillRange"),i.once(s.EventType.FINISHED,(()=>{g.instance.putNode(o)}),this)}))}playTargetCakeFlyEffect(e,t,n,o){u.createUI("fight/showTargetCake",((s,r)=>{if(s)return void o(s,r);const a=this.node.getComponent(i);let l=a.convertToNodeSpaceAR(t),p=a.convertToNodeSpaceAR(n);r.position=l,r.getComponent(N).onlyShowCake(e);let f=p.clone().subtract(l).length()/1e3;c(r).to(f,{position:p}).call((e=>{e&&e.destroy(),o()})).start()}),this.node)}showBonusTime(e){u.createEffect("fight/bonusTime/bonusTime",((t,n)=>{if(t)return void e(t,n);let o=n.getComponent(s);o.play("bonusTime"),o.once(s.EventType.FINISHED,(()=>{n&&n.destroy(),e(null)}),this)}),this.node)}useInfiniteProp(e,t){let n=this.node.getComponent(i).convertToNodeSpaceAR(e);u.createEffect("fight/propUse/propUse",((e,o)=>{if(e)return;o.position=n;let i=o.getComponent(s);i.play("propUse"),i.on(s.EventType.FINISHED,(()=>{o&&o.destroy(),this.showUnlimitedOrNumber(t,!0,null)}))}),this.node)}showUnlimitedOrNumber(e,t,n){let o=this.node.getComponent(i).convertToNodeSpaceAR(e);u.createEffect("fight/unlimited/unlimited",((e,i)=>{if(e)return;i.position=o;let r=i.getComponent(s),c=i.getChildByName("homeIcon"),a=c.getChildByName("homeIconUnlimited"),l=c.getChildByName("txt");a.active=t,l.active=!t,!t&&n>0&&(l.getComponent(p).string=n),r.play("unlimitedStart"),r.on(s.EventType.FINISHED,(()=>{t?r.play("unlimitedIdle"):(i&&i.destroy(),S.dispatchEvent("updateStep"))}))}),this.node)}removeLastEffect(){let e=[],t=this.node.getChildByName("unlimited");t&&e.push(t),0!==e.length&&e.forEach((e=>{e.removeFromParent()}))}showUnlockProp(e,t,n){u.getEffectPrefab("fight/propGet/propGet",((o,r)=>{if(o)return;let l=f(r);l.setScale(2,2,2),l.parent=this.node;let p=this.node.getComponent(i).convertToNodeSpaceAR(e),h="00"+t,g=l.getChildByName("prop");u.setPropIcon(h,g.getComponent(d),(()=>{}));let m=l.getComponent(s);m.play("propGetStart"),m.on(s.EventType.FINISHED,(()=>{let e=p.clone().subtract(l.position).length()/500;c(l).to(e,{position:p,scale:new a(1,1,1)},{easing:"cubicInOut"}).call((()=>{m.play("propGetOver"),m.on(s.EventType.FINISHED,(()=>{l&&l.destroy()}),this),n&&n()})).start()}),this)}))}})||v);t._RF.pop()}}}));

System.register("chunks:///_virtual/showTargetCake.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./playerData.ts"],(function(e){"use strict";var t,i,a,n,r,o,s,l,c,u,h;return{setters:[function(e){t=e.cclegacy,i=e._decorator,a=e.Component,n=e.Animation,r=e.UITransform,o=e.Vec3},function(e){s=e.applyDecoratedDescriptor,l=e.initializerDefineProperty,c=e.defineProperty},function(e){u=e.resourceUtil},function(e){h=e.playerData}],execute:function(){var p,k,C,f,b,y,g;t._RF.push({},"9c9c8xtNVNNdaML8iBVjy6C","showTargetCake",void 0);const{ccclass:d,property:w}=i;e("ShowTargetCake",d("ShowTargetCake")((C=s((k=class extends a{constructor(...e){super(...e),l(this,"spCake",C,this),l(this,"lbCake",f,this),l(this,"aniCake",b,this),l(this,"nodeValue",y,this),l(this,"nodePanel",g,this),c(this,"cake",void 0)}show(e,t){this.cake=e,u.setCakeIcon(this.cake,this.spCake,(()=>{})),this.lbCake.string=h.instance.getTargetValue(e),this.aniCake.play("showTargetCakeShow"),this.aniCake.once(n.EventType.FINISHED,(()=>{this.aniCake.play("showTargetCakeOver"),t.showFlyEffect(this.cake,this.spCake.node.getComponent(r).convertToWorldSpaceAR(new o(0,0,0)))}),this)}onlyShowCake(e){u.setCakeIcon(e,this.spCake,(()=>{})),this.nodeValue.active=!1,this.nodePanel.active=!1}}).prototype,"spCake",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=s(k.prototype,"lbCake",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=s(k.prototype,"aniCake",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=s(k.prototype,"nodeValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=s(k.prototype,"nodePanel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=k))||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/signInItem.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./playerData.ts","./gameLogic.ts"],(function(t){"use strict";var i,e,n,s,r,o,a,c,l,h,u;return{setters:[function(t){i=t.cclegacy,e=t._decorator,n=t.Component,s=t.Vec3,r=t.UITransform},function(t){o=t.applyDecoratedDescriptor,a=t.initializerDefineProperty,c=t.defineProperty},function(t){l=t.constants},function(t){h=t.playerData},function(t){u=t.GameLogic}],execute:function(){var I,p,R,f,d,E,S,m,_,b,A,T,g;i._RF.push({},"9ed24FbGtFK/r/yqUqxT4pv","signInItem",void 0);const{ccclass:D,property:N}=e;t("SignInItem",D("SignInItem")((R=o((p=class extends n{constructor(...t){super(...t),a(this,"lbAmount",R,this),a(this,"spIcon",f,this),a(this,"spPan",d,this),a(this,"sfDiamond",E,this),a(this,"sfGold",S,this),a(this,"sfGift",m,this),a(this,"ndLight",_,this),a(this,"ndTick",b,this),a(this,"ndBtnFillSignIn",A,this),a(this,"ndBtnReceive",T,this),a(this,"ndMenu",g,this),c(this,"isReceived",void 0),c(this,"_parent",void 0),c(this,"itemInfo",void 0),c(this,"openRewardType",void 0)}start(){this.isReceived=!1}init(t,i){this._parent=i,this.itemInfo=t,this.setIcon(t.rewardType),this.setStatus(t.status),u.instance.getOpenRewardType(l.SHARE_FUNCTION.FILL_SIGN,((t,i)=>{if(!t)switch(this.openRewardType=i,i){case l.OPEN_REWARD_TYPE.AD:case l.OPEN_REWARD_TYPE.SHARE:break;case l.OPEN_REWARD_TYPE.NULL:this.ndBtnFillSignIn.active=!1}}))}setIcon(t){let i=new s;const e=this.spIcon.getComponent(r);switch(t){case l.REWARD_TYPE.DIAMOND:this.spIcon.spriteFrame=this.sfDiamond,e.width=165,e.height=126,i.set(this.spIcon.node.position),i.y=56,this.spIcon.node.setPosition(i);break;case l.REWARD_TYPE.GOLD:this.spIcon.spriteFrame=this.sfGold,e.width=165,e.height=126,i.set(this.spIcon.node.position),i.y=56,this.spIcon.node.setPosition(i);break;case l.REWARD_TYPE.GIFT:this.spIcon.spriteFrame=this.sfGift}this.itemInfo.ID<=6?(i.set(.6,.6,.6),this.spPan.node.setScale(i)):(i.set(this.ndTick.position),i.y=50,this.ndTick.setPosition(i)),i.set(this.ndMenu.position),i.y=-50,this.ndMenu.setPosition(i)}setStatus(t){switch(t){case l.SIGN_REWARD_STATUS.RECEIVED:this.showItemUI(!1,!0,!1,!1);break;case l.SIGN_REWARD_STATUS.RECEIVABLE:this.showItemUI(!0,!1,!1,!1);break;case l.SIGN_REWARD_STATUS.UNRECEIVABLE:this.showItemUI(!1,!1,!1,!1);break;case l.SIGN_REWARD_STATUS.FILLSIGNIN:this.showItemUI(!1,!1,!0,!1);break;case l.SIGN_REWARD_STATUS.AFTER_FILLSIGNIN:this.showItemUI(!0,!1,!1,!0)}}showItemUI(t,i,e,n){this.ndLight.active=t,this.ndTick.active=i,this.ndBtnFillSignIn.active=e,this.ndBtnReceive.active=n}onBtnReceiveClick(){this.itemInfo.status!==l.SIGN_REWARD_STATUS.AFTER_FILLSIGNIN&&this.itemInfo.status!==l.SIGN_REWARD_STATUS.RECEIVABLE||this._parent.receiveReward(this.itemInfo,!1,this.markReceived.bind(this))}markReceived(){this.itemInfo.status=l.SIGN_REWARD_STATUS.RECEIVED,this.setStatus(this.itemInfo.status)}markAfterFillSignIn(){this.itemInfo.status=l.SIGN_REWARD_STATUS.AFTER_FILLSIGNIN,this.setStatus(this.itemInfo.status),h.instance.updateSignInFillSignInDays(this.itemInfo.ID,!1)}onBtnFillSignInClick(){switch(this.openRewardType){case l.OPEN_REWARD_TYPE.AD:u.instance.showRewardAd((t=>{t||this.markAfterFillSignIn()}));break;case l.OPEN_REWARD_TYPE.SHARE:u.instance.share(l.SHARE_FUNCTION.FILL_SIGN,{},(t=>{t||this.markAfterFillSignIn()}));break;case l.OPEN_REWARD_TYPE.NULL:}}}).prototype,"lbAmount",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=o(p.prototype,"spIcon",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=o(p.prototype,"spPan",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=o(p.prototype,"sfDiamond",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=o(p.prototype,"sfGold",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=o(p.prototype,"sfGift",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=o(p.prototype,"ndLight",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=o(p.prototype,"ndTick",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=o(p.prototype,"ndBtnFillSignIn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=o(p.prototype,"ndBtnReceive",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=o(p.prototype,"ndMenu",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=p))||I);i._RF.pop()}}}));

System.register("chunks:///_virtual/loadsh.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var r,e,n;return{setters:[function(t){r=t.cclegacy,e=t._decorator},function(t){n=t.defineProperty}],execute:function(){var a,i,s;r._RF.push({},"a40a4pGR6lCqo0coR1W4kAl","loadsh",void 0);const{ccclass:c}=e;t("loadsh",c("loadsh")((s=i=class t{static find(r,e){var n;if(Array.isArray(r)||(r=t._toArray(r)),(n=r.filter(e)).length)return n[0]}static forEach(r,e){Array.isArray(r)?r.forEach(e):t._toArrayKey(r).forEach((function(t,n,a){var i=t.key,s=t.value;e(s,i,r)}))}static cloneDeep(r){if(null===r||"object"!=typeof r)return r;let e={};r.constructor===Array&&(e=[]);for(let n in r)r.hasOwnProperty(n)&&(e[n]=t.cloneDeep(r[n]));return e}static map(r,e){Array.isArray(r)||(r=t._toArray(r));let n=[];return r.forEach((function(t,r,a){n.push(e(t,r,a))})),n}static _toArrayKey(t){var r=[];for(var e in t)t.hasOwnProperty(e)&&r.push({key:e,value:t[e]});return r}static _toArray(t){let r=[];for(var e in t)t.hasOwnProperty(e)&&r.push(t[e]);return r}static filter(r,e){return Array.isArray(r)||(r=t._toArray(r)),r.filter(e)}static isEqual(r,e){if(!(r instanceof Object)||!(e instanceof Object))return r===e;if(Object.keys(r).length!==Object.keys(e).length)return!1;for(var n in r){var a=r[n]instanceof Object,i=e[n]instanceof Object;if(a&&i)return t.isEqual(r[n],e[n]);if(r[n]!==e[n])return!1}return!0}static pullAllWith(t,r,e){return r.forEach((function(r){t.filter((function(t){return e(t,r)})).forEach((function(r){var e=t.indexOf(r);-1!==t.indexOf(r)&&t.splice(e,1)}))})),t}static now(){return Date.now()}static pullAll(t,r){return r.forEach((function(r){var e=t.indexOf(r);-1!==t.indexOf(r)&&t.splice(e,1)})),t}static forEachRight(r,e){Array.isArray(r)||(r=t._toArray(r));for(var n=r.length-1;n>=0;n--){if(!e(r[n]))break}}static startsWith(t,r,e){return(t=t.substr(e)).startsWith(r)}static endsWith(t,r,e){return(t=t.substr(e)).endsWith(r)}static remove(r,e){var n=[],a=[];return r.forEach((function(t,r){e(t)&&(n.push(t),a.push(r))})),t._basePullAt(r,a),n}static _basePullAt(t,r){for(var e,n=t?r.length:0,a=n-1;n--;){var i=r[n];n!==a&&i===e||(e=i,Array.prototype.splice.call(t,i,1))}return t}static findIndex(t,r,e){var n;if(t=t.slice(e),"function"==typeof r){for(n=0;n<t.length;n++)if(r(t[n]))return n}else if(Array.isArray(r))for(n=0;n<t.length;n++){var a=r[0],i=!0;if(r.length>1&&(i=r[1]),t[n][a]===i)return n}else for(n=0;n<t.length;n++)if(t[n]===r)return n;return-1}static concat(){var t=arguments.length;if(!t)return[];for(var r=arguments[0],e=1;e<t;)r=r.concat(arguments[e]),e++;return r}static isNumber(t){return"number"==typeof t}static indexOf(t,r,e){return(t=t.slice(e)).indexOf(r)}static join(t,r){if(null===t)return"";var e="";return t.forEach((function(t){e+=t+r})),e.substr(0,e.length-1)}static split(t,r,e){return t.split(r,e)}static max(t){if(t&&t.length){for(var r,e=0;e<t.length;e++)0===e?r=t[0]:r<t[e]&&(r=t[e]);return r}}static drop(t,r){return(null===t?0:t.length)?t.slice(r):[]}static flattenDeep(r){return r.reduce((function(r,e){return r.concat(Array.isArray(e)?t.flattenDeep(e):e)}),[])}static uniq(t){let r=[];return t.forEach((function(t){-1===r.indexOf(t)&&r.push(t)})),r}static isNaN(r){return t.isNumber(r)&&r!==+r}static chunk(t,r){if(!(null===t?0:t.length)||r<1)return[];for(var e=[];t.length>r;)e.push(t.slice(0,r)),t=t.slice(r);return e.push(t),e}static toFinite(t){var r=1/0;return t?(t=Number(t))===r||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}static isObject(t){var r=typeof t;return null!==t&&("object"===r||"function"===r)}static isLength(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=t.MAX_SAFE_INTEGER}static _isArrayLike(r){return null!==r&&t.isLength(r.length)}static maxBy(t,r){if(t&&t.length){for(var e,n,a=0;a<t.length;a++)0===a?(e=r(t[0]),n=t[0]):e<t[a]&&(e=t[a],n=t[a]);return n}}static minBy(t,r){if(t&&t.length){let n,a;for(var e=0;e<t.length;e++)0===e?(n=r(t[0]),a=t[0]):n>t[e]&&(n=r(t[e]),a=t[e]);return a}}static sumBy(t,r){let e=0;for(let n in t)e+=r(t[n]);return e}static countBy(t,r){let e={};for(let n in t){let t=r(n);e.hasOwnProperty(t)?e[t]+=1:e[t]=1}return e}static random(t,r){var e=Math.random()*(r-t+1)+t;return Math.floor(e)}},n(i,"MAX_SAFE_INTEGER",9007199254740991),a=s))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/fightScene.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./clientEvent.ts","./localConfig.ts","./playerData.ts","./loadsh.ts","./uiManager.ts","./audioManager.ts","./SDK.ts","./gameLogic.ts","./linkContent.ts","./effectGroup.ts","./fightUI.ts"],(function(e){"use strict";var t,i,s,n,o,h,r,a,l,c,f,p,d,u,g,v,w,C,I,S,O;return{setters:[function(e){t=e.cclegacy,i=e._decorator,s=e.Component,n=e.profiler,o=e.UITransform,h=e.Rect},function(e){r=e.applyDecoratedDescriptor,a=e.initializerDefineProperty,l=e.defineProperty},function(e){c=e.constants},function(e){f=e.clientEvent},function(e){p=e.localConfig},function(e){d=e.playerData},function(e){u=e.loadsh},function(e){g=e.uiManager},function(e){v=e.AudioManager},function(e){w=e.default},function(e){C=e.GameLogic},function(e){I=e.LinkContent},function(e){S=e.EffectGroup},function(e){O=e.FightUI}],execute:function(){var F,E,L,A,P;t._RF.push({},"aa4e3RbxGxHyqBA31aqKi9Q","fightScene",void 0);const{ccclass:U,property:m}=i;e("FightScene",U("FightScene")((L=r((E=class extends s{constructor(...e){super(...e),a(this,"nodeLinkContent",L,this),a(this,"nodeFightUI",A,this),a(this,"nodeEffectGroup",P,this),l(this,"linkContent",void 0),l(this,"fightUI",null),l(this,"effectGroup",void 0),l(this,"isLevelOver",void 0),l(this,"spareStar",void 0),l(this,"allFlyFinishCb",void 0),l(this,"reliveByAd",void 0),l(this,"isLevelStart",void 0),l(this,"dictPropsUseTimes",void 0),l(this,"isShowOperationUI",void 0)}start(){n.hideStats(),d.instance.startNewLevel(),this.linkContent=this.nodeLinkContent.getComponent(I),this.fightUI=this.nodeFightUI.getComponent(O),this.effectGroup=this.nodeEffectGroup.getComponent(S),this.effectGroup.show(this),this.onNewLevel(),v.instance.stop(c.AUDIO_MUSIC.BACKGROUND),v.instance.playMusic(c.AUDIO_MUSIC.FIGHT,!0)}onEnable(){f.on("levelFinished",this.onLevelFinished,this),f.on("gameOver",this.onGameOver,this),f.on("newLevel",this.onNewLevel,this),f.on("useProp",this.useProp,this)}onDisable(){f.off("levelFinished",this.onLevelFinished,this),f.off("gameOver",this.onGameOver,this),f.off("newLevel",this.onNewLevel,this),f.off("useProp",this.useProp,this),v.instance.stop(c.AUDIO_MUSIC.FIGHT)}onLevelFinished(){this.isLevelOver=!0,d.instance.spareStep>0&&!d.instance.curLevelInfo.infinite?this.showBonusTime((()=>{let e=d.instance.spareStep;if(this.spareStar=e,e>0){this.allFlyFinishCb=this.triggerAllSpecialEffect;for(let t=0;t<e;t++)this.scheduleOnce((()=>{d.instance.reduceStep(),f.dispatchEvent("updateStep");let e=this.fightUI.getStepWorldPos(),t=u.random(0,1)?c.SPECIAL_EFFECT.HORIZONTAL:c.SPECIAL_EFFECT.VERTICAL;this.effectGroup.showStarAfterLevelFinished(e,t,this.showFlyEffectOver,this)}),.2*t)}else this.triggerAllSpecialEffect()})):this.triggerAllSpecialEffect()}showBonusTime(e){v.instance.playSound(c.AUDIO_SOUND.BONUS_TIME,!1),this.scheduleOnce((()=>{this.effectGroup.showBonusTime((()=>{this.linkContent.showLinkFinishEffect(e)}))}),.2)}onGameOver(){this.isLevelOver||(this.isLevelOver=!0,this.reliveByAd?this.showGameOverUI():(this.reliveByAd=!0,g.instance.showDialog("fight/adStep",[e=>{e?this.showGameOverUI():(d.instance.addStep(5),this.isLevelOver=!1,f.dispatchEvent("updateStep",!1))}])))}showGameOverUI(){w.onEvent("level_end",d.instance.level.toString(),"0"),g.instance.showDialog("fight/balanceFailed")}onNewLevel(){w.onEvent("level_begin",d.instance.level.toString(),""),this.isLevelStart=!1,this.isLevelOver=!1,this.reliveByAd=!1,this.dictPropsUseTimes={},this.effectGroup.removeLastEffect(),this.linkContent.dictCakes?this.linkContent.showAllLinkItem(!1,(()=>{this.linkContent.show(this),this.fightUI.show(this),d.instance.isNeedOpenUnlockPanel()?g.instance.showDialog("fight/unLockProp",[this.showTargets.bind(this),this.fightUI]):this.showTargets()})):(this.linkContent.show(this),this.fightUI.show(this),d.instance.hasSeenGuide()?d.instance.isNeedOpenUnlockPanel()?g.instance.showDialog("fight/unLockProp",[this.showTargets.bind(this),this.fightUI]):this.showTargets():g.instance.showDialog("fight/fightGuide",[()=>{d.instance.finishSeenGuide(),d.instance.isNeedOpenUnlockPanel()?g.instance.showDialog("fight/unLockProp",[this.showTargets.bind(this)]):this.showTargets()}])),this.linkContent.stopGuideHand()}showTargets(){this.fightUI.showTargetsAni((()=>{this.showAdRewardAsk(),this.isLevelStart=!0}))}showAdRewardAsk(){d.instance.level>3?g.instance.showDialog("fight/adProp",[e=>{e?this.showAdRewardOver(!1):this.showAdRewardOver(!0)}]):this.showAdRewardOver(!1)}showAdRewardOver(e){if(e){this.spareStar=2,this.allFlyFinishCb=null;for(let e=0;e<2;e++)this.scheduleOnce((()=>{let e=this.fightUI.getStepWorldPos(),t=u.random(0,1)?c.SPECIAL_EFFECT.HORIZONTAL:c.SPECIAL_EFFECT.VERTICAL;this.effectGroup.showStarAfterLevelFinished(e,t,this.showFlyEffectOver,this)}),.2*e)}}showFlyEffect(e,t){this.allFlyFinishCb=t,this.spareStar=0;for(let t in e){let i=this.linkContent.getItemWorldPosByIndex(t);this.spareStar++,this.effectGroup.showStarFlyEffect(i,e[t],this.showFlyEffectOver,this)}}showFlyEffectOver(e,t,i){this.spareStar--,e||(this.spareStar=this.spareStar<0?0:this.spareStar,this.linkContent.addEffect(t,i),0===this.spareStar&&this.allFlyFinishCb&&this.allFlyFinishCb())}triggerAllSpecialEffect(){this.linkContent.triggerAllSpecialEffect((()=>{this.scheduleOnce((()=>{this.linkContent.fillEmptyCell()}),.3),this.scheduleOnce((()=>{d.instance.balanceOverAdTimes||(d.instance.balanceOverAdTimes=1),d.instance.balanceOverAdTimes++,d.instance.balanceOverAdTimes>2?(C.instance.showInterStitialAd((e=>{g.instance.showDialog("fight/balance")})),d.instance.balanceOverAdTimes=1):g.instance.showDialog("fight/balance")}),2)}))}getLinkContentRect(){let e=this.nodeLinkContent.position;const t=this.nodeLinkContent.getComponent(o);return new h(e.x,e.y,t.width,t.height)}isPropCanUse(e){let t=p.instance.queryByID("prop",e);if(t){if(this.dictPropsUseTimes.hasOwnProperty(e)){if(this.dictPropsUseTimes[e]>=t.limit)return!1}return!0}return!0}showPropOperationUI(e,t){this.linkContent.stopGuideHand(),this.isShowOperationUI=!0,g.instance.showDialog("fight/fightPropsOperation",[e,t,this.getLinkContentRect(),this,()=>{this.isShowOperationUI=!1}])}useProp(e,t){switch(e){case c.PROP_ID.HAMMER:if(!t||t<0)return;this.linkContent.destoryCake(t);break;case c.PROP_ID.MAGIC:if(!t||t<0)return;let e=this.fightUI.getStepWorldPos();this.spareStar=1;let i=u.random(0,1)?c.SPECIAL_EFFECT.HORIZONTAL:c.SPECIAL_EFFECT.VERTICAL;this.allFlyFinishCb=null,this.effectGroup.showStarAfterLevelFinished(e,i,this.showFlyEffectOver,this,t);break;case c.PROP_ID.REFRESH:if(this.linkContent.stopGuideHand(),!this.linkContent.refreshLinkItems())return;break;case c.PROP_ID.INFINITE:d.instance.curLevelInfo.infinite=!0,this.fightUI.showInfinite()}this.dictPropsUseTimes.hasOwnProperty(e)?this.dictPropsUseTimes[e]++:this.dictPropsUseTimes[e]=1,d.instance.costProp(e),f.dispatchEvent("updateProp",e)}}).prototype,"nodeLinkContent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=r(E.prototype,"nodeFightUI",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(E.prototype,"nodeEffectGroup",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=E))||F);t._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.defineProperty}],execute:function(){e._RF.push({},"b08f08kiOlEA7e6qUWa7AnA","constant",void 0);class s{}t("constant",s),n(s,"GAME_NAME","template"),n(s,"GAME_VERSION","1.0.1"),n(s,"GAME_FRAME",60),n(s,"GAME_INIT_FRAME",60),n(s,"LOCAL_CACHE",{PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"}),e._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy,n=e.director}],execute:function(){e({init:l,t:function(e,t){const n=window;if(!n.languages)return e;const r=e.split(".");let l=n.languages[a];for(let e=0;e<r.length;e++)if(l=l[r[e]],!l)return"";if(t)for(let e in t)l=l.replace("%{"+e+"}",t[e]);return l||""},updateSceneRenderers:o}),t._RF.push({},"b3f01X4Ik5LEbIPKXZr3JWD","LanguageData",void 0);let a=e("_language","zh"),r=e("ready",!1);function l(t){r=e("ready",!0),a=e("_language",t)}function o(){const e=n.getScene().children,t=[],a=[],r=[];for(let n=0;n<e.length;++n){let l=e[n].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,l);let o=e[n].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(a,o);let i=e[n].getComponentsInChildren("LocalizedMaterial");Array.prototype.push.apply(r,i)}for(let e=0;e<t.length;++e){let n=t[e];n.node.active&&n.updateLabel()}for(let e=0;e<a.length;++e){let t=a[e];t.node.active&&t.updateSprite()}for(let e=0;e<r.length;++e){let t=r[e];t.node.active&&t.updateMat()}}window._languageData={get language(){return a},init(e){l(e)},updateSceneRenderers(){o()}},t._RF.pop()}}}));

System.register("chunks:///_virtual/fightHandGuide.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,i,n,o,s,a,r,c;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Component,o=e.TweenSystem,s=e.tween,a=e.Animation},function(e){r=e.applyDecoratedDescriptor,c=e.initializerDefineProperty}],execute:function(){var l,h,u;t._RF.push({},"b57f2U4+lFHWYmyeEfh9N8U","fightHandGuide",void 0);const{ccclass:d,property:p}=i;e("FightHandGuide",d("FightHandGuide")((u=r((h=class extends n{constructor(...e){super(...e),c(this,"ani",u,this)}moveOverCallback(e,t){t&&t(e)}showGuide(e,t){this.node.setPosition(e[0]),o.instance.ActionManager.removeAllActionsFromTarget(this.node),t&&t(0),this.ani.play("handDown");let i=s(this.node);this.ani.once(a.EventType.FINISHED,(()=>{for(let n=1;n<e.length;n++){let o=e[n],a=e[n-1],r=o.clone().subtract(a).length();i.then(s().to(r/150,{position:o}).call((()=>{this.moveOverCallback(n,t)})))}i.call((()=>{this.ani.play("handUp"),this.ani.once(a.EventType.FINISHED,(()=>{this.scheduleOnce((()=>{this.showGuide(e,t)}),.5)}),this)})),i.start()}),this)}}).prototype,"ani",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=h))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/fightUI.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./clientEvent.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./audioManager.ts","./fightProp.ts","./LanguageData.ts","./fightTarget.ts","./showTarget.ts"],(function(t){"use strict";var e,r,i,n,o,s,a,h,l,c,p,u,g,f,d,S,b,v,I,m,P;return{setters:[function(t){e=t.cclegacy,r=t._decorator,i=t.Component,n=t.UITransform,o=t.Vec3,s=t.instantiate,a=t.Animation},function(t){h=t.applyDecoratedDescriptor,l=t.initializerDefineProperty,c=t.defineProperty},function(t){p=t.resourceUtil},function(t){u=t.constants},function(t){g=t.clientEvent},function(t){f=t.localConfig},function(t){d=t.playerData},function(t){S=t.uiManager},function(t){b=t.AudioManager},function(t){v=t.FightProp},function(t){I=t.t},function(t){m=t.FightTarget},function(t){P=t.ShowTarget}],execute:function(){var w,T,C,y,D,A,_,R,N,U,k,E,z,F;e._RF.push({},"b70bahPE9BEa6kDxgxn3iLv","fightUI",void 0);const{ccclass:L,property:M}=r;t("FightUI",L("FightUI")((C=h((T=class extends i{constructor(...t){super(...t),l(this,"nodeTargets",C,this),l(this,"pfTarget",y,this),l(this,"lbStep",D,this),l(this,"lbLevel",A,this),l(this,"lbScore",_,this),l(this,"progress",R,this),l(this,"nodeProBar",N,this),l(this,"arrStars",U,this),l(this,"arrStarsBg",k,this),l(this,"nodePropGroup",E,this),l(this,"pfFightProp",z,this),l(this,"nodeInfinite",F,this),c(this,"targetProgress",void 0),c(this,"_fightScene",void 0),c(this,"arrTargetNode",void 0)}start(){this.startCustomerRandAction()}onEnable(){g.on("updateStep",this.updateStepInfo,this),g.on("updateScore",this.updateScore,this)}onDisable(){g.off("updateStep",this.updateStepInfo,this),g.off("updateScore",this.updateScore,this)}show(t){this.targetProgress=null,this._fightScene=t,this.initTargets(),this.updateLevelInfo(),this.updateStepInfo(),this.updateScore(),this.initProps(),this.showInfinite(),0===d.instance.score&&this.progress.progress>0&&(this.progress.progress=0,this.arrStars[0].active=!1,this.arrStars[1].active=!1,this.arrStars[2].active=!1)}updateLevelInfo(){this.lbLevel.string=d.instance.level}updateStepInfo(t){!1===t?(this.lbStep.node.active=!1,this._fightScene.effectGroup.showUnlimitedOrNumber(this.nodeInfinite.getComponent(n).convertToWorldSpaceAR(new o(0,0,0)),!1,d.instance.spareStep)):d.instance.curLevelInfo.infinite||void 0!==t||(this.lbStep.node.active=!0,this.lbStep.string=d.instance.spareStep)}updateScore(){let t=d.instance.score;this.lbScore.string=t;let e=0,r=d.instance.arrStars;t<r[0]?e=t/r[0]*.33:t<r[1]?e=.33+(t-r[0])/(r[1]-r[0])*.33:(e=.67+(t-r[1])/(r[2]-r[1])*.33,e>=1&&(e=1)),this.targetProgress=e}initTargets(){this.nodeTargets.removeAllChildren(),this.arrTargetNode=[];for(let t in d.instance.dictTargets){let e=s(this.pfTarget);e.parent=this.nodeTargets,e.getComponent(m).show(t,!0),this.arrTargetNode.push(e)}}getTargetWorldPos(t){for(let e=0;e<this.arrTargetNode.length;e++){let r=this.arrTargetNode[e].getComponent(m);if(r.cake===t)return r.getCakeWorldPos()}return null}showTargetsAni(t){p.createUI("fight/showTarget",((e,r)=>{e?g.dispatchEvent("showTargetCake","all"):r.getComponent(P).show(this,t)}),this.node)}getStepWorldPos(){return this.lbStep.node.getComponent(n).convertToWorldSpaceAR(new o(0,0,0))}getProgressBarWorldPos(){const t=this.nodeProBar.getComponent(n);return t.convertToWorldSpaceAR(new o(t.width,0,0))}onBtnSettingClick(){S.instance.showDialog("dialog/gameSetting")}onBtnQuestionClick(){S.instance.showDialog("fight/fightGuide")}startCustomerRandAction(){let t=3+3*Math.random();this.scheduleOnce((()=>{if(this.arrTargetNode.length<=0)return void this.startCustomerRandAction();let t=Math.floor(Math.random()*this.arrTargetNode.length);this.arrTargetNode[t].getComponent(m).playIdle(),this.startCustomerRandAction()}),t)}update(t){if(null!==this.targetProgress){let e=this.progress.progress;if(this.targetProgress!==e){let r=e;this.targetProgress>e?e+=t:e-=t,e=this.targetProgress>0?e>this.targetProgress?this.targetProgress:e:e<0?0:e,this.progress.progress=e,e>=1&&r<1?this.showStar(2):r>=1&&e<1?this.arrStars[2].active=!1:e>=.66&&(r<.66||r>=1)?(this.arrStars[0].active=!0,r<.66&&this.showStar(1)):e>=.33&&e<.66&&(r<.33||r>=.66)?(this.arrStars[1].active=!1,r<.33&&this.showStar(0)):e<.33&&r>=.33&&(this.arrStars[0].active=!1,this.arrStars[1].active=!1,this.arrStars[2].active=!1)}}}showStar(t){this.arrStars[t].active||p.createEffect("fight/homeStar/homeStar",((e,r)=>{if(e)return void(this.arrStars[t].active=!0);b.instance.playSound(u.AUDIO_SOUND.FINISH_STAR,!1);let i=r.getComponent(a);i.play("homeStarShow"),i.once(a.EventType.FINISHED,(()=>{r&&r.destroy(),this.arrStars[t].active=!0}))}),this.arrStarsBg[t])}initProps(){this.nodePropGroup.removeAllChildren(),this.onItemClick=this.onItemClick.bind(this);let t=f.instance.getTable("prop");for(let e in t){let r=s(this.pfFightProp);r.parent=this.nodePropGroup;let i=r.getComponent(v);i.show(t[e]),i.setClickListener(this.onItemClick)}}onItemClick(t,e){d.instance.getPropAmount(t.ID)<=0?S.instance.showTips(I("fight.propNoEnough")):this._fightScene.isPropCanUse(t.ID)?(t.ID===u.PROP_ID.INFINITE&&this._fightScene.effectGroup.useInfiniteProp(e,this.nodeInfinite.getComponent(n).convertToWorldSpaceAR(new o(0,0,0))),t.ID===u.PROP_ID.HAMMER||t.ID===u.PROP_ID.MAGIC?this._fightScene.showPropOperationUI(t,e):g.dispatchEvent("useProp",t.ID)):S.instance.showTips(I("fight.propExceedMaxTimes"))}showInfinite(){if(d.instance.curLevelInfo&&d.instance.curLevelInfo.infinite)return this.lbStep.node.active=!1,void(this.nodeInfinite.active=!0);this.lbStep.node.active=!0,this.nodeInfinite.active=!1}showUnlockProp(t,e){let r=this.nodePropGroup.children[t-1].getComponent(n).convertToWorldSpaceAR(new o(0,0,0));this._fightScene.effectGroup.showUnlockProp(r,t,e)}}).prototype,"nodeTargets",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=h(T.prototype,"pfTarget",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=h(T.prototype,"lbStep",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=h(T.prototype,"lbLevel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=h(T.prototype,"lbScore",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=h(T.prototype,"progress",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=h(T.prototype,"nodeProBar",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=h(T.prototype,"arrStars",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=h(T.prototype,"arrStarsBg",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=h(T.prototype,"nodePropGroup",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=h(T.prototype,"pfFightProp",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=h(T.prototype,"nodeInfinite",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=T))||w);e._RF.pop()}}}));

System.register("chunks:///_virtual/adProp.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./uiManager.ts","./gameLogic.ts"],(function(t){"use strict";var e,i,a,n,r,s,c,l,o;return{setters:[function(t){e=t.cclegacy,i=t._decorator,a=t.Component},function(t){n=t.applyDecoratedDescriptor,r=t.initializerDefineProperty,s=t.defineProperty},function(t){c=t.constants},function(t){l=t.uiManager},function(t){o=t.GameLogic}],execute:function(){var h,u,p,d,b,R;e._RF.push({},"b82eaehqfxOHIyJ+LFuGZ1c","adProp",void 0);const{ccclass:A,property:f}=i;t("AdProp",A("AdProp")((p=n((u=class extends a{constructor(...t){super(...t),r(this,"imgAd",p,this),r(this,"imgShare",d,this),r(this,"ndBtnGoStart",b,this),r(this,"spBtn",R,this),s(this,"callback",void 0),s(this,"rewardType",null)}show(t){this.callback=t,this.rewardType=c.OPEN_REWARD_TYPE.AD,o.instance.getOpenRewardType(c.SHARE_FUNCTION.START_REWARD,((t,e)=>{if(!t)switch(this.rewardType=e,e){case c.OPEN_REWARD_TYPE.AD:this.spBtn.spriteFrame=this.imgAd;break;case c.OPEN_REWARD_TYPE.SHARE:this.spBtn.spriteFrame=this.imgShare;break;case c.OPEN_REWARD_TYPE.NULL:this.onBtnCloseClick()}})),this.ndBtnGoStart.active=!1,this.scheduleOnce((()=>{this.ndBtnGoStart.active=!0}),c.NORMAL_SHOW_TIME)}onBtnCloseClick(){this.callback&&this.callback("close"),this.close()}onBtnPlayClick(){this.rewardType===c.OPEN_REWARD_TYPE.AD?o.instance.showRewardAd((t=>{t?this.callback&&this.callback("failed",t):(this.close(),this.callback&&this.callback(null))})):o.instance.share(c.SHARE_FUNCTION.START_REWARD,{},(t=>{t||this.close(),this.callback&&this.callback(t)}))}close(){l.instance.hideDialog("fight/adProp")}}).prototype,"imgAd",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=n(u.prototype,"imgShare",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=n(u.prototype,"ndBtnGoStart",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(u.prototype,"spBtn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=u))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/setting.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./uiManager.ts","./audioManager.ts"],(function(n){"use strict";var i,e,t,s,o,u,r;return{setters:[function(n){i=n.cclegacy,e=n._decorator,t=n.Component},function(n){s=n.applyDecoratedDescriptor,o=n.initializerDefineProperty},function(n){u=n.uiManager},function(n){r=n.AudioManager}],execute:function(){var l,c,a,p,f,d,h,b,g,M,S,O,y;i._RF.push({},"ba66atexAVHHJdMxg2byzWt","setting",void 0);const{ccclass:w,property:m}=e;n("Setting",w("Setting")((a=s((c=class extends t{constructor(...n){super(...n),o(this,"versionLabel",a,this),o(this,"ndMusicOpen",p,this),o(this,"ndMusicClose",f,this),o(this,"ndSoundOpen",d,this),o(this,"ndSoundClose",h,this),o(this,"spMusicIcon",b,this),o(this,"spSoundIcon",g,this),o(this,"sfMusicOn",M,this),o(this,"sfMusicOff",S,this),o(this,"sfSoundOn",O,this),o(this,"sfSoundOff",y,this)}show(){this.node.active=!0;let n=r.instance.getAudioSetting(!0),i=r.instance.getAudioSetting(!1);this.ndMusicOpen.active=!n,this.ndMusicClose.active=n,this.ndSoundOpen.active=!i,this.ndSoundClose.active=i,this.spMusicIcon.spriteFrame=!0===this.ndMusicOpen.active?this.sfMusicOff:this.sfMusicOn,this.spSoundIcon.spriteFrame=!0===this.ndSoundOpen.active?this.sfSoundOff:this.sfSoundOn}onBtnMusicOpenClick(){r.instance.openMusic(),this.show()}onBtnMusicCloseClick(){r.instance.closeMusic(),this.show()}onBtnSoundOpenClick(){r.instance.openSound(),this.show()}onBtnSoundCloseClick(){r.instance.closeSound(),this.show()}onBtnCloseClick(){u.instance.hideDialog("dialog/setting")}}).prototype,"versionLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=s(c.prototype,"ndMusicOpen",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=s(c.prototype,"ndMusicClose",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=s(c.prototype,"ndSoundOpen",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=s(c.prototype,"ndSoundClose",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=s(c.prototype,"spMusicIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=s(c.prototype,"spSoundIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=s(c.prototype,"sfMusicOn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=s(c.prototype,"sfMusicOff",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=s(c.prototype,"sfSoundOn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=s(c.prototype,"sfSoundOff",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=c))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/targetCake.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts"],(function(e){"use strict";var t,r,i,n,o,s;return{setters:[function(e){t=e.cclegacy,r=e._decorator,i=e.Component},function(e){n=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){s=e.resourceUtil}],execute:function(){var a,c,l,u;t._RF.push({},"bd95fbKL6dI6r423PTMarGm","targetCake",void 0);const{ccclass:p,property:b}=r;e("TargetCake",p("TargetCake")((l=n((c=class extends i{constructor(...e){super(...e),o(this,"spCakeIcon",l,this),o(this,"lbCakeNum",u,this)}setInfo(e){let t=e.split("-");s.setCakeIcon(t[0],this.spCakeIcon,(()=>{})),this.lbCakeNum.string=t[1]}}).prototype,"spCakeIcon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=n(c.prototype,"lbCakeNum",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=c))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./LanguageData.ts"],(function(e){"use strict";var t,i,r,n,s,a,o,p,c,l;return{setters:[function(e){t=e.cclegacy,i=e.SpriteFrame,r=e._decorator,n=e.Component},function(e){s=e.applyDecoratedDescriptor,a=e.initializerDefineProperty,o=e.defineProperty},function(e){p=e.ready,c=e.init,l=e._language}],execute:function(){var u,d,h,f,g,m,z,L,y,b,S;t._RF.push({},"c05c25C4xNAupWYMB93tIzp","LocalizedSprite",void 0);const{ccclass:F,property:_,executeInEditMode:v}=r;let x=e("LocalizedSpriteItem",(u=F("LocalizedSpriteItem"),d=_({type:i}),u((g=s((f=class{constructor(){a(this,"language",g,this),a(this,"spriteFrame",m,this)}}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),m=s(f.prototype,"spriteFrame",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));e("LocalizedSprite",(z=F("LocalizedSprite"),L=_({type:x}),z(y=v((S=s((b=class extends n{constructor(...e){super(...e),o(this,"sprite",null),a(this,"spriteList",S,this)}onLoad(){p||c("zh"),this.fetchRender()}fetchRender(){let e=this.getComponent("cc.Sprite");if(e)return this.sprite=e,void this.updateSprite()}updateSprite(){for(let e=0;e<this.spriteList.length;e++){const t=this.spriteList[e];if(t.language===l){this.sprite.spriteFrame=t.spriteFrame;break}}}}).prototype,"spriteList",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=b))||y)||y));t._RF.pop()}}}));

System.register("chunks:///_virtual/gameSetting.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./sceneManager.ts","./uiManager.ts","./audioManager.ts","./gameLogic.ts"],(function(n){"use strict";var e,t,i,o,s,c,a,r,u;return{setters:[function(n){e=n.cclegacy,t=n._decorator,i=n.Component},function(n){o=n.applyDecoratedDescriptor,s=n.initializerDefineProperty},function(n){c=n.SceneManager},function(n){a=n.uiManager},function(n){r=n.AudioManager},function(n){u=n.GameLogic}],execute:function(){var l,d,g,p,h,S;e._RF.push({},"c0ebf+rxRpMory9l2TqXwQ/","gameSetting",void 0);const{ccclass:f,property:C}=t;n("gameSetting",f("gameSetting")((g=o((d=class extends i{constructor(...n){super(...n),s(this,"ndMusicOpen",g,this),s(this,"ndMusicClose",p,this),s(this,"ndSoundOpen",h,this),s(this,"ndSoundClose",S,this)}show(){let n=r.instance.getAudioSetting(!0),e=r.instance.getAudioSetting(!1);this.ndMusicOpen.active=!n,this.ndMusicClose.active=n,this.ndSoundOpen.active=!e,this.ndSoundClose.active=e}onBtnHomeClick(){c.instance.loadScene("pve",[],((n,e)=>{n&&console.error(n.message||n)}))}onBtnPlayAgainBtn(){this.onBtnCloseClick(),u.instance.resetLevel()}onBtnMusicOpenClick(){r.instance.openMusic(),this.show()}onBtnMusicCloseClick(){r.instance.closeMusic(),this.show()}onBtnSoundOpenClick(){r.instance.openSound(),this.show()}onBtnSoundCloseClick(){r.instance.closeSound(),this.show()}onBtnCloseClick(){a.instance.hideDialog("dialog/gameSetting")}}).prototype,"ndMusicOpen",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=o(d.prototype,"ndMusicClose",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=o(d.prototype,"ndSoundOpen",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=o(d.prototype,"ndSoundClose",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=d))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedRichText.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./LanguageData.ts"],(function(e){"use strict";var t,i,r,c,n,o,a,l,s,u;return{setters:[function(e){t=e.cclegacy,i=e._decorator,r=e.Component,c=e.RichText},function(e){n=e.applyDecoratedDescriptor,o=e.defineProperty,a=e.initializerDefineProperty},function(e){l=e.ready,s=e.init,u=e.t}],execute:function(){var h,d,p;t._RF.push({},"c26a9/38uhBPI6Qo8Me5Pf1","LocalizedRichText",void 0);const{ccclass:f,property:y,executeInEditMode:b}=i;e("LocalizedRichText",f("LocalizedRichText")(h=b((p=n((d=class extends r{constructor(...e){super(...e),o(this,"label",null),a(this,"key",p,this)}onLoad(){l||s("zh"),this.fetchRender()}fetchRender(){let e=this.getComponent(c);if(e)return this.label=e,void this.updateLabel()}updateLabel(){this.label&&(this.label.string=u(this.key))}}).prototype,"key",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=d))||h)||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/tips.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts"],(function(t){"use strict";var i,e,o,n,s,r,c,a,l,p,u,h;return{setters:[function(t){i=t.cclegacy,e=t.Label,o=t.UIOpacity,n=t._decorator,s=t.Component,r=t.UITransform,c=t.isValid,a=t.tween,l=t.Vec3},function(t){p=t.applyDecoratedDescriptor,u=t.initializerDefineProperty},function(t){h=t.poolManager}],execute:function(){var d,g,y,b,f,m,v;i._RF.push({},"c93c6JdRlZBq6pCuKII6jKN","tips",void 0);const{ccclass:I,property:B}=n;t("tips",(d=I("tips"),g=B(e),y=B(o),d((m=p((f=class extends s{constructor(...t){super(...t),u(this,"lbTips",m,this),u(this,"UIOpacityBg",v,this)}show(t,i){var e,o,n;let s=null===(e=this.lbTips)||void 0===e||null===(o=e.node)||void 0===o||null===(n=o.getComponent(r))||void 0===n?void 0:n.contentSize;c(s)?(this.lbTips.string=t,this.UIOpacityBg.opacity=255,this.node.setPosition(0,220,0),this.scheduleOnce((()=>{a(this.node).to(.9,{position:new l(0,450,0)},{easing:"smooth"}).call((()=>{i&&i(),h.instance.putNode(this.node)})).start(),a(this.UIOpacityBg).to(.6,{opacity:220},{easing:"smooth"}).to(.3,{opacity:0},{easing:"smooth"}).start()}),.8)):h.instance.putNode(this.node)}}).prototype,"lbTips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=p(f.prototype,"UIOpacityBg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=f))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/elasticLimit.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,i,o,s,n,c,l,r;return{setters:[function(t){e=t.cclegacy,i=t._decorator,o=t.ScrollView,s=t.Node,n=t.EventTouch,c=t.UITransform},function(t){l=t.applyDecoratedDescriptor,r=t.initializerDefineProperty}],execute:function(){var a,h,u,d;e._RF.push({},"cad33aLu5lGpY9kxRqQAXUn","elasticLimit",void 0);const{ccclass:p,property:_}=i;t("ElasticLimit",p("ElasticLimit")((u=l((h=class extends o{constructor(...t){super(...t),r(this,"elasticValueX",u,this),r(this,"elasticValueY",d,this)}onLoad(){this.node.on(s.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0)}_onTouchMoved(t,e){if(!this.enabledInHierarchy)return;if(this._hasNestedViewGroup(t,e))return;let i=t.touch;if(this.content&&this._handleMoveLogic(i),this.cancelInnerEvents){if(i.getLocation().subtract(i.getStartLocation()).length>7&&!this._touchMoved&&t.target!==this.node){let e=new n(t.getTouches(),t.bubbles,s.EventType.TOUCH_CANCEL);e.type=s.EventType.TOUCH_CANCEL,e.touch=t.touch,e.simulate=!0,t.target.dispatchEvent(e),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}}_handleMoveLogic(t){let e=t.getDelta();this._processDeltaMove(e)}_processDeltaMove(t){this._scrollChildren(t),this._gatherTouchMove(t)}_scrollChildren(t){this._clampDelta(t);let e,i=t;this.elastic&&(e=this._getHowMuchOutOfBoundary(),i.x*=0===e.x?1:this.elasticValueX,i.y*=0===e.y?1:this.elasticValueY),this.elastic||(e=this._getHowMuchOutOfBoundary(i),i.add(e));let o=-1;const s=this.content.getComponent(c),n=this.content.position;if(i.y>0){n.y-s.anchorY*s.height+i.y>this._bottomBoundary&&(o="scroll-to-bottom")}else if(i.y<0){n.y-s.anchorY*s.height+s.height+i.y<=this._topBoundary&&(o="scroll-to-top")}else if(i.x<0){n.x-s.anchorX*s.width+s.width+i.x<=this._rightBoundary&&(o="scroll-to-right")}else if(i.x>0){n.x-s.anchorX*s.width+i.x>=this._leftBoundary&&(o="scroll-to-left")}this._moveContent(i,!1),0===i.x&&0===i.y||(this._scrolling||(this._scrolling=!0,this._dispatchEvent("scroll-began")),this._dispatchEvent("scrolling")),-1!==o&&this._dispatchEvent(o)}}).prototype,"elasticValueX",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),d=l(h.prototype,"elasticValueY",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),a=h))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/csvManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,r,n;return{setters:[function(e){t=e.cclegacy,r=e._decorator},function(e){n=e.defineProperty}],execute:function(){var i,s,u;t._RF.push({},"d7554BuqnJLAKibwVUWte5P","csvManager",void 0);const{ccclass:a,property:l}=r;var o=[",",";","\t","|","^"],c=["\r\n","\r","\n"],h=function(e,t,r,n){return r instanceof Array?"number"===r[t]?Number(n[t]):"boolean"===r[t]?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:Number(n[t])},f={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:o[0],newline:c[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,assign:function(){for(var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1),n=0,i=r.length;n<i;n++)for(var s in r[n])t[s]=r[n][s];return t},map:function(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r[n]=t(e[n],n);return r},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:e},buildObjectConstructor:function(e,t,r){return function(n){var i=new Object,s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,h(t[i],i,r,n))})):e.forEach((function(e,r){s(e,h(t[r],r,null,n))})),i}},buildArrayConstructor:function(e,t,r){return function(n){var i=new Array(t.length),s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,h(t[i],i,r,n))})):e.forEach((function(e,r){s(e,h(t[r],r,null,n))})),i}},frequency:function(e,t,r){void 0===r&&(r=!1);for(var n=0,i=0,s=this.getLimit(r,e.length);i<s&&-1!==(i=e.indexOf(t,i));)i+=1,n++;return n},mostFrequent:function(e,t,r){for(var n,i=t.length-1;i>=0;i--)this.frequency(e,t[i],r)>0&&(n=t[i]);return n||t[0]},unsafeParse:function(e,t,r){var n,i,s=e.split(t.newline);function u(e){var r=e.shift();if(r.indexOf('"')>=0){for(var n=0,i=0,s=0;e.length>0&&(-1!==(n=r.indexOf('"',i))||s%2!=0);)-1!==n?(i=n+1,s++):r=r+t.newline+e.shift();var u,a=[],l=0,o=0,c=0,h=r.length;for(var f in r){if(!r.hasOwnProperty(f))continue;let e=parseInt(f);var d=r[f];0===e&&'"'===d&&(l++,o=1),'"'===d&&(l++,r[e-1]===t.delimiter&&o===e&&o++),'"'===d&&l%2==0&&(r[e+1]!==t.delimiter&&e+1!==h||(c=e,u=r.substring(o,c),a.push(u),c=o=c+2)),d===t.delimiter&&l%2==0&&((c=e)>o?(u=r.substring(o,c),a.push(u),c=o=c+1):c===o&&(a.push(""),c=o=c+1))}return(c=h)>=o&&(u=r.substring(o,c),a.push(u)),a}return r.split(t.delimiter)}for(t.skip>0&&s.splice(t.skip),t.header?(!0===t.header?(t.comment=u(s),t.cast=u(s),n=u(s)):"Array"===this.getType(t.header)&&(n=t.header),i=this.buildObjectConstructor(n,s[0].split(t.delimiter),t.cast)):i=this.buildArrayConstructor(n,s[0].split(t.delimiter),t.cast);s.length>0;){var a=u(s);a.length>1&&r(i(a),n[0])}return!0},safeParse:function(e,t,r){t.delimiter;var n=t.newline,i=e.split(n);return t.skip>0&&i.splice(t.skip),!0},encodeCells:function(e,t,r){for(var n=e.slice(0),i=0,s=n.length;i<s;i++)-1!==n[i].indexOf(this.quoteMark)&&(n[i]=n[i].replace(this.quoteRegex,this.doubleQuoteMark)),-1===n[i].indexOf(t)&&-1===n[i].indexOf(r)||(n[i]=this.quoteMark+n[i]+this.quoteMark);return n.join(t)},encodeArrays:function(e,t,r){var n=t.delimiter,i=t.newline;t.header&&"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,n,i));for(var s=0,u=this.getLimit(t.limit,e.length);s<u;s++)r(this.encodeCells(e[s],n,i));return!0},encodeObjects:function(e,t,r){var n,i,s=t.delimiter,u=t.newline;for(var a in n=[],i=[],e[0])n.push(a),i.push(e[0][a]);!0===t.header?r(this.encodeCells(n,s,u)):"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,s,u)),r(this.encodeCells(i,s));for(var l=1,o=this.getLimit(t.limit,e.length);l<o;l++){i=[];for(var c=0,h=n.length;c<h;c++)i.push(e[l][n[c]]);r(this.encodeCells(i,s,u))}return!0},parse:function(e,t,r){var n;if("Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)?r=(n=[]).push.bind(n):n=[],t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var i=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,o,i),t.newline=t.newline||this.mostFrequent(e,c,i)}return this.unsafeParse(e,t,r)&&(!(n.length>0)||n)},encode:function(e,t,r){var n;return"Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)&&(r=(n=[]).push.bind(n)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,r)&&(!(n.length>0)||n.join(t.newline))}};e("CSVManager",a("CSVManager")((u=s=class e{constructor(){n(this,"_csvTables",{}),n(this,"_csvTableForArr",{}),n(this,"_tableCast",{}),n(this,"_tableComment",{})}static get instance(){return this._instance||(this._instance=new e),this._instance}addTable(e,t,r){if(this._csvTables[e]&&!r)return;let n={},i=[];f.parse(t,{header:!0},(function(e,t){n[e[t]]=e,i.push(e)})),this._tableCast[e]=f.opts.cast,this._tableComment[e]=f.opts.comment,this._csvTables[e]=n,this._csvTableForArr[e]=i}getTableArr(e){return this._csvTableForArr[e]}getTable(e){return this._csvTables[e]}queryOne(e,t,r){var n=this.getTable(e);if(!n)return null;if(!t)return n[r];for(var i in n)if(n.hasOwnProperty(i)&&n[i][t]===r)return n[i]}queryByID(e,t){return this.queryOne(e,null,t)}queryAll(e,t,r){var n=this.getTable(e);if(!n||!t)return null;var i={};for(var s in n)n.hasOwnProperty(s)&&n[s][t]===r&&(i[s]=n[s]);return i}queryIn(e,t,r){var n=this.getTable(e);if(!n||!t)return null;for(var i={},s=Object.keys(n),u=s.length,a=0;a<u;a++){var l=n[s[a]];r.indexOf(l[t])>-1&&(i[s[a]]=l)}return i}queryByCondition(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;for(var n={},i=Object.keys(r),s=i.length,u=Object.keys(t),a=u.length,l=0;l<s;l++){for(var o=r[i[l]],c=!0,h=0;h<a;h++){var f=u[h];c=c&&t[f]===o[f]&&!n[i[l]]}c&&(n[i[l]]=o)}return n}queryOneByCondition(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;var n=Object.keys(t),i=n.length;for(let e in r){for(var s=r[e],u=!0,a=0;a<i;a++){var l=n[a];u=u&&t[l]===s[l]}if(u)return s}return null}},n(s,"_instance",void 0),i=u))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/lottery.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./clientEvent.ts","./utils.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./buttonEx.ts","./LanguageData.ts","./gameLogic.ts","./lotteryItem.ts"],(function(t){"use strict";var e,i,n,a,r,s,o,l,h,d,c,u,p,b,m,g,S,w,f,T,y,R,B,A;return{setters:[function(t){e=t.cclegacy,i=t.Node,n=t.Animation,a=t.Prefab,r=t.Label,s=t._decorator,o=t.Component,l=t.Vec3,h=t.instantiate,d=t.tween},function(t){c=t.applyDecoratedDescriptor,u=t.initializerDefineProperty,p=t.defineProperty},function(t){b=t.resourceUtil},function(t){m=t.constants},function(t){g=t.clientEvent},function(t){S=t.utils},function(t){w=t.localConfig},function(t){f=t.playerData},function(t){T=t.uiManager},function(t){y=t.ButtonEx},function(t){R=t.t},function(t){B=t.GameLogic},function(t){A=t.LotteryItem}],execute:function(){var E,L,_,v,D,C,I,P,x,G,M,O,N,z,k,Y,$,U,V,F,W,X,H,j,q;e._RF.push({},"da336DqBNdPOLmRdGzIoRW8","lottery",void 0);const{ccclass:J,property:K}=s;t("Lottery",(E=J("Lottery"),L=K(i),_=K(n),v=K(a),D=K(r),C=K(r),I=K(r),P=K(r),x=K(i),G=K(i),M=K(i),O=K(i),E((k=c((z=class extends o{constructor(...t){super(...t),u(this,"arrRewardNode",k,this),u(this,"aniLightGroup",Y,this),u(this,"pfRewardItem",$,this),u(this,"lbSpareTimes",U,this),u(this,"lbAdSpareTimes",V,this),u(this,"lbShareSpareTimes",F,this),u(this,"lbGold",W,this),u(this,"ndBtnStart",X,this),u(this,"ndBtnAd",H,this),u(this,"ndBtnShare",j,this),u(this,"ndTurnable",q,this),p(this,"dictReward",{}),p(this,"arrRewardData",[]),p(this,"arrProbability",void 0),p(this,"times",void 0),p(this,"moreTimes",void 0),p(this,"isBtnStartShow",void 0),p(this,"randValue",void 0),p(this,"itemNode",void 0)}ctor(){this.dictReward={},this.arrRewardData=[]}show(){let t=[{x:0,y:53,angle:new l(0,0,-0)},{x:32,y:44,angle:new l(0,0,-36)},{x:51,y:15,angle:new l(0,0,-72)},{x:51,y:-18,angle:new l(0,0,-108)},{x:32,y:-46,angle:new l(0,0,-144)},{x:0,y:-56,angle:new l(0,0,180)},{x:-32.6,y:-45.7,angle:new l(0,0,144)},{x:-51,y:-18,angle:new l(0,0,108)},{x:-51,y:15,angle:new l(0,0,72)},{x:-32,y:42,angle:new l(0,0,36)}];this.ndTurnable.children.forEach(((e,i)=>{let n=t[i];e.setPosition(n.x,n.y),e.eulerAngles=n.angle})),this.initReward(),this.initInfo(),this.updateGold()}onEnable(){g.on("updateGold",this.updateGold,this)}onDisable(){g.off("updateGold",this.updateGold,this)}initReward(){if(this.arrRewardData.length<=0){let t=w.instance.getTable("lottery");this.arrRewardData=S.objectToArray(t)}this.arrProbability=[];let t=0;this.arrRewardData.forEach(((e,i,n)=>{let a=this.arrRewardNode[i],r=this.dictReward[i];if(this.dictReward.hasOwnProperty(i)||(r=h(this.pfRewardItem),r.setPosition(0,-42,0),r.parent=a,this.dictReward[i]=r),this.arrRewardData.length>i){let e=this.arrRewardData[i];r.getComponent(A).setInfo(e);let n=t,a=t+e.probability;this.arrProbability.push({min:n,max:a,idx:i}),t=a}}))}initInfo(){this.times=f.instance.getLotterySpareTimes(!1),this.moreTimes=f.instance.getLotterySpareTimes(!0),this.lbSpareTimes.string=`${this.times}/${m.LOTTERY_MAX_TIMES}`,this.lbAdSpareTimes.string=`${this.moreTimes}/${m.LOTTERY_AD_MAX_TIMES}`,this.lbShareSpareTimes.string=`${this.moreTimes}/${m.LOTTERY_AD_MAX_TIMES}`,this.checkBtnStatus()}checkBtnStatus(){this.times<=0?(this.showBtnShareOrAd(),this.moreTimes<=0&&(this.ndBtnAd.getComponent(y).interactable=!1,this.ndBtnShare.getComponent(y).interactable=!1,this.lbAdSpareTimes.node.active=!1,this.lbShareSpareTimes.node.active=!1,b.setGray(this.ndBtnAd,!0),b.setGray(this.ndBtnShare,!0))):(this.ndBtnStart.active=!0,this.ndBtnStart.getComponent(y).interactable=!0)}updateGold(){this.lbGold.string=S.formatMoney(f.instance.getGold())}onBtnStartClick(){this.showSelectUI(this.ndBtnStart,this.lbSpareTimes,!1)}showSelectUI(t,e,i){this.isBtnStartShow=!0,t.getComponent(y).interactable=!1;for(let t in this.dictReward)this.dictReward[t].getComponent(A).setSelect(!1);f.instance.addLotteryTimes(i),i?(this.moreTimes=f.instance.getLotterySpareTimes(i),e.string=`${this.moreTimes}/${m.LOTTERY_AD_MAX_TIMES}`):(this.times=f.instance.getLotterySpareTimes(i),e.string=`${this.times}/${m.LOTTERY_MAX_TIMES}`),g.dispatchEvent("updateLotterySpareTimes"),this.randValue=this.getRandValue(),this.aniLightGroup.play(),this.startRun()}startRun(){let t=this.ndTurnable.eulerAngles.z;t%=360,this.ndTurnable.setRotationFromEuler(0,0,t);let e=360-t,i=3+Math.floor(4*Math.random());d(this.ndTurnable).to(e/360+.5*i,{eulerAngles:new l(0,0,360+360*i+36*this.randValue)},{easing:"circInOut"}).call((()=>{this.showReward()})).start()}getRandValue(){let t=-1,e=Math.floor(100*Math.random());for(let i=0;i<this.arrProbability.length;i++){let n=this.arrProbability[i];if(e>=n.min&&e<n.max){t=n.idx;break}}return-1!==t?t:this.getRandValue()}showReward(){this.aniLightGroup.stop(),this.itemNode=this.dictReward[this.randValue],this.itemNode.getComponent(A).setSelect(!0),this.isBtnStartShow&&(this.checkBtnStatus(),this.isBtnStartShow=!1)}onBtnAddDiamondClick(){T.instance.showTips(R("lottery.noChargePleaseWait"))}onBtnAdClick(){B.instance.showRewardAd((t=>{t||this.showSelectUI(this.ndBtnAd,this.lbAdSpareTimes,!0)}))}onBtnShareClick(){B.instance.share(m.SHARE_FUNCTION.LOTTERY,{},(t=>{t||this.showSelectUI(this.ndBtnShare,this.lbShareSpareTimes,!0)}))}showBtnShareOrAd(){B.instance.getOpenRewardType(m.SHARE_FUNCTION.LOTTERY,((t,e)=>{if(!t)switch(e){case m.OPEN_REWARD_TYPE.AD:this.ndBtnStart.active=!1,this.ndBtnShare.active=!1,this.ndBtnAd.active=!0,this.ndBtnAd.getComponent(y).interactable=!0;break;case m.OPEN_REWARD_TYPE.SHARE:this.ndBtnStart.active=!1,this.ndBtnAd.active=!1,this.ndBtnShare.active=!0,this.ndBtnShare.getComponent(y).interactable=!0;break;case m.OPEN_REWARD_TYPE.NULL:this.ndBtnStart.active=!0,this.ndBtnStart.getComponent(y).interactable=!1,b.setGray(this.ndBtnStart,!0),this.ndBtnAd.active=!1,this.ndBtnShare.active=!1}}))}onBtnCloseClick(){T.instance.hideDialog("lottery/lottery")}}).prototype,"arrRewardNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=c(z.prototype,"aniLightGroup",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=c(z.prototype,"pfRewardItem",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=c(z.prototype,"lbSpareTimes",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=c(z.prototype,"lbAdSpareTimes",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=c(z.prototype,"lbShareSpareTimes",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=c(z.prototype,"lbGold",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=c(z.prototype,"ndBtnStart",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=c(z.prototype,"ndBtnAd",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=c(z.prototype,"ndBtnShare",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=c(z.prototype,"ndTurnable",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=z))||N));e._RF.pop()}}}));

System.register("chunks:///_virtual/buttonEx.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./audioManager.ts"],(function(t){"use strict";var e,n,i,r,o,s,c;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Button},function(t){r=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){s=t.constants},function(t){c=t.AudioManager}],execute:function(){var u,a,l,p,d;e._RF.push({},"e122fG1ssFILIO3WiAvp7JK","buttonEx",void 0);const{ccclass:h,property:f}=n;t("ButtonEx",h("ButtonEx")((l=r((a=class extends i{constructor(...t){super(...t),o(this,"isPreventSecondClick",l,this),o(this,"preventTime",p,this),o(this,"isPlaySound",d,this)}start(){let t=this.node.getComponent(i);this.node.on("click",(e=>{this.isPreventSecondClick&&(t.interactable=!1,this.scheduleOnce((function(){t.node&&(t.interactable=!0)}),this.preventTime)),this.isPlaySound&&c.instance.playSound(s.AUDIO_SOUND.CLICK,!1)}),this)}}).prototype,"isPreventSecondClick",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=r(a.prototype,"preventTime",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),d=r(a.prototype,"isPlaySound",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=a))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/balanceFailed.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./sceneManager.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts"],(function(e){"use strict";var n,a,t,i,c,l,r,o,s;return{setters:[function(e){n=e.cclegacy,a=e._decorator,t=e.Component},function(e){i=e.applyDecoratedDescriptor,c=e.initializerDefineProperty},function(e){l=e.SceneManager},function(e){r=e.playerData},function(e){o=e.uiManager},function(e){s=e.GameLogic}],execute:function(){var u,g,p;n._RF.push({},"e4928/nKARPlqGf+IiCXcgK","balanceFailed",void 0);const{ccclass:d,property:f}=a;e("BalanceFailed",d("BalanceFailed")((p=i((g=class extends t{constructor(...e){super(...e),c(this,"lbLevel",p,this)}show(){this.lbLevel.string=r.instance.level}onBtnRetryClick(){o.instance.hideDialog("fight/balanceFailed"),s.instance.resetLevel()}onBtnCloseClick(){o.instance.hideDialog("fight/balanceFailed"),l.instance.loadScene("pve",[],((e,n)=>{e&&console.error(e.message||e)}))}}).prototype,"lbLevel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=g))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,o,i,n,s;return{setters:[function(t){e=t.cclegacy,o=t._decorator,i=t.instantiate,n=t.NodePool},function(t){s=t.defineProperty}],execute:function(){var c,r,a;e._RF.push({},"e4ab6T5/1VCqK/Vn+UcADNM","poolManager",void 0);const{ccclass:l,property:d}=o;t("poolManager",l("poolManager")((a=r=class t{constructor(){s(this,"_dictPool",{}),s(this,"_dictPrefab",{})}static get instance(){return this._instance||(this._instance=new t),this._instance}getNode(t,e){let o=t.name;t.position||(o=t.data.name),this._dictPrefab[o]=t;let s=null;if(this._dictPool.hasOwnProperty(o)){let e=this._dictPool[o];s=e.size()>0?e.get():i(t)}else{let e=new n;this._dictPool[o]=e,s=i(t)}return s.parent=e,s.active=!0,s}putNode(t){if(!t)return;let e=t.name,o=null;this._dictPool.hasOwnProperty(e)?o=this._dictPool[e]:(o=new n,this._dictPool[e]=o),o.put(t)}clearPool(t){if(this._dictPool.hasOwnProperty(t)){this._dictPool[t].clear()}}prePool(t,e){const o=t.name;let s=new n;this._dictPool[o]=s;for(let o=0;o<e;o++){const e=i(t);s.put(e)}}},s(r,"_instance",void 0),c=a))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/clientEvent.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var r,t,n;return{setters:[function(e){r=e.cclegacy,t=e._decorator},function(e){n=e.defineProperty}],execute:function(){var a,l,s;r._RF.push({},"e55dbzBNn1NUrh8r5zusvCZ","clientEvent",void 0);const{ccclass:c,property:i}=t;e("clientEvent",c("clientEvent")((s=l=class e{static on(r,t,n){var a={handler:t,target:n},l=e._handlers[r];l||(l=[],e._handlers[r]=l);for(var s=0;s<l.length;s++)if(!l[s])return l[s]=a,s;return l.push(a),l.length}static off(r,t,n){var a=e._handlers[r];if(a)for(var l=0;l<a.length;l++){var s=a[l];if(s.handler===t&&(!n||n===s.target)){a.splice(l,1);break}}}static dispatchEvent(r,...t){var n,a=e._handlers[r],l=[];for(n=1;n<arguments.length;n++)l.push(arguments[n]);if(a)for(n=0;n<a.length;n++){var s=a[n];s.handler&&s.handler.apply(s.target,l)}}},n(l,"_handlers",{}),a=s))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./clientEvent.ts","./constant.ts","./storageManager.ts","./utils.ts","./localConfig.ts","./sceneManager.ts"],(function(e){"use strict";var t,n,i,s,a,r,o,l,h,I,f;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.Component},function(e){s=e.defineProperty},function(e){a=e.constants},function(e){r=e.clientEvent},function(e){o=e.constant},function(e){l=e.StorageManager},function(e){h=e.utils},function(e){I=e.localConfig},function(e){f=e.SceneManager}],execute:function(){var y,c,p;t._RF.push({},"e5927B2lO9C6o5eLg2NmcKB","playerData",void 0);const{ccclass:g,property:u}=n;e("playerData",g("playerData")((p=c=class e extends i{constructor(...e){super(...e),s(this,"serverTime",0),s(this,"localTime",0),s(this,"spareStep",void 0),s(this,"curLevelInfo",void 0),s(this,"dictTargets",void 0),s(this,"score",void 0),s(this,"arrStars",void 0),s(this,"level",1),s(this,"dataVersion",void 0),s(this,"isFirst",void 0),s(this,"balanceOverAdTimes",void 0),s(this,"_bag",null),s(this,"_userId",""),s(this,"_playerInfo",null),s(this,"_history",null),s(this,"_settings",null),s(this,"_isNewBee",!1),s(this,"_dataVersion","")}static get instance(){return this._instance||(this._instance=new e),this._instance}get bag(){return this._bag}get userId(){return this._userId}set userId(e){this._userId=e}get settings(){return this._settings}set settings(e){this._settings=e}get playerInfo(){return this._playerInfo}get history(){return this._history}get isNewBee(){return this._isNewBee}set isNewBee(e){this._isNewBee=e}loadGlobalCache(){let e=l.instance.getUserId();e&&(this._userId=e)}loadFromCache(){this._playerInfo=this._loadDataByKey(o.LOCAL_CACHE.PLAYER),this._history=this._loadDataByKey(o.LOCAL_CACHE.HISTORY),this._settings=this._loadDataByKey(o.LOCAL_CACHE.SETTINGS),this._bag=this._loadDataByKey(o.LOCAL_CACHE.BAG)}_loadDataByKey(e){let t={},n=l.instance.getConfigData(e);if(n)try{t=JSON.parse(n)}catch(e){t={}}return t}createPlayerInfo(e){if(this._playerInfo={diamond:0,key:0,level:1,createDate:new Date},this._isNewBee=!0,e)for(let t in e)this._playerInfo[t]=e[t];this.savePlayerInfoToLocalCache()}generateRandomAccount(){this.userId=`${Date.now()}${h.getRandomInt(0,1e3)}`,l.instance.setUserId(this._userId)}saveAccount(e){this._userId=e,l.instance.setUserId(e)}savePlayerInfoToLocalCache(){l.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))}saveSettingsToLocalCache(){l.instance.setConfigData(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings))}saveAll(){l.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo)),l.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.HISTORY,JSON.stringify(this._history)),l.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings)),l.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.BAG,JSON.stringify(this.bag)),l.instance.setConfigData(o.LOCAL_CACHE.DATA_VERSION,this._dataVersion)}updatePlayerInfo(e,t){let n=!1;this._playerInfo.hasOwnProperty(e)?"number"==typeof t?(n=!0,this._playerInfo[e]+=t,this._playerInfo[e]<0&&(this._playerInfo[e]=0)):"boolean"!=typeof t&&"string"!=typeof t||(n=!0,this._playerInfo[e]=t):this._playerInfo[e]=t,n&&l.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))}getSetting(e){return this._settings&&this._settings.hasOwnProperty(e)?this._settings[e]:null}setSetting(e,t){this._settings||(this._settings={}),this._settings[e]=t,this.saveSettingsToLocalCache()}clear(){this._playerInfo={},this._settings={},this.saveAll()}isOpenOffLineReward(e){let t=Date.now(),n=!1;return this.playerInfo.loginDate?(n=t-this.playerInfo.loginDate>=e,n&&(this.playerInfo.loginDate=t)):this.playerInfo.loginDate=Date.now(),this.savePlayerInfoToLocalCache(),n}getOnlineRewardInfo(){if(this.playerInfo.hasOwnProperty("onlineRewardInfo")){h.getDeltaDays(this.playerInfo.onlineRewardInfo.loginTime,Date.now())>0&&this.resetOnlineRewardInfo()}else this.resetOnlineRewardInfo();return this.playerInfo.onlineRewardInfo}resetOnlineRewardInfo(){this.playerInfo.onlineRewardInfo={},this.playerInfo.onlineRewardInfo.value={times:0,receiveStatus:a.REWARD_STATUS.UNRECEIVABLE},this.playerInfo.onlineRewardInfo.loginTime=Date.now(),this.playerInfo.onlineRewardInfo.usedTime=0,this.savePlayerInfoToLocalCache()}resetShopPropInfo(){this.playerInfo.shopPropInfo={};let e=I.instance.getTable("prop");if(!e)return!1;let t=Object.keys(e).filter((e=>Number(e)!==a.PROP_ID.INFINITE)),n=t[Math.floor(Math.random()*t.length)];this.playerInfo.shopPropInfo.createDate=Date.now(),this.playerInfo.shopPropInfo.prop=n,this.playerInfo.shopPropInfo.receiveStatus=a.REWARD_STATUS.UNRECEIVABLE,this.savePlayerInfoToLocalCache()}updateShopPropInfo(e){this.playerInfo.shopPropInfo&&(e?this.resetShopPropInfo():this.playerInfo.shopPropInfo.receiveStatus=a.REWARD_STATUS.RECEIVABLE,this.savePlayerInfoToLocalCache())}updateSignInCurrentDay(){if(!this.playerInfo.signInInfo||this.isNeedRecycleSignInInfo())this.createNewSignInInfo();else{let e=h.getDeltaDays(this.playerInfo.signInInfo.signInDate,Date.now());if(0===e)return;this.updateSignInFillSignInDays(0,!0),this.playerInfo.signInInfo.currentDay+=e,this.playerInfo.signInInfo.currentDay<=0&&this.createNewSignInInfo(),this.playerInfo.signInInfo.currentDay>a.MAX_SIGN_IN_REWARDS_DAY?a.MAX_SIGN_IN_REWARDS_DAY:this.playerInfo.signInInfo.currentDay,this.playerInfo.signInInfo.signInDate=Date.now()}this.savePlayerInfoToLocalCache()}isNeedRecycleSignInInfo(){this.playerInfo.signInInfo||this.createNewSignInInfo();let e=!1;return h.getDeltaDays(this.playerInfo.signInInfo.createDate,Date.now())>=a.MAX_SIGN_IN_REWARDS_DAY&&(e=!0),e}createNewSignInInfo(){this.playerInfo.signInInfo||(this.playerInfo.signInInfo={}),this.playerInfo.signInInfo.createDate=Date.now(),this.playerInfo.signInInfo.signInDate=Date.now(),this.playerInfo.signInInfo.currentDay=1,this.playerInfo.signInInfo.receivedDays=[],this.playerInfo.signInInfo.afterFillSignInDays=[],this.savePlayerInfoToLocalCache()}updateSignInFillSignInDays(e,t){let n=this.playerInfo.signInInfo.afterFillSignInDays;if(t)n.length=0;else{if(Array.isArray(n)&&n.includes(e))return;n.push(Number(e))}this.savePlayerInfoToLocalCache()}getSignInReceivedInfo(){this.playerInfo.signInInfo||this.createNewSignInInfo();let e=this.playerInfo.signInInfo,t=!1,n=!1;return t=!(e.receivedDays.length<e.currentDay),n=!!e.receivedDays.includes(e.currentDay),{isAllReceived:t,isTodayReceived:n}}getCountdownTime(){let e=this.playerInfo.onlineRewardInfo.value.times,t=a.ONLINE_REWARD_INTERVAL,n=t.length-1;return e=e>n?n:e,t[e]}updateOnlineRewardInfo(e){if(!this.playerInfo.onlineRewardInfo)return;let t=this.playerInfo.onlineRewardInfo.value;e?(t.times+=1,t.receiveStatus=a.REWARD_STATUS.UNRECEIVABLE):(t.receiveStatus=a.REWARD_STATUS.RECEIVABLE,this.playerInfo.onlineRewardInfo.usedTime=0),this.savePlayerInfoToLocalCache()}addUsedTime(){this.playerInfo.onlineRewardInfo&&!f.instance.isStop&&(this.playerInfo.onlineRewardInfo.usedTime+=1,this.savePlayerInfoToLocalCache())}convertSignInDataFormat(e){let t=e.value.split("#"),n=t[1].split("|");n.splice(n.length-1,1),this.playerInfo.signInInfo.createDate=e.signInDate-864e5*Number(t[0]-1),this.playerInfo.signInInfo.signInDate=e.signInDate,this.playerInfo.signInInfo.currentDay=Number(t[0]),this.playerInfo.signInInfo.receivedDays=n.map(Number),this.playerInfo.signInInfo.afterFillSignInDays=[],delete e.value,this.savePlayerInfoToLocalCache()}finishLink(e,t){this.reduceStep(),this.finishTarget(e,t)}reduceStep(){this.curLevelInfo.infinite||(this.spareStep--,this.spareStep<0&&(this.spareStep=0))}finishTarget(e,t){this.dictTargets.hasOwnProperty(e)&&(this.dictTargets[e]-=t,this.dictTargets[e]<0&&(this.dictTargets[e]=0))}isLevelFinish(){let e=!0;for(let t in this.dictTargets)if(this.dictTargets.hasOwnProperty(t)&&this.dictTargets[t]>0){e=!1;break}return e}isGameOver(){return this.spareStep<=0}startNewLevel(){let e=this.getCurrentLevelInfo();this.score=0,this.spareStep=0,this.curLevelInfo={},this.curLevelInfo.startTime=Date.now(),this.curLevelInfo.infinite=!1,e&&(this.spareStep=e.limit),this.dictTargets={};let t=e.targets.split("|");for(let e=0;e<t.length;e++){let n=t[e].split("-");this.dictTargets[n[0]]=Number(n[1])}this.arrStars=e.stars.split("|")}getCurrentLevelInfo(){let e=I.instance.queryByID("level",this.level);return e&&(e.level=this.level),e}addDiamond(e){this.updatePlayerInfo("diamond",e)}addGold(e){this.updatePlayerInfo("gold",Number(e))}addProp(e,t){if(this._bag.hasOwnProperty(e)){this._bag[e].amount+=t}else{let n={amount:t};this._bag[e]=n}return this.addDataVersion(),l.instance.setConfigData(o.LOCAL_CACHE.BAG,JSON.stringify(this._bag)),!0}addDataVersion(){let e=(new Date).toLocaleDateString(),t=!1;if(this.dataVersion&&"string"==typeof this.dataVersion){var n=this.dataVersion.split("@");n.length>=2&&n[0]===e&&(this.dataVersion=e+"@"+(Number(n[1])+1),t=!0)}t||(this.dataVersion=e+"@1"),l.instance.setConfigDataWithoutSave(a.LOCAL_CACHE.DATA_VERSION,this.dataVersion)}isFirstClickMoreGame(e){return e&&(this.isFirst=e),this.isFirst}getLotterySpareTimes(e){let t=a.LOTTERY_MAX_TIMES;e&&(t=a.LOTTERY_AD_MAX_TIMES);let n=h.getDay(),i=this.getSetting(a.SETTINGS_KEY.LOTTERY);if(i||(i={}),!i.today||i.today!==n)return i={},i.today={},this.setSetting(a.SETTINGS_KEY.LOTTERY,i),t;let s=i.times;e&&(s=i.moreTimes),s||(s=0);let r=t-s;return r>0?r:0}isFinishTaskAndNoReceive(){if(!this.playerInfo||!this.playerInfo.dictTask)return!1;for(let e in this.playerInfo.dictTask){this.playerInfo.dictTask[e];let t=I.instance.queryByID("task",e),n=this.getTaskStatusById(e);if(n.taskFinishCount>=t.count&&n.taskState===a.TASK_STATE.RECEIVABLE)return!0}return!1}getTaskStatusById(e){if(!this.playerInfo||!this.playerInfo.hasOwnProperty("taskDate"))return null;let t=this.playerInfo.dictTask[e];return t||null}getGold(){return this.playerInfo.hasOwnProperty("gold")?this.playerInfo.gold:0}parseGift(e){let t=I.instance.queryByID("gift",e);if(!t)return null;let n=t.type.split("|").map(Number),i=t.subType.split("|").map(Number),s=t.amount.split("|").map(Number),a=[];return n.forEach(((e,t,n)=>{a.push({type:e,subType:i[t],amount:s[t]})})),a}updateSignInReceivedDays(e){let t=this.playerInfo.signInInfo.receivedDays;Array.isArray(t)&&t.includes(e)||(t.push(Number(e)),this.savePlayerInfoToLocalCache())}addLotteryTimes(e,t){t||(t=1);let n=h.getDay(),i=this.getSetting(a.SETTINGS_KEY.LOTTERY);i||(i={}),i.today&&i.today===n||(i={},i.today=n),e?i.moreTimes?i.moreTimes+=t:i.moreTimes=t:i.times?i.times+=t:i.times=t,this.setSetting(a.SETTINGS_KEY.LOTTERY,i)}getInfiniteTimes(){return this.playerInfo.infiniteShareTimes?this.playerInfo.infiniteShareTimes:0}exchangeInfiniteProp(){this.playerInfo.infiniteShareTimes>=a.MAX_INFINITE_TIMES?this.playerInfo.infiniteShareTimes-=a.MAX_INFINITE_TIMES:this.playerInfo.infiniteShareTimes=0,r.dispatchEvent("updateInfiniteShareTimes"),this.savePlayerInfoToLocalCache()}getCurrentLevel(){var e=h.objectToArray(this.history),t=e.length;if(0===t)return I.instance.queryOne("level","name","1");e.sort((function(e,t){return Number(e.levelId)-Number(t.levelId)}));var n=e[t-1],i=I.instance.queryByID("level",parseInt(n.levelId).toString()),s=I.instance.queryOne("level","name",String(parseInt(i.name)+1));return s&&0!==n.star?s:i}getHighestScoreByLevel(e){return this.history.hasOwnProperty(e)?this.history[e].score:0}getPropAmount(e){return this.bag.hasOwnProperty(e)&&this.bag[e].amount||0}isPropUnlock(e){let t=this.getCurrentLevel().ID;return this.playerInfo.hasOwnProperty("unLockInfo")||this.getUnLockInfo(),t>1&&this.playerInfo.unLockInfo.includes(e)}getUnLockInfo(){if(!this.playerInfo.hasOwnProperty("unLockInfo")){let e=this.getCurrentLevel().ID,t=a.UNLOCK_PROP_ID,[n,i]=[0,e-1];this.playerInfo.unLockInfo=t.slice(n,i),this.savePlayerInfoToLocalCache()}return this.playerInfo.unLockInfo}addStep(e){this.spareStep+=e}isNeedOpenUnlockPanel(){let e=this.getCurrentLevelInfo().ID;if(e>1&&e<=a.UNLOCK_HIGEST_LEVEl){let t=a.UNLOCK_PROP_ID[e-2];if(this.playerInfo.hasOwnProperty("unLockInfo")||this.getUnLockInfo(),!this.isPropUnlock(t))return!0}return!1}hasSeenGuide(){return this.playerInfo.hasSeenGuide}finishSeenGuide(){this.playerInfo.hasSeenGuide=!0,this.updatePlayerInfo("hasSeenGuide",!0)}costProp(e){if(!this.bag.hasOwnProperty(e))return!1;let t=this.bag[e];return!(t<=0)&&(t.amount--,this.addDataVersion(),l.instance.setConfigData(o.LOCAL_CACHE.BAG,JSON.stringify(this.bag)),!0)}addScore(e){this.score+=e}getTargetValue(e){return this.dictTargets.hasOwnProperty(e)?this.dictTargets[e]:0}updateUnLockInfo(e){let t=this.playerInfo.unLockInfo;t.includes(e)||(t.push(e),this.savePlayerInfoToLocalCache())}finishLevel(e,t){let n=0,i=I.instance.queryByID("level",e),s=(Date.now()-this.curLevelInfo.startTime)/1e3;if(i){let e=i.stars.split("|");t>=e[2]?n=3:t>=e[1]?n=2:t>=e[0]&&(n=1)}let a=0;this.history.hasOwnProperty(e)?(a=this.history[e].star,this.history[e].score<t&&(this.history[e].score=t,this.history[e].star=n,this.history[e].costTime=s)):this.history[e]={levelId:e,score:t,star:n,costTime:s},l.instance.setConfigData(o.LOCAL_CACHE.HISTORY,JSON.stringify(this.history));let h=i.golds.split("|"),f=0;for(let e=a;e<n;e++)f+=Number(h[e]);return f>0&&(this.addGold(f),r.dispatchEvent("updateGold")),{levelId:e,score:t,star:n,gold:f,costTime:s,spareStep:this.spareStep}}nextLevel(){this.level++,this.startNewLevel()}},s(c,"_instance",void 0),y=p))||y);t._RF.pop()}}}));

System.register("chunks:///_virtual/propItem.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./clientEvent.ts","./playerData.ts","./uiManager.ts","./buttonEx.ts"],(function(t){"use strict";var o,e,n,r,i,p,s,c,a,u,l,P;return{setters:[function(t){o=t.cclegacy,e=t._decorator,n=t.Component},function(t){r=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,p=t.defineProperty},function(t){s=t.resourceUtil},function(t){c=t.constants},function(t){a=t.clientEvent},function(t){u=t.playerData},function(t){l=t.uiManager},function(t){P=t.ButtonEx}],execute:function(){var h,f,I,d;o._RF.push({},"e7ad36HvgtJMJhvgKYrltrK","propItem",void 0);const{ccclass:b,property:m}=e;t("PropItem",b("PropItem")((I=r((f=class extends n{constructor(...t){super(...t),i(this,"lbPropNum",I,this),i(this,"spPropIcon",d,this),p(this,"propInfo",void 0),p(this,"propPrice",void 0)}start(){this.updateUnlockProp()}onEnable(){a.on("updateProp",this.updateProp,this),a.on("updateUnlockProp",this.updateUnlockProp,this)}onDisable(){a.off("updateProp",this.updateProp,this),a.off("updateUnlockProp",this.updateUnlockProp,this)}setInfo(t){this.propInfo=t;let o=u.instance.getPropAmount(t.ID);o<=0&&(o="+"),this.lbPropNum.string=o,s.setPropIcon(t.icon,this.spPropIcon,(()=>{})),this.propPrice=t.price}onPropItemClick(){l.instance.showDialog("props/buy",[this.propInfo.ID,c.ANALYTICS_TYPE.CHECKPOINT_PROP_BUY_NUM])}updateProp(t){t===this.propInfo.ID&&this.setInfo(this.propInfo)}updateUnlockProp(){let t=u.instance.isPropUnlock(this.propInfo.ID);this.node.getComponent(P).interactable=t,s.setGray(this.node,!t)}}).prototype,"lbPropNum",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=r(f.prototype,"spPropIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/shop.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./clientEvent.ts","./utils.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./buttonEx.ts","./LanguageData.ts","./LocalizedSprite.ts","./shopPropsOperation.ts","./shopItem.ts"],(function(t){"use strict";var e,i,o,n,r,s,a,p,h,l,c,u,d,S,m,f,b,P,I;return{setters:[function(t){e=t.cclegacy,i=t._decorator,o=t.Component,n=t.instantiate},function(t){r=t.applyDecoratedDescriptor,s=t.initializerDefineProperty,a=t.defineProperty},function(t){p=t.resourceUtil},function(t){h=t.constants},function(t){l=t.clientEvent},function(t){c=t.utils},function(t){u=t.localConfig},function(t){d=t.playerData},function(t){S=t.uiManager},function(t){m=t.ButtonEx},function(t){f=t._language},function(t){b=t.LocalizedSpriteItem},function(t){P=t.ShopPropsOperation},function(t){I=t.ShopItem}],execute:function(){var g,R,w,y,v,E,C,z,D,A,O,B,T,L,U,_;e._RF.push({},"ece87xczkNChrPYtwiev9Te","shop",void 0);const{ccclass:G,property:M}=i;t("Shop",(g=G("Shop"),R=M({type:b}),g((v=r((y=class extends o{constructor(...t){super(...t),s(this,"arrMenu",v,this),s(this,"pbShopItem",E,this),s(this,"lbGold",C,this),s(this,"aniLight",z,this),s(this,"ndShopPropsOperation",D,this),s(this,"spRandPropIcon",A,this),s(this,"lbRandPropNumber",O,this),s(this,"ndBtnReceive",B,this),s(this,"spReceive",T,this),s(this,"sfReceive",L,this),s(this,"sfShare",U,this),s(this,"sfAd",_,this),a(this,"arrShopItemScript",void 0),a(this,"animState",void 0),a(this,"randomItem",void 0),a(this,"shopPropsOperationScript",void 0)}ctor(){this.arrShopItemScript=[]}onEnable(){l.on("updateGold",this.updateGold,this),l.on("updateShopPropInfo",this.showShopProp,this)}onDisable(){l.off("updateGold",this.updateGold,this),l.off("updateShopPropInfo",this.showShopProp,this)}show(){this.updateGold(),this.init(),this.animState="shopPropertyIdle",this.aniLight.play(this.animState),this.showShopProp(),this.UpdateSprite(this.spReceive,this.sfReceive)}UpdateSprite(t,e){for(let i=0;i<e.length;i++){const o=e[i];if(o.language===f){t.spriteFrame=o.spriteFrame;break}}}showShopProp(){let t=d.instance.playerInfo.shopPropInfo,e=u.instance.getTable("prop");switch(this.randomItem=e[t.prop],p.setPropIcon(this.randomItem.icon,this.spRandPropIcon,(()=>{})),this.lbRandPropNumber.string="1",t.receiveStatus){case h.REWARD_STATUS.UNRECEIVABLE:this.ndBtnReceive.getComponent(m).interactable=!1;break;case h.REWARD_STATUS.RECEIVABLE:this.ndBtnReceive.getComponent(m).interactable=!0}}init(){this.shopPropsOperationScript=this.ndShopPropsOperation.getComponent(P),this.arrShopItemScript||(this.arrShopItemScript=[]);let t=u.instance.getTable("prop");c.objectToArray(t).forEach(((t,e,i)=>{let o=null;this.arrMenu[e].getChildByName("shopItem")?o=this.arrMenu[e].getChildByName("shopItem"):(o=n(this.pbShopItem),o.parent=this.arrMenu[e]);let r=o.getComponent(I);r.setInfo(t,this),0===e&&r.showSelect(),this.arrShopItemScript.includes(r)||this.arrShopItemScript.push(r)}))}updateGold(){this.lbGold.string=c.formatMoney(d.instance.getGold())}onBtnCloseClick(){S.instance.hideDialog("shop/shop")}showAllItemUnSelect(){this.arrShopItemScript.forEach((t=>{t.showUnSelect()}))}onBtnReceiveClick(){this.showRandPropSecelt(),this.shopPropsOperationScript.show(this.randomItem.ID),this.showReward()}onRandPropClick(){this.showRandPropSecelt(),this.shopPropsOperationScript.show(this.randomItem.ID)}showRandPropSecelt(){this.showAllItemUnSelect(),this.animState="shopPropertySelect",this.aniLight.play(this.animState)}hideRandPropSelect(){"shopPropertyIdle"!==this.animState&&(this.animState="shopPropertyIdle",this.aniLight.play(this.animState))}showReward(){let t={};t.itemType=h.REWARD_TYPE.PROP,t.itemSubType=this.randomItem.ID,t.itemAmount=1,S.instance.showDialog("lottery/reward",[t,!1,h.SHARE_FUNCTION.SHOP_PROP]),d.instance.updateShopPropInfo(!0),this.showShopProp(),l.dispatchEvent("updateShopPropInfo"),this.showRandPropSecelt(),this.shopPropsOperationScript.show(this.randomItem.ID)}}).prototype,"arrMenu",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=r(y.prototype,"pbShopItem",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=r(y.prototype,"lbGold",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=r(y.prototype,"aniLight",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=r(y.prototype,"ndShopPropsOperation",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=r(y.prototype,"spRandPropIcon",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=r(y.prototype,"lbRandPropNumber",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=r(y.prototype,"ndBtnReceive",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=r(y.prototype,"spReceive",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=r(y.prototype,"sfReceive",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=r(y.prototype,"sfShare",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=r(y.prototype,"sfAd",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=y))||w));e._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./LanguageData.ts"],(function(e){"use strict";var t,i,r,a,l,n,o,c,s;return{setters:[function(e){t=e.cclegacy,i=e._decorator,r=e.Component},function(e){a=e.applyDecoratedDescriptor,l=e.defineProperty,n=e.initializerDefineProperty},function(e){o=e.ready,c=e.init,s=e.t}],execute:function(){var u,d,p;t._RF.push({},"edf98QH2D1AUoCrtQlbxFrU","LocalizedLabel",void 0);const{ccclass:b,property:h,executeInEditMode:L}=i;e("LocalizedLabel",b("LocalizedLabel")(u=L((p=a((d=class extends r{constructor(...e){super(...e),l(this,"label",null),n(this,"key",p,this)}onLoad(){o||c("zh"),this.fetchRender()}fetchRender(){let e=this.getComponent("cc.Label");if(e)return this.label=e,void this.updateLabel()}updateLabel(){this.label&&(this.label.string=s(this.key))}}).prototype,"key",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=d))||u)||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/configuration.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var a,s,i,e;return{setters:[function(t){a=t.cclegacy,s=t._decorator,i=t.sys},function(t){e=t.defineProperty}],execute:function(){var n,o,r;a._RF.push({},"eec23YA39dCLqNg6zDnqLhV","configuration",void 0);const{ccclass:c}=s;let h="LinkConfig";t("Configuration",c("Configuration")((r=o=class t{constructor(){e(this,"jsonData",void 0),e(this,"path",void 0),e(this,"markSave",void 0),e(this,"saveTimer",void 0)}static get instance(){return this._instance||(this._instance=new t,this._instance.init()),this._instance}init(){var t;(this.jsonData={userId:""},this.path=this.getConfigPath(),i.isNative)?t=jsb.fileUtils.getValueMapFromFile(this.path).LinkConfig:t=i.localStorage.getItem(h);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1));try{var a=JSON.parse(t);this.jsonData=a}catch(t){}}this.markSave=!1,this.saveTimer=setInterval((()=>{this.scheduleSave()}),500)}setConfigDataWithoutSave(t,a){var s=this.jsonData.userId;this.jsonData[s]?this.jsonData[s][t]=a:console.error("no account can not save")}setConfigData(t,a){this.setConfigDataWithoutSave(t,a),this.markSave=!0}getConfigData(t){var a=this.jsonData.userId;if(this.jsonData[a]){var s=this.jsonData[a][t];return s||""}return console.log("no account can not load"),""}setGlobalData(t,a){this.jsonData[t]=a,this.save()}getGlobalData(t){return this.jsonData[t]}setUserId(t){this.jsonData.userId=t,this.jsonData[t]||(this.jsonData[t]={}),this.save()}getUserId(){return this.jsonData.userId}scheduleSave(){this.markSave&&this.save()}markModified(){this.markSave=!0}save(){let t=JSON.stringify(this.jsonData);if(this.markSave=!1,i.isNative){var a={};a.LinkConfig=t,jsb.fileUtils.writeToFile(a,configuration.path)}else{i.localStorage.setItem(h,t)}}getConfigPath(){var t=i.platform,a="";return t===i.Platform.WIN32?a="src/conf":t===i.Platform.IOS?a="./conf":i.isNative?(a=jsb.fileUtils.getWritablePath(),a+="conf"):a="src/conf",a}parseUrl(t){if(t&&!("string"==typeof t&&t.length<=0)){var a={};if("string"==typeof t)(t=t.split("?")[1]).split("&").forEach((function(t){var s=t.indexOf("=");if(-1!==s){var i=t.substring(0,s);a[i]=t.substring(s+1)}}));else a=t;a.action&&this.setGlobalData("urlParams",a),a.source&&this.setGlobalData("source",a.source),a.adchannelid&&this.setGlobalData("adchannelid",a.adchannelid)}}generateGuestAccount(){return`${Date.now()}10`}},e(o,"_instance",void 0),n=r))||n);a._RF.pop()}}}));

System.register("chunks:///_virtual/lotteryItem.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./utils.ts","./uiManager.ts"],(function(t){"use strict";var e,i,r,o,n,s,l,a,c,u,p,h,d,f,b,m;return{setters:[function(t){e=t.cclegacy,i=t.Sprite,r=t.Label,o=t.SpriteFrame,n=t.Color,s=t.Node,l=t._decorator,a=t.Component,c=t.UITransform},function(t){u=t.applyDecoratedDescriptor,p=t.initializerDefineProperty,h=t.defineProperty},function(t){d=t.resourceUtil},function(t){f=t.constants},function(t){b=t.utils},function(t){m=t.uiManager}],execute:function(){var y,w,I,g,D,P,R,v,T,A,S,V,E,_,z,N,F,L,M;e._RF.push({},"f1db2PMDSdEoolhZOaw5gvA","lotteryItem",void 0);const{ccclass:O,property:U}=l;t("LotteryItem",(y=O("LotteryItem"),w=U(i),I=U(r),g=U(i),D=U(o),P=U(o),R=U(n),v=U(n),T=U(s),y((V=u((S=class extends a{constructor(...t){super(...t),p(this,"spSelect",V,this),p(this,"lbValue",E,this),p(this,"spIcon",_,this),p(this,"sfGold",z,this),p(this,"sfDiamond",N,this),p(this,"colorNormal",F,this),p(this,"colorSelect",L,this),p(this,"ndPropAddIcon",M,this),h(this,"info",void 0),h(this,"rewardType",void 0),h(this,"rewardValue",void 0),h(this,"propId",void 0)}setInfo(t){this.info=t,this.rewardType=t.type;const e=this.spIcon.getComponent(c);switch(this.rewardType){case f.REWARD_TYPE.DIAMOND:this.rewardValue=t.amount,this.spIcon.spriteFrame=this.sfDiamond,this.ndPropAddIcon.active=!1,this.lbValue.string=this.rewardValue,e.width=88.8,e.height=50.4;break;case f.REWARD_TYPE.GOLD:this.rewardValue=t.amount,this.spIcon.spriteFrame=this.sfGold,this.lbValue.string=b.formatMoney(this.rewardValue),this.ndPropAddIcon.active=!1,e.width=93,e.height=92;break;case f.REWARD_TYPE.PROP:this.rewardValue=t.amount,this.lbValue.string=this.rewardValue,this.propId="00"+t.subType,d.setPropIcon(this.propId,this.spIcon,(()=>{})),this.ndPropAddIcon.active=!0,e.width=77,e.height=77}}setSelect(t){this.spSelect.enabled=t,this.lbValue.getComponent(r).color=t?this.colorSelect:this.colorNormal,t&&this.setReceivedUI()}setReceivedUI(){let t={};t.itemType=this.info.type,t.itemSubType=this.info.subType,t.itemAmount=this.info.amount,m.instance.showDialog("lottery/reward",[t,!0,f.SHARE_FUNCTION.LOTTERY_REWARD])}}).prototype,"spSelect",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=u(S.prototype,"lbValue",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=u(S.prototype,"spIcon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=u(S.prototype,"sfGold",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=u(S.prototype,"sfDiamond",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=u(S.prototype,"colorNormal",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n}}),L=u(S.prototype,"colorSelect",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n}}),M=u(S.prototype,"ndPropAddIcon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=S))||A));e._RF.pop()}}}));

System.register("chunks:///_virtual/loadingUI.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts"],(function(t){"use strict";var e,n,r,i,s,a,l,h;return{setters:[function(t){e=t.cclegacy,n=t._decorator,r=t.Component,i=t.Sprite},function(t){s=t.applyDecoratedDescriptor,a=t.initializerDefineProperty,l=t.defineProperty},function(t){h=t.constants}],execute:function(){var u,o,c,p,g,L,d;e._RF.push({},"f33bfL32OJOUqxJ3VWLer3l","loadingUI",void 0);const{ccclass:b,property:f}=n;t("LoadingUI",b("LoadingUI")((c=s((o=class extends r{constructor(...t){super(...t),a(this,"progressBar",c,this),a(this,"percentLabel",p,this),a(this,"versionLabel",g,this),a(this,"tipsNode",L,this),a(this,"spriteArr",d,this),l(this,"updateTimer",null),l(this,"updateInterval",null),l(this,"totalLength",null),l(this,"lengthInterval",null),l(this,"type",null),l(this,"callback",null),l(this,"tasks",null),l(this,"currentMaxLength",null),l(this,"currentLength",null),l(this,"taskIndex",null),l(this,"running",null)}onLoad(){this.updateTimer=0,this.updateInterval=.01,this.totalLength=this.progressBar.totalLength,this.lengthInterval=30}onEnable(){let t=Math.floor(3*Math.random());t=t>=3?2:t,this.tipsNode.getComponent(i).spriteFrame=this.spriteArr[t]}startLoading(t,e,n){this.node.active=!0,this.type=t,this.callback=n,this.tasks=e,this.currentMaxLength=0,this.currentLength=0,this.progressBar.progress=0,this.percentLabel.string="0%",this.taskIndex=0,this.running=!0,this.nextTask([])}nextTask(t){if(this.tasks){if(this.taskIndex===this.tasks.length)return this.currentMaxLength=this.totalLength,void(this.type===h.SCENE_MANAGER_TYPE.LOAD&&(this.currentLength=this.currentMaxLength,this.setProgress()));this.type===h.SCENE_MANAGER_TYPE.LOAD&&(this.currentLength=this.currentMaxLength,this.setProgress());var e=this;t.push((function(t,n){if(t)return e.callback.apply(null,[t].concat(n));e.nextTask(Array.prototype.slice.call(arguments).slice(1))}));var n=this.tasks[this.taskIndex++];this.currentMaxLength=this.totalLength/(this.tasks.length+1)*this.taskIndex,n.apply(null,t)}}update(t){this.updateTimer+=t,this.updateTimer<this.updateInterval||this.running&&(this.updateTimer=0,this.currentLength+=this.lengthInterval,this.currentLength=this.currentLength>this.currentMaxLength?this.currentMaxLength:this.currentLength,this.setProgress())}setProgress(){var t=this.currentLength/this.totalLength;t=t>1?1:t,this.percentLabel.string=Math.floor(100*t)+"%",this.progressBar.progress=t,1===t&&(this.running=!1,this.callback.apply(null,[null].concat(null)))}}).prototype,"progressBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=s(o.prototype,"percentLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=s(o.prototype,"versionLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=s(o.prototype,"tipsNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=s(o.prototype,"spriteArr",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=o))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/constants.ts",["cc"],(function(E){"use strict";var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"f4f59qgd1lA2aWdYY7JPEm/","constants",void 0);E("constants",{VERSION:"1.4.7",LOCAL_CACHE:{PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",PASSWORD:"password",PRIVATE_KEY:"privateKey",HISTORY:"history",BAG:"bag"},SETTINGS_KEY:{LOTTERY:"lottery",MOREGAME_FIRSTCLICK:"moreGameFirstClick"},TMP_DATA_KEY:{AD_TIMES:"adTimes"},PROP_ID:{HAMMER:1,MAGIC:2,REFRESH:3,INFINITE:4},GUIDE_TYPE:{SPACE:0,GUIDE_ANI:1,TRIGGER_EVENT:2,WAIT_EVENT:3,GUIDE:4},GUIDE_TIPS_DIRECTION:{TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},SHARE_TYPE:{SHARE_GAME:0,GROUP_RANK:1},SHARE_FUNCTION:{BALANCE:"balance",PVE:"pve",START_REWARD:"startReward",LACK_STEP:"lackStep",FILL_SIGN:"fillSign",OFFLINE:"offline",RANK:"rank",BUY_INFINITE:"buyInfinite",LOTTERY:"lottery",LOTTERY_REWARD:"lotteryReward",ONLINE:"online",SHOP_PROP:"shopprop",FIGHT:"fight",SIGN:"sign"},WATCH_AD_MAX_TIMES:{LOTTERY:10},ZORDER:{LINK_ITEM_NORMAL:0,LINK_ITEM_SKILL:1,FIGHT_NUM:20,DIALOG:100,REWARD:900,WAITING:998,TIPS:999},STAT_EVENT_TYPE:{},LINK_ROWS_COUNT:8,LINK_COLS_COUNT:8,SPECIAL_EFFECT:{HORIZONTAL:1,VERTICAL:2,PLUS:3,CENTER:4},SIGN_REWARD_STATUS:{RECEIVED:0,RECEIVABLE:1,UNRECEIVABLE:2,FILLSIGNIN:3,AFTER_FILLSIGNIN:4},MAX_SIGN_IN_REWARDS_DAY:7,MAX_INFINITE_TIMES:10,AUDIO_MUSIC:{BACKGROUND:"bgm",FIGHT:"fight"},AUDIO_SOUND:{CLICK:"click",BONUS_TIME:"bonusTime",FINISH_LINK:"finishLink",CLICK_CAKE:"clickCake",FINISH_STAR:"finishStar",FLY_STAR:"flyStar",LINE_BOMB:"lineBomb",PLUS_BOMB:"plusBomb",RANGE_BOMB:"rangeBomb",SPARE_STEP:"spareStep",GOOD:"good",GREAT:"great",EXCELLENT:"excellent",AMAZING:"amazing",UNBELIEVABLE:"unbelievable"},MAX_GRADE_OF_EACH_PVE_LEVEL:3,PVE_LEVEL_STATUS:{DONE:0,UNDONE:1,DOING:2},SCENE_MANAGER_TYPE:{LOAD:0,LOAD_SCENE:1},REWARD_TYPE:{DIAMOND:1,GOLD:2,PROP:3,GIFT:4},LOTTERY_MAX_TIMES:0,LOTTERY_AD_MAX_TIMES:999999999,TASK_RESET_TIME:4,TASK_MAX_NUM:4,MOREGAME_MAIN:"1001",TASK_STATE:{UNRECEIVABLE:0,RECEIVABLE:1,RECEIVED:2},ANALYTICS_TYPE:{ON_LOGIN:"onLogin",START_LEVEL:"levelStart",END_LEVEL:"levelOver",ASK_WATCH_ADS_GET_EFFECT:"askWatchAdForEffect",WATCH_ADS_GET_EFFECT:"watchAdForEffect",ASK_WATCH_ADS_ADD_STEP:"askWatchAdForAddStep",WATCH_ADS_ADD_STEP:"watchAdForAddStep",SCORE_OF_LEVEL:"scoreOfLevel",ASK_LOTTERY:"askWatchAdForLottery",LOTTERY:"watchAdForLottery",SHARE:"share",ASK_GET_INFINITE:"askWatchAdForInfinite",GET_INFINITE:"watchAdForInfinite",SIGNIN_RECEIVE:"signinReceive",SIGNIN_FILL:"signinFill",SIGNIN_CLOSE:"signinClose",OFFLINE_REWARD_SHARE:"offlineRewardShare",OFFLINE_REWARD_SHARE_SUCCESS:"offlineRewardShareSuccess",OFFLINE_REWARD_CLOSE:"offlineRewardClose",OPEN_PANEL:"openPanel",START_GAME:"startGame",START_GAME_SUCCESS:"startGameSuccess",PLAYER_STAY_TIME:"playerStayTime",BALANCE_USED_STEP:"balanceUsedStep",BALANCE_GAIN_SCORE:"balanceGainScore",SIGNIN_ENTRANCE:"signinEntrance",LOTTERY_ENTRANCE:"lotteryEntrance",LOTTERY_TOTAL_TIMES:"lotteryTotalTimes",LOTTERY_WATCH_AD:"lotteryWatchAd",LOTTERY_SHARE:"lotteryShare",LOTTERY_WATCH_AD_SUCCESS:"lotteryWatchAdSuccess",LOTTERY_SHARE_SUCCESS:"lotteryShareSuccess",ONLINE_REWARD_ENTRANCE:"onlineRewardEntrance",ONLINE_REWARD_SUCCESS:"onlineRewardSuccess",SHOP_ENTRANCE:"shopEntrance",SHOP_PROP_PER_BUY:"shopPropPerBuy",SHOP_RAND_PROP_SHARE:"shopRandPropShare",SHOP_PLAYER_GOLD:"shopPlayerGold",SETTING_MUSIC_ON:"settingMusicOn",SETTING_MUSIC_OFF:"settingMusicOff",SETTING_SOUND_ON:"settingSoundOn",SETTING_SOUND_OFF:"settingSoundOff",RANK_ENTRANCE:"rankEntrance",RANK_SHARE:"rankShare",SHARE_CLICK:"shareClick",SHARE_SUCCESS:"shareSuccess",MOREGAME_ENTRANCE:"moregameEntrance",MOREGAME_SINGLE:"互推墙-卖量",MAIN_PUSH_GAME:"主界面-卖量",CHECKPOINT_PROP_BUY_NUM:"checkpointPropBuyNum",GAME_PROP_SUCCESS_NUM:"gamePropSuccessNum",GAME_PROP_BUY_NUM:"gamePropSuccessNum",BALANCE_NEXT:"balanceNext",BALANCE_PLAY_AGAIN:"balancePlayAgain",BALANCE_SHARE:"balanceShare",BALANCE_CLOSE:"balanceClose",GAME_BAR_CLICK:"导流条-卖量",CHANNEL:"channel",WATCH_AD_BTN_SHOW_TIMES:"视频按钮展示次数",WATCH_AD_BTN_CLICK_TIMES:"视频按钮点击次数",WATCH_AD_BTN_SUCCESS_TIMES:"视频按钮成功点击次数"},ONLINE_REWARD_INTERVAL:[0,3,5,10,30],REWARD_STATUS:{UNRECEIVABLE:0,RECEIVABLE:1,RECEIVED:2},OPEN_REWARD_TYPE:{AD:0,SHARE:1,NULL:2},SHOP_COUNTDOWN_HOURS:4,UNLOCK_HIGEST_LEVEl:5,UNLOCK_PROP_ID:[1,2,3,4],OFFLINE_REWARD:10,WX_BANNER_ADS:{BALANCE:0,PVE_PAGE:1,GAME:2},WX_REWARD_ADS:{VIDEO:0},WX_ADS_TYPE:{BANNER:0,VIDEO:4},WX_ADS_RESP_CODE:{kAdsReceived:0,kAdsShown:1,kAdsDismissed:2,kUnknownError:6},NORMAL_SHOW_TIME:.2});_._RF.pop()}}}));

System.register("chunks:///_virtual/onlineReward.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./utils.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./LanguageData.ts","./gameLogic.ts"],(function(e){"use strict";var t,i,n,a,r,s,o,l,c,u,h,d,R,w;return{setters:[function(e){t=e.cclegacy,i=e.Animation,n=e._decorator,a=e.Component},function(e){r=e.applyDecoratedDescriptor,s=e.initializerDefineProperty,o=e.defineProperty},function(e){l=e.constants},function(e){c=e.utils},function(e){u=e.localConfig},function(e){h=e.playerData},function(e){d=e.uiManager},function(e){R=e.t},function(e){w=e.GameLogic}],execute:function(){var f,b,p,T,m,g,E,O;t._RF.push({},"f6263VSRTFBzIruWaj84Ky6","onlineReward",void 0);const{ccclass:y,property:D}=n;e("OnlineReward",(f=y("OnlineReward"),b=D(i),f((m=r((T=class extends a{constructor(...e){super(...e),s(this,"ndTimer",m,this),s(this,"lbTime",g,this),s(this,"aniFreeReward",E,this),s(this,"btnReceive",O,this),o(this,"oldTime",void 0)}start(){this.checkOnlineReward()}checkOnlineReward(){switch(h.instance.getOnlineRewardInfo().value.receiveStatus){case l.REWARD_STATUS.UNRECEIVABLE:this.btnReceive.node&&(this.btnReceive.node.active=!1),this.aniFreeReward.play("freeGiftIdle"),this.schedule(this.countDownCallback,.5);break;case l.REWARD_STATUS.RECEIVABLE:this.btnReceive.node&&(this.btnReceive.node.active=!0),this.aniFreeReward.play("freeGiftActivation"),this.lbTime.string=R("onlineReward.receive"),this.unschedule(this.countDownCallback)}}onBtnReceiveClick(){let e=u.instance.getTable("prop");if(!e)return!1;let t=Object.keys(e).filter((e=>Number(e)!==l.PROP_ID.INFINITE)),i=t[Math.floor(Math.random()*t.length)]+"";w.instance.getOpenRewardType(l.SHARE_FUNCTION.ONLINE,((e,t)=>{if(!e)switch(t){case l.OPEN_REWARD_TYPE.AD:w.instance.showRewardAd((e=>{e||this.showReward(i)}));break;case l.OPEN_REWARD_TYPE.SHARE:w.instance.share(l.SHARE_FUNCTION.ONLINE,{},(e=>{e||this.showReward(i)}));break;case l.OPEN_REWARD_TYPE.NULL:this.showReward(i)}}))}countDownCallback(){let e=Date.now();if(this.oldTime||(this.oldTime=e),e-this.oldTime>1e3){let t=h.instance.getOnlineRewardInfo().usedTime,i=60*h.instance.getCountdownTime()*1e3-1e3*t;i<=0?(this.unschedule(this.countDownCallback),h.instance.updateOnlineRewardInfo(!1),this.checkOnlineReward(),this.lbTime.string=R("onlineReward.receive")):(this.lbTime.string=c.formatTimeForMillisecond(i).toString(),this.oldTime=e)}}showReward(e){let t={};t.itemType=l.REWARD_TYPE.PROP,t.itemSubType=e,t.itemAmount=1,d.instance.showDialog("lottery/reward",[t,!1,l.SHARE_FUNCTION.ONLINE]),h.instance.updateOnlineRewardInfo(!0),this.checkOnlineReward()}}).prototype,"ndTimer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=r(T.prototype,"lbTime",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=r(T.prototype,"aniFreeReward",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=r(T.prototype,"btnReceive",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=T))||p));t._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./poolManager.ts","./resourceUtil.ts","./animationUI.ts","./tips.ts"],(function(i){"use strict";var t,e,s,o,a,n,r,h,p;return{setters:[function(i){t=i.cclegacy,e=i._decorator,s=i.isValid,o=i.find},function(i){a=i.defineProperty},function(i){n=i.poolManager},function(i){r=i.resourceUtil},function(i){h=i.AnimationUI},function(i){p=i.tips}],execute:function(){var l,c,u;t._RF.push({},"f9384FYDp5GqoW+CtrCla3U","uiManager",void 0);const{ccclass:_,property:d}=e;i("uiManager",_("uiManager")((u=c=class i{constructor(){a(this,"_dictSharedPanel",{}),a(this,"_dictLoading",{}),a(this,"_arrPopupDialog",[]),a(this,"_showTipsTime",0)}static get instance(){return this._instance||(this._instance=new i),this._instance}isDialogVisible(i){if(!this._dictSharedPanel.hasOwnProperty(i))return!1;let t=this._dictSharedPanel[i];return s(t)&&t.active&&t.parent}showDialog(i,t,e){if(this._dictLoading[i])return;let a=i.lastIndexOf("/"),n=i.slice(a+1);if(t||(t=[]),this._dictSharedPanel.hasOwnProperty(i)){let a=this._dictSharedPanel[i];if(s(a)){a.parent=o("Canvas"),a.active=!0;let i=a.getComponent(n),s=a.getComponent(n.charAt(0).toUpperCase()+n.slice(1));if(i&&i.show)i.show.apply(i,t),e&&e(i);else{if(!s||!s.show)throw`查找不到脚本文件${n}`;s.show.apply(s,t),e&&e(s)}return}}this._dictLoading[i]=!0,r.createUI(i,((s,o)=>{let a=!1;if(this._dictLoading[i]||(a=!0),this._dictLoading[i]=!1,s)return void console.error(s);this._dictSharedPanel[i]=o;let r=o.getComponent(n),h=o.getComponent(n.charAt(0).toUpperCase()+n.slice(1));if(r&&r.show)r.show.apply(r,t),e&&e(r);else{if(!h||!h.show)throw`查找不到脚本文件${n}`;h.show.apply(h,t),e&&e(h)}a&&this.hideDialog(i)}))}hideDialog(i,t){if(this._dictSharedPanel.hasOwnProperty(i)){let e=this._dictSharedPanel[i];if(e&&s(e)){let i=e.getComponent(h);i?i.close((()=>{e.parent=null,t&&"function"==typeof t&&t()})):(e.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._dictLoading[i]=!1}pushToPopupSeq(i,t,e){let s={panelPath:i,scriptName:t,param:e,isShow:!1};this._arrPopupDialog.push(s),this._checkPopupSeq()}insertToPopupSeq(i,t,e){let s={panelPath:t,param:e,isShow:!1};this._arrPopupDialog.splice(i,0,s)}shiftFromPopupSeq(i){this.hideDialog(i,(()=>{this._arrPopupDialog[0]&&this._arrPopupDialog[0].panelPath===i&&(this._arrPopupDialog.shift(),this._checkPopupSeq())}))}_checkPopupSeq(){if(this._arrPopupDialog.length>0){let i=this._arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this._arrPopupDialog[0].isShow=!0)}}showTips(i,t){let e=String(i),s=()=>{this._showTipsAni(e,t)};var o=Date.now();if(o-this._showTipsTime<800){var a=800-(o-this._showTipsTime);setTimeout((()=>{s()}),a),this._showTipsTime=o+a}else s(),this._showTipsTime=o}_showTipsAni(i,t){r.getUIPrefabRes("common/tips",(function(e,s){if(e)return;n.instance.getNode(s,o("Canvas")).getComponent(p).show(i,t)}))}},a(c,"_instance",void 0),l=u))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/fightProp.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./resourceUtil.ts","./constants.ts","./clientEvent.ts","./playerData.ts","./uiManager.ts","./buttonEx.ts"],(function(t){"use strict";var o,e,i,n,r,s,p,c,a,l,u,h,P,f;return{setters:[function(t){o=t.cclegacy,e=t._decorator,i=t.Component,n=t.UITransform,r=t.Vec3},function(t){s=t.applyDecoratedDescriptor,p=t.initializerDefineProperty,c=t.defineProperty},function(t){a=t.resourceUtil},function(t){l=t.constants},function(t){u=t.clientEvent},function(t){h=t.playerData},function(t){P=t.uiManager},function(t){f=t.ButtonEx}],execute:function(){var d,b,k,g;o._RF.push({},"fe8afmT+lpEBr/zkz0jwl9D","fightProp",void 0);const{ccclass:m,property:D}=e;t("FightProp",m("FightProp")((k=s((b=class extends i{constructor(...t){super(...t),p(this,"spProp",k,this),p(this,"lbNum",g,this),c(this,"prop",void 0),c(this,"clickCallback",void 0)}start(){this.updateUnlockProp()}onEnable(){u.on("updateProp",this.updateProp,this),u.on("updateUnlockProp",this.updateUnlockProp,this)}onDisable(){u.off("updateProp",this.updateProp,this),u.off("updateUnlockProp",this.updateUnlockProp,this)}show(t){this.prop=t,a.setPropIcon(t.icon,this.spProp,(()=>{}));let o=h.instance.getPropAmount(t.ID);o<=0&&(o="+"),this.lbNum.string=o}updateProp(t){t===this.prop.ID&&this.show(this.prop)}setClickListener(t){this.clickCallback=t}onItemClick(){h.instance.getPropAmount(this.prop.ID)<=0?P.instance.showDialog("props/buy",[this.prop.ID,l.ANALYTICS_TYPE.GAME_PROP_BUY_NUM]):this.clickCallback&&this.clickCallback(this.prop,this.node.getComponent(n).convertToWorldSpaceAR(new r(0,0,0)))}updateUnlockProp(){let t=h.instance.isPropUnlock(this.prop.ID);this.node.getComponent(f).interactable=t,a.setGray(this.node,!t)}}).prototype,"spProp",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=s(b.prototype,"lbNum",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./poolManager.ts","./resourceUtil.ts","./constants.ts","./linkItem.ts","./clientEvent.ts","./constant.ts","./util.ts","./storageManager.ts","./utils.ts","./csvManager.ts","./localConfig.ts","./loadingUI.ts","./sceneManager.ts","./playerData.ts","./loadsh.ts","./animationUI.ts","./tips.ts","./uiManager.ts","./audioManager.ts","./buttonEx.ts","./fightProp.ts","./LanguageData.ts","./fightPropsOperation.ts","./fightTarget.ts","./levelUI.ts","./SDK.ts","./fightGuide.ts","./fightNum.ts","./gameLogic.ts","./buy.ts","./balance.ts","./linkLine.ts","./showTargetCake.ts","./showTarget.ts","./signinReward.ts","./LocalizedMaterial.ts","./pveSlotUI.ts","./multiScrollView.ts","./LocalizedSprite.ts","./unLockProp.ts","./shopPropsOperation.ts","./fightHandGuide.ts","./linkContent.ts","./reward.ts","./effectManager.ts","./shopItem.ts","./pveUI.ts","./stopPropagation.ts","./loginScene.ts","./adStepItem.ts","./offLineReward.ts","./loading.ts","./adStep.ts","./propItem.ts","./targetCake.ts","./levelPanel.ts","./signInItem.ts","./signIn.ts","./effectGroup.ts","./fightUI.ts","./fightScene.ts","./adProp.ts","./setting.ts","./gameSetting.ts","./LocalizedRichText.ts","./elasticLimit.ts","./lotteryItem.ts","./lottery.ts","./balanceFailed.ts","./shop.ts","./LocalizedLabel.ts","./configuration.ts","./onlineReward.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});